<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Croissant2097</title>
  
  <subtitle>Record &amp; Share &amp; Learn</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-07-15T06:35:10.846Z</updated>
  <id>http://yoursite.com/</id>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä¼‘çœ æ’åº</title>
    <link href="http://yoursite.com/2020/07/15/%E4%BC%91%E7%9C%A0%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/15/ä¼‘çœ æ’åº/</id>
    <published>2020-07-15T06:34:20.000Z</published>
    <updated>2020-07-15T06:35:10.846Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å²ä¸Šâ€œæœ€å¼ºâ€æ’åº-â€“-ä¼‘çœ æ’åº"><a href="#å²ä¸Šâ€œæœ€å¼ºâ€æ’åº-â€“-ä¼‘çœ æ’åº" class="headerlink" title="å²ä¸Šâ€œæœ€å¼ºâ€æ’åº â€“ ä¼‘çœ æ’åº"></a>å²ä¸Šâ€œæœ€å¼ºâ€æ’åº â€“ ä¼‘çœ æ’åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SleepSort</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SleepSort</span><span class="params">(<span class="keyword">int</span> value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(value);</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] array = &#123;<span class="number">10</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="number">30</span>,<span class="number">60</span>,<span class="number">2</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> item : array) &#123;</span><br><span class="line">            <span class="keyword">new</span> SleepSort(item).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å²ä¸Šâ€œæœ€å¼ºâ€æ’åº-â€“-ä¼‘çœ æ’åº&quot;&gt;&lt;a href=&quot;#å²ä¸Šâ€œæœ€å¼ºâ€æ’åº-â€“-ä¼‘çœ æ’åº&quot; class=&quot;headerlink&quot; title=&quot;å²ä¸Šâ€œæœ€å¼ºâ€æ’åº â€“ ä¼‘çœ æ’åº&quot;&gt;&lt;/a&gt;å²ä¸Šâ€œæœ€å¼ºâ€æ’åº â€“ ä¼‘çœ æ’åº&lt;/h1&gt;&lt;figure class=&quot;highli
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ¡¶æ’åº</title>
    <link href="http://yoursite.com/2020/07/15/%E6%A1%B6%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/15/æ¡¶æ’åº/</id>
    <published>2020-07-15T06:00:39.000Z</published>
    <updated>2020-07-15T06:33:20.720Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¡¶æ’åºï¼ˆBucket-Sortï¼‰"><a href="#æ¡¶æ’åºï¼ˆBucket-Sortï¼‰" class="headerlink" title="æ¡¶æ’åºï¼ˆBucket Sortï¼‰"></a>æ¡¶æ’åºï¼ˆBucket Sortï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯æ¡¶æ’åº"><a href="#ä»€ä¹ˆæ˜¯æ¡¶æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¡¶æ’åº"></a>ä»€ä¹ˆæ˜¯æ¡¶æ’åº</h2><p>æ‰§è¡Œæµç¨‹</p><p>â‘  åˆ›å»ºä¸€å®šæ•°é‡çš„æ¡¶ï¼ˆæ¯”å¦‚ç”¨æ•°ç»„ã€é“¾è¡¨ä½œä¸ºæ¡¶ï¼‰</p><p>â‘¡ æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼ˆä¸åŒç±»å‹çš„æ•°æ®ï¼Œè§„åˆ™ä¸åŒï¼‰ï¼Œå°†åºåˆ—ä¸­çš„å…ƒç´ å‡åŒ€åˆ†é…åˆ°å¯¹åº”çš„æ¡¶</p><p>â‘¢ åˆ†åˆ«å¯¹æ¯ä¸ªæ¡¶è¿›è¡Œå•ç‹¬æ’åº</p><p>â‘£ å°†æ‰€æœ‰éç©ºæ¡¶çš„å…ƒç´ åˆå¹¶æˆæœ‰åºåºåˆ—</p><p>å…ƒç´ åœ¨æ¡¶ä¸­çš„ç´¢å¼•</p><p>å…ƒç´ å€¼ * å…ƒç´ æ•°é‡</p><p><img src="/2020/07/15/æ¡¶æ’åº/1.png" alt></p><h2 id="æ¡¶æ’åº-â€“-å®ç°"><a href="#æ¡¶æ’åº-â€“-å®ç°" class="headerlink" title="æ¡¶æ’åº â€“ å®ç°"></a>æ¡¶æ’åº â€“ å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span>[] array = &#123;<span class="number">0.34</span>,<span class="number">0.47</span>,<span class="number">0.29</span>,<span class="number">0.84</span>,<span class="number">0.45</span>,<span class="number">0.38</span>,<span class="number">0.35</span>,<span class="number">0.76</span>&#125;;</span><br><span class="line"><span class="comment">// æ¡¶æ’åº</span></span><br><span class="line">List&lt;Double&gt;[] buckets = <span class="keyword">new</span> List[array.length];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">double</span> v : array) &#123;</span><br><span class="line">    <span class="keyword">int</span> bucketIndex = (<span class="keyword">int</span>) (v * array.length);</span><br><span class="line">    List&lt;Double&gt; bucket = buckets[bucketIndex];</span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="keyword">null</span>) &#123;</span><br><span class="line">        bucket = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        buckets[bucketIndex] = bucket;</span><br><span class="line">    &#125;</span><br><span class="line">    bucket.add(v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹æ¯ä¸ªæ¡¶è¿›è¡Œæ’åº</span></span><br><span class="line"><span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (List&lt;Double&gt; bucket : buckets) &#123;</span><br><span class="line">    <span class="keyword">if</span> (bucket == <span class="keyword">null</span>) <span class="keyword">continue</span>;</span><br><span class="line">    bucket.sort(<span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">for</span> (Double d : bucket) &#123;</span><br><span class="line">        array[index++] = d;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç©ºé—´å¤æ‚åº¦ï¼š$O(n + m)$ï¼Œ$m$ æ˜¯æ¡¶çš„æ•°é‡</p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(n) + m âˆ— O( \frac{n} {m} âˆ— log\frac{n}{m}) = O(n + n âˆ— log\frac{n}{m}) = O(n + n âˆ— logn âˆ’ n âˆ— logm)$</p><p>å›  æ­¤ ä¸º $O(n + k)$ ï¼Œ$k$ ä¸º $n âˆ— logn âˆ’ n âˆ— logm$</p><p>å±äºç¨³å®šæ’åº</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æ¡¶æ’åºï¼ˆBucket-Sortï¼‰&quot;&gt;&lt;a href=&quot;#æ¡¶æ’åºï¼ˆBucket-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ¡¶æ’åºï¼ˆBucket Sortï¼‰&quot;&gt;&lt;/a&gt;æ¡¶æ’åºï¼ˆBucket Sortï¼‰&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯æ¡¶æ’åº&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>åŸºæ•°æ’åº</title>
    <link href="http://yoursite.com/2020/07/15/%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/15/åŸºæ•°æ’åº/</id>
    <published>2020-07-15T06:00:22.000Z</published>
    <updated>2020-07-15T06:21:11.958Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰"><a href="#åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰" class="headerlink" title="åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰"></a>åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯åŸºæ•°æ’åº"><a href="#ä»€ä¹ˆæ˜¯åŸºæ•°æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸºæ•°æ’åº"></a>ä»€ä¹ˆæ˜¯åŸºæ•°æ’åº</h2><p>åŸºæ•°æ’åºéå¸¸é€‚åˆç”¨äºæ•´æ•°æ’åºï¼ˆå°¤å…¶æ˜¯éè´Ÿæ•´æ•°ï¼‰ï¼Œå› æ­¤æœ¬è¯¾ç¨‹åªæ¼”ç¤ºå¯¹éè´Ÿæ•´æ•°è¿›è¡ŒåŸºæ•°æ’åº</p><p>æ‰§è¡Œæµç¨‹ï¼šä¾æ¬¡å¯¹ä¸ªä½æ•°ã€åä½æ•°ã€ç™¾ä½æ•°ã€åƒä½æ•°ã€ä¸‡ä½æ•°â€¦è¿›è¡Œæ’åºï¼ˆä»ä½ä½åˆ°é«˜ä½ï¼‰</p><p><img src="/2020/07/15/åŸºæ•°æ’åº/1.png" alt></p><p>ä¸ªä½æ•°ã€åä½æ•°ã€ç™¾ä½æ•°çš„å–å€¼èŒƒå›´éƒ½æ˜¯å›ºå®šçš„ $0$ ~ $9$ï¼Œå¯ä»¥ä½¿ç”¨è®¡æ•°æ’åºå¯¹å®ƒä»¬è¿›è¡Œæ’åº</p><p><strong>å¦‚æœå…ˆå¯¹é«˜ä½æ’åºï¼Œå†å¯¹ä½ä½æ’åºï¼Œæ˜¯ä¸å¯è¡Œçš„</strong></p><h2 id="åŸºæ•°æ’åº-â€“-å®ç°"><a href="#åŸºæ•°æ’åº-â€“-å®ç°" class="headerlink" title="åŸºæ•°æ’åº â€“ å®ç°"></a>åŸºæ•°æ’åº â€“ å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ‰¾å‡ºæœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">int</span> max = array[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array[i] &gt; max) &#123;</span><br><span class="line">            max = array[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ªä½æ•°: array[i] / 1 % 10 = 3</span></span><br><span class="line">    <span class="comment">// åä½æ•°ï¼šarray[i] / 10 % 10 = 9</span></span><br><span class="line">    <span class="comment">// ç™¾ä½æ•°ï¼šarray[i] / 100 % 10 = 5</span></span><br><span class="line">    <span class="comment">// åƒä½æ•°ï¼šarray[i] / 1000 % 10 = ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> divider = <span class="number">1</span>; divider &lt;= max; divider *= <span class="number">10</span>) &#123;</span><br><span class="line">        countingSort(divider);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">countingSort</span><span class="params">(<span class="keyword">int</span> divider)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span>[] counts = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="comment">// ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (Integer integer : array) &#123;</span><br><span class="line">        counts[integer / divider % <span class="number">10</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç´¯åŠ æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; counts.length; i++) &#123;</span><br><span class="line">        counts[i] += counts[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®</span></span><br><span class="line">    <span class="keyword">int</span>[] newArray = <span class="keyword">new</span> <span class="keyword">int</span>[array.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        newArray[--counts[array[i] / divider % <span class="number">10</span>]] = array[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°array</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; newArray.length; i++) &#123;</span><br><span class="line">        array[i] = newArray[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(d âˆ— (n + k))$ ï¼Œ$d$ æ˜¯æœ€å¤§å€¼çš„ä½æ•°ï¼Œ$k$ æ˜¯è¿›åˆ¶ã€‚å±äºç¨³å®šæ’åº</p><p>ç©ºé—´å¤æ‚åº¦ï¼š$O(n + k)$ï¼Œ$k$ æ˜¯è¿›åˆ¶</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰&quot;&gt;&lt;a href=&quot;#åŸºæ•°æ’åºï¼ˆRadix-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰&quot;&gt;&lt;/a&gt;åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯åŸºæ•°æ’åº&quot;&gt;
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>è®¡æ•°æ’åº</title>
    <link href="http://yoursite.com/2020/07/15/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/15/è®¡æ•°æ’åº/</id>
    <published>2020-07-15T06:00:02.000Z</published>
    <updated>2020-07-15T06:16:25.826Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰"><a href="#è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰" class="headerlink" title="è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰"></a>è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰</h1><p>å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å½’å¹¶ã€å¿«é€Ÿã€å¸Œå°”ã€å †æ’åºï¼Œéƒ½æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åº</p><p>å¹³å‡æ—¶é—´å¤æ‚åº¦ç›®å‰æœ€ä½æ˜¯ $O(nlogn)$ </p><p>è®¡æ•°æ’åºã€æ¡¶æ’åºã€åŸºæ•°æ’åºï¼Œéƒ½ä¸æ˜¯åŸºäºæ¯”è¾ƒçš„æ’åº</p><p>å®ƒä»¬æ˜¯å…¸å‹çš„ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œåœ¨æŸäº›æ—¶å€™ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å¯ä»¥æ¯” $O(nlogn)$ æ›´ä½</p><h2 id="ä»€ä¹ˆæ˜¯è®¡æ•°æ’åº"><a href="#ä»€ä¹ˆæ˜¯è®¡æ•°æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯è®¡æ•°æ’åº"></a>ä»€ä¹ˆæ˜¯è®¡æ•°æ’åº</h2><p>è®¡æ•°æ’åºäº1954å¹´ç”±Harold H. Sewardæå‡ºï¼Œé€‚åˆå¯¹ä¸€å®šèŒƒå›´å†…çš„æ•´æ•°è¿›è¡Œæ’åº</p><p>è®¡æ•°æ’åºçš„æ ¸å¿ƒæ€æƒ³ï¼š</p><p><strong>ç»Ÿè®¡æ¯ä¸ªæ•´æ•°åœ¨åºåˆ—ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè¿›è€Œæ¨å¯¼å‡ºæ¯ä¸ªæ•´æ•°åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•</strong></p><h2 id="è®¡æ•°æ’åº-â€“-æœ€ç®€å•çš„å®ç°"><a href="#è®¡æ•°æ’åº-â€“-æœ€ç®€å•çš„å®ç°" class="headerlink" title="è®¡æ•°æ’åº â€“ æœ€ç®€å•çš„å®ç°"></a>è®¡æ•°æ’åº â€“ æœ€ç®€å•çš„å®ç°</h2><p><img src="/2020/07/15/è®¡æ•°æ’åº/1.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ‰¾å‡ºæœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">int</span> max = array[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array[i] &gt; max) &#123;</span><br><span class="line">            max = array[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// O(n)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span>[] counts = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1</span> + max];</span><br><span class="line">    <span class="comment">// ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (Integer integer : array) &#123;</span><br><span class="line">        counts[integer]++;</span><br><span class="line">    &#125; <span class="comment">// O(n)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®æ•´æ•°çš„å‡ºç°æ¬¡æ•°ï¼Œå¯¹æ•´æ•°è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; counts.length; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (counts[i]-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            array[index++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// O(n)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç‰ˆæœ¬çš„å®ç°å­˜åœ¨ä»¥ä¸‹é—®é¢˜</p><ul><li><p><strong>æ— æ³•å¯¹è´Ÿæ•´æ•°è¿›è¡Œæ’åº</strong></p></li><li><p><strong>æå…¶æµªè´¹å†…å­˜ç©ºé—´</strong></p></li><li><p><strong>æ˜¯ä¸ªä¸ç¨³å®šçš„æ’åº</strong></p></li></ul><h2 id="è®¡æ•°æ’åº-â€“-æ”¹è¿›æ€è·¯"><a href="#è®¡æ•°æ’åº-â€“-æ”¹è¿›æ€è·¯" class="headerlink" title="è®¡æ•°æ’åº â€“ æ”¹è¿›æ€è·¯"></a>è®¡æ•°æ’åº â€“ æ”¹è¿›æ€è·¯</h2><p>å‡è®¾ $array$ ä¸­çš„æœ€å°å€¼æ˜¯ $min$</p><p>$array$ ä¸­çš„å…ƒç´  $k$ å¯¹åº”çš„ $counts$ ç´¢å¼•æ˜¯ $k â€“ min$</p><p>$array$ ä¸­çš„å…ƒç´  $k$ åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•</p><p>$counts[k â€“ min] â€“ p$</p><p>$p$ ä»£è¡¨ç€æ˜¯å€’æ•°ç¬¬å‡ ä¸ª $k$</p><p><img src="/2020/07/15/è®¡æ•°æ’åº/2.png" alt></p><p><img src="/2020/07/15/è®¡æ•°æ’åº/3.png" alt></p><p><img src="/2020/07/15/è®¡æ•°æ’åº/4.png" alt></p><p><img src="/2020/07/15/è®¡æ•°æ’åº/5.png" alt></p><p><img src="/2020/07/15/è®¡æ•°æ’åº/6.png" alt></p><h2 id="è®¡æ•°æ’åº-â€“-æ”¹è¿›å®ç°"><a href="#è®¡æ•°æ’åº-â€“-æ”¹è¿›å®ç°" class="headerlink" title="è®¡æ•°æ’åº â€“ æ”¹è¿›å®ç°"></a>è®¡æ•°æ’åº â€“ æ”¹è¿›å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ‰¾å‡ºæœ€å€¼</span></span><br><span class="line">    <span class="keyword">int</span> max = array[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> min = array[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array[i] &gt; max) &#123;</span><br><span class="line">            max = array[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (array[i] &lt; min) &#123;</span><br><span class="line">            min = array[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span>[] counts = <span class="keyword">new</span> <span class="keyword">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (Integer integer : array) &#123;</span><br><span class="line">        counts[integer - min]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç´¯åŠ æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; counts.length; i++) &#123;</span><br><span class="line">        counts[i] += counts[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®</span></span><br><span class="line">    <span class="keyword">int</span>[] newArray = <span class="keyword">new</span> <span class="keyword">int</span>[array.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = array.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        newArray[--counts[array[i] - min]] = array[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°array</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; newArray.length; i++) &#123;</span><br><span class="line">        array[i] = newArray[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(n + k)$</strong></p><p><strong>ç©ºé—´å¤æ‚åº¦ï¼š$O(n + k)$</strong></p><p><strong>$k$ æ˜¯æ•´æ•°çš„å–å€¼èŒƒå›´</strong></p><p><strong>å±äºç¨³å®šæ’åº</strong></p><h2 id="è®¡æ•°æ’åº-â€“-å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæ’åº"><a href="#è®¡æ•°æ’åº-â€“-å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæ’åº" class="headerlink" title="è®¡æ•°æ’åº â€“ å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæ’åº"></a>è®¡æ•°æ’åº â€“ å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œæ’åº</h2><p>å¦‚æœè‡ªå®šä¹‰å¯¹è±¡å¯ä»¥æä¾›ç”¨ä»¥æ’åºçš„æ•´æ•°ç±»å‹ï¼Œä¾ç„¶å¯ä»¥ä½¿ç”¨è®¡æ•°æ’åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    String name;</span><br><span class="line">    Person(<span class="keyword">int</span> age, String name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person [age="</span> + age </span><br><span class="line">            + <span class="string">", name="</span> + name + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Person[] persons = <span class="keyword">new</span> Person[] &#123;</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="number">20</span>, <span class="string">"A"</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(-<span class="number">13</span>, <span class="string">"B"</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="number">17</span>, <span class="string">"C"</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="number">12</span>, <span class="string">"D"</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(-<span class="number">13</span>, <span class="string">"E"</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="number">20</span>, <span class="string">"F"</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰¾å‡ºæœ€å€¼</span></span><br><span class="line"><span class="keyword">int</span> max = persons[<span class="number">0</span>].age;</span><br><span class="line"><span class="keyword">int</span> min = persons[<span class="number">0</span>].age;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; persons.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (persons[i].age &gt; max) &#123;</span><br><span class="line">        max = persons[i].age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (persons[i].age &lt; min) &#123;</span><br><span class="line">        min = persons[i].age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">int</span>[] counts = <span class="keyword">new</span> <span class="keyword">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line"><span class="comment">// ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">for</span> (Person person : persons) &#123;</span><br><span class="line">    counts[person.age - min]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç´¯åŠ æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; counts.length; i++) &#123;</span><br><span class="line">    counts[i] += counts[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®</span></span><br><span class="line">Person[] newArray = <span class="keyword">new</span> Person[persons.length];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = persons.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    newArray[--counts[persons[i].age - min]] = persons[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°array</span></span><br><span class="line">System.arraycopy(newArray, <span class="number">0</span>, persons, <span class="number">0</span>, newArray.length);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Person person : persons) &#123;</span><br><span class="line">    System.out.println(person);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ’åºä¹‹åçš„ç»“æœ</p><p>â‘  $Person [age=-13, name=B]$</p><p>â‘¡ $Person [age=-13, name=E]$</p><p>â‘¢ $Person [age=12, name=D]$</p><p>â‘£ $Person [age=17, name=C]$</p><p>â‘¤ $Person [age=20, name=A]$</p><p>â‘¥ $Person [age=20, name=F]$</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰&quot;&gt;&lt;a href=&quot;#è®¡æ•°æ’åºï¼ˆCounting-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰&quot;&gt;&lt;/a&gt;è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰&lt;/h1&gt;&lt;p&gt;å†’æ³¡
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å¸Œå°”æ’åº</title>
    <link href="http://yoursite.com/2020/07/14/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/14/å¸Œå°”æ’åº/</id>
    <published>2020-07-14T11:06:42.000Z</published>
    <updated>2020-07-14T11:32:07.685Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰"><a href="#å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰" class="headerlink" title="å¸Œå°”æ’åºï¼ˆShell Sortï¼‰"></a>å¸Œå°”æ’åºï¼ˆShell Sortï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯å¸Œå°”æ’åº"><a href="#ä»€ä¹ˆæ˜¯å¸Œå°”æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯å¸Œå°”æ’åº"></a>ä»€ä¹ˆæ˜¯å¸Œå°”æ’åº</h2><ol><li><p>1959å¹´ç”±å”çº³å¾·Â·å¸Œå°”ï¼ˆDonald Shellï¼‰æå‡º</p></li><li><p>å¸Œå°”æ’åºæŠŠåºåˆ—çœ‹ä½œæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œåˆ†æˆ ğ‘š åˆ—ï¼Œé€åˆ—è¿›è¡Œæ’åº</p><p>ğ‘š ä»æŸä¸ªæ•´æ•°é€æ¸å‡ä¸º1</p><p>å½“ ğ‘š ä¸º1æ—¶ï¼Œæ•´ä¸ªåºåˆ—å°†å®Œå…¨æœ‰åº</p></li><li><p>å› æ­¤ï¼Œå¸Œå°”æ’åºä¹Ÿè¢«ç§°ä¸ºé€’å‡å¢é‡æ’åºï¼ˆDiminishing Increment Sortï¼‰</p></li><li><p>çŸ©é˜µçš„åˆ—æ•°å–å†³äºæ­¥é•¿åºåˆ—ï¼ˆstep sequenceï¼‰</p><p>æ¯”å¦‚ï¼Œå¦‚æœæ­¥é•¿åºåˆ—ä¸º ${1,5,19,41,109,â€¦}$ï¼Œå°±ä»£è¡¨ä¾æ¬¡åˆ†æˆ109åˆ—ã€41åˆ—ã€19åˆ—ã€5åˆ—ã€1åˆ—è¿›è¡Œæ’åº</p><p>ä¸åŒçš„æ­¥é•¿åºåˆ—ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿä¸åŒ</p></li></ol><h2 id="å¸Œå°”æ’åº-â€“-å®ä¾‹"><a href="#å¸Œå°”æ’åº-â€“-å®ä¾‹" class="headerlink" title="å¸Œå°”æ’åº â€“ å®ä¾‹"></a>å¸Œå°”æ’åº â€“ å®ä¾‹</h2><p>å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—æ˜¯ $ğ‘›/2^ğ‘˜$ï¼Œæ¯”å¦‚ $ğ‘›$ ä¸º $16$ æ—¶ï¼Œæ­¥é•¿åºåˆ—æ˜¯ {$1, 2, 4, 8$}</p><p><strong>åˆ†æˆ8åˆ—è¿›è¡Œæ’åº</strong></p><p><img src="/2020/07/14/å¸Œå°”æ’åº/1.png" alt></p><p><strong>åˆ†æˆ4åˆ—è¿›è¡Œæ’åº</strong></p><p><img src="/2020/07/14/å¸Œå°”æ’åº/2.png" alt></p><p><strong>åˆ†æˆ2åˆ—è¿›è¡Œæ’åº</strong></p><p><img src="/2020/07/14/å¸Œå°”æ’åº/3.png" alt></p><p><strong>åˆ†æˆ1åˆ—è¿›è¡Œæ’åº</strong></p><p><img src="/2020/07/14/å¸Œå°”æ’åº/4.png" alt></p><p><strong>ä¸éš¾çœ‹å‡ºæ¥ï¼Œä»8åˆ—å˜ä¸º1åˆ—çš„è¿‡ç¨‹ä¸­ï¼Œé€†åºå¯¹çš„æ•°é‡åœ¨é€æ¸å‡å°‘</strong></p><p>å› æ­¤å¸Œå°”æ’åºåº•å±‚ä¸€èˆ¬ä½¿ç”¨æ’å…¥æ’åºå¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åºï¼Œå¾ˆå¤šèµ„æ–™è®¤ä¸ºå¸Œå°”æ’åºæ˜¯æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆ</p><h2 id="å‡è®¾æœ‰11ä¸ªå…ƒç´ ï¼Œæ­¥é•¿åºåˆ—æ˜¯-1-2-5"><a href="#å‡è®¾æœ‰11ä¸ªå…ƒç´ ï¼Œæ­¥é•¿åºåˆ—æ˜¯-1-2-5" class="headerlink" title="å‡è®¾æœ‰11ä¸ªå…ƒç´ ï¼Œæ­¥é•¿åºåˆ—æ˜¯{1, 2, 5}"></a>å‡è®¾æœ‰11ä¸ªå…ƒç´ ï¼Œæ­¥é•¿åºåˆ—æ˜¯{1, 2, 5}</h2><p><img src="/2020/07/14/å¸Œå°”æ’åº/5.png" alt></p><p>å‡è®¾å…ƒç´ åœ¨ç¬¬ $col$ åˆ—ã€ç¬¬ $row$ è¡Œï¼Œæ­¥é•¿ï¼ˆæ€»åˆ—æ•°ï¼‰æ˜¯ $step$</p><p>é‚£ä¹ˆè¿™ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•æ˜¯ $col + row * step$</p><p>æ¯”å¦‚ $9$ åœ¨æ’åºå‰æ˜¯ç¬¬ $2$ åˆ—ã€ç¬¬ $0$ è¡Œï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ $2 + 0 * 5 = 2$</p><p>æ¯”å¦‚ $4$ åœ¨æ’åºå‰æ˜¯ç¬¬ $2$ åˆ—ã€ç¬¬ $1$ è¡Œï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ $2 + 1 * 5 = 7$</p><h2 id="å¸Œå°”æ’åº-â€“-å®ç°"><a href="#å¸Œå°”æ’åº-â€“-å®ç°" class="headerlink" title="å¸Œå°”æ’åº â€“ å®ç°"></a>å¸Œå°”æ’åº â€“ å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; shellSequence = shellStepSequence();</span><br><span class="line">    <span class="keyword">for</span> (Integer shell : shellSequence) &#123;</span><br><span class="line">        sort(shell);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ†æˆstepåˆ—è¿›è¡Œæ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> step)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// col : ç¬¬å‡ åˆ—ï¼Œcolumnçš„ç®€ç§°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> col = <span class="number">0</span>; col &lt; step; col++) &#123; <span class="comment">// å¯¹ç¬¬colåˆ—è¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="comment">// colã€col+stepã€col+2*stepã€col+3*step</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> begin = col + step; begin &lt; array.length; begin += step) &#123;</span><br><span class="line">            <span class="keyword">int</span> cur = begin;</span><br><span class="line">            <span class="keyword">while</span> (cur &gt; col &amp;&amp; cmp(cur, cur - step) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                swap(cur, cur - step);</span><br><span class="line">                cur -= step;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€å¥½æƒ…å†µæ˜¯æ­¥é•¿åºåˆ—åªæœ‰ $1$ï¼Œä¸”åºåˆ—å‡ ä¹æœ‰åºï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$</p><p>ç©ºé—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œå±äºä¸ç¨³å®šæ’åº</p><h3 id="å¸Œå°”æ’åº-â€“-æ­¥é•¿åºåˆ—"><a href="#å¸Œå°”æ’åº-â€“-æ­¥é•¿åºåˆ—" class="headerlink" title="å¸Œå°”æ’åº â€“ æ­¥é•¿åºåˆ—"></a>å¸Œå°”æ’åº â€“ æ­¥é•¿åºåˆ—</h3><p>å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> List&lt;Integer&gt; <span class="title">shellStepSequence</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; stepSequence = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> step = array.length;</span><br><span class="line">    <span class="keyword">while</span> ((step &gt;&gt;= <span class="number">1</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        stepSequence.add(step);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stepSequence;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›®å‰å·²çŸ¥çš„æœ€å¥½çš„æ­¥é•¿åºåˆ—ï¼Œæœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^{4/3})$ ï¼Œ1986å¹´ç”±<strong>Robert Sedgewick</strong>æå‡º</p><script type="math/tex; mode=display">\begin{cases}9 \left(2^k - 2^{\frac{k}{2}}\right) +1, & \text {k even} \\8 \cdot 2^k - 6 \cdot 2^{\frac{(k+1)}{2}} + 1, & \text {k odd} \\\end{cases} \\1,5,19,41,109,...</script><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> List&lt;Integer&gt; <span class="title">SedgewickStepSequence</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; stepSequence = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>, step = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (k % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> pow = (<span class="keyword">int</span>) Math.pow(<span class="number">2</span>, k &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            step = <span class="number">1</span> + <span class="number">9</span> * (pow * pow - pow);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> pow1 = (<span class="keyword">int</span>) Math.pow(<span class="number">2</span>, (k - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">int</span> pow2 = (<span class="keyword">int</span>) Math.pow(<span class="number">2</span>, (k + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            step = <span class="number">1</span> + <span class="number">8</span> * pow1 * pow2 - <span class="number">6</span> * pow2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (step &gt;= array.length) <span class="keyword">break</span>;</span><br><span class="line">        stepSequence.add(<span class="number">0</span>, step);</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stepSequence;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰&quot;&gt;&lt;a href=&quot;#å¸Œå°”æ’åºï¼ˆShell-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å¸Œå°”æ’åºï¼ˆShell Sortï¼‰&quot;&gt;&lt;/a&gt;å¸Œå°”æ’åºï¼ˆShell Sortï¼‰&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯å¸Œå°”æ’åº&quot;&gt;
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å¿«é€Ÿæ’åº</title>
    <link href="http://yoursite.com/2020/07/14/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/14/å¿«é€Ÿæ’åº/</id>
    <published>2020-07-14T10:53:40.000Z</published>
    <updated>2020-07-14T11:05:38.206Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰"><a href="#å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰" class="headerlink" title="å¿«é€Ÿæ’åºï¼ˆQuick    Sortï¼‰"></a>å¿«é€Ÿæ’åºï¼ˆQuick    Sortï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯å¿«é€Ÿæ’åº"><a href="#ä»€ä¹ˆæ˜¯å¿«é€Ÿæ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯å¿«é€Ÿæ’åº"></a>ä»€ä¹ˆæ˜¯å¿«é€Ÿæ’åº</h2><p>1960å¹´ç”±æŸ¥å°”æ–¯Â·å®‰ä¸œå°¼Â·ç†æŸ¥å¾·Â·éœå°”ï¼ˆCharles Antony Richard Hoareï¼Œç¼©å†™ä¸ºC. A. R. Hoareï¼‰æå‡º</p><p>æ˜µç§°ä¸ºä¸œå°¼Â·éœå°”ï¼ˆTony Hoareï¼‰</p><h2 id="å¿«é€Ÿæ’åº-â€“-æ‰§è¡Œæµç¨‹"><a href="#å¿«é€Ÿæ’åº-â€“-æ‰§è¡Œæµç¨‹" class="headerlink" title="å¿«é€Ÿæ’åº â€“ æ‰§è¡Œæµç¨‹"></a>å¿«é€Ÿæ’åº â€“ æ‰§è¡Œæµç¨‹</h2><p>â‘  ä»åºåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªè½´ç‚¹å…ƒç´ ï¼ˆpivotï¼‰</p><p>â€‹    å‡è®¾æ¯æ¬¡é€‰æ‹© 0 ä½ç½®çš„å…ƒç´ ä¸ºè½´ç‚¹å…ƒç´ </p><p>â‘¡ åˆ©ç”¨ pivot å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå­åºåˆ—</p><p>â€‹    å°†å°äº pivot çš„å…ƒç´ æ”¾åœ¨pivotå‰é¢ï¼ˆå·¦ä¾§ï¼‰</p><p>â€‹    å°†å¤§äº pivot çš„å…ƒç´ æ”¾åœ¨pivotåé¢ï¼ˆå³ä¾§ï¼‰</p><p>â€‹    ç­‰äºpivotçš„å…ƒç´ æ”¾å“ªè¾¹éƒ½å¯ä»¥</p><p>â‘¢ å¯¹å­åºåˆ—è¿›è¡Œ â‘  â‘¡ æ“ä½œ</p><p>â€‹    ç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆå­åºåˆ—ä¸­åªå‰©ä¸‹1ä¸ªå…ƒç´ ï¼‰</p><p><img src="/2020/07/14/å¿«é€Ÿæ’åº/1.png" alt></p><p><strong>å¿«é€Ÿæ’åºçš„æœ¬è´¨</strong></p><p><strong>é€æ¸å°†æ¯ä¸€ä¸ªå…ƒç´ éƒ½è½¬æ¢æˆè½´ç‚¹å…ƒç´ </strong></p><h2 id="å¿«é€Ÿæ’åº-â€“-è½´ç‚¹æ„é€ "><a href="#å¿«é€Ÿæ’åº-â€“-è½´ç‚¹æ„é€ " class="headerlink" title="å¿«é€Ÿæ’åº â€“ è½´ç‚¹æ„é€ "></a>å¿«é€Ÿæ’åº â€“ è½´ç‚¹æ„é€ </h2><p><img src="/2020/07/14/å¿«é€Ÿæ’åº/2.png" alt></p><h2 id="å¿«é€Ÿæ’åº-â€“-æ—¶é—´å¤æ‚åº¦"><a href="#å¿«é€Ÿæ’åº-â€“-æ—¶é—´å¤æ‚åº¦" class="headerlink" title="å¿«é€Ÿæ’åº â€“ æ—¶é—´å¤æ‚åº¦"></a>å¿«é€Ÿæ’åº â€“ æ—¶é—´å¤æ‚åº¦</h2><ol><li><p>åœ¨è½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æ¯”è¾ƒå‡åŒ€çš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€å¥½çš„æƒ…å†µ</p><p>$T(n) = 2 âˆ— T(n/2) + O(n) = O(nlogn)$</p></li><li><p>å¦‚æœè½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æåº¦ä¸å‡åŒ€ï¼Œæœ€åæƒ…å†µ</p><p>$T(n) = T(n âˆ’ 1) + O(n) = O(n^2)$</p></li><li><p>ä¸ºäº†é™ä½æœ€åæƒ…å†µçš„å‡ºç°æ¦‚ç‡ï¼Œä¸€èˆ¬é‡‡å–çš„åšæ³•æ˜¯</p><p>éšæœºé€‰æ‹©è½´ç‚¹å…ƒç´ </p></li><li><p>æœ€å¥½ã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(nlogn)$</p><p>æœ€åæ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$</p><p>ç”±äºé€’å½’è°ƒç”¨çš„ç¼˜æ•…ï¼Œç©ºé—´å¤æ‚åº¦ï¼š$O(logn)$</p><p>å±äºä¸ç¨³å®šæ’åº</p></li></ol><p><img src="/2020/07/14/å¿«é€Ÿæ’åº/3.png" alt></p><h2 id="å¿«é€Ÿæ’åº-â€“-å®ç°"><a href="#å¿«é€Ÿæ’åº-â€“-å®ç°" class="headerlink" title="å¿«é€Ÿæ’åº â€“ å®ç°"></a>å¿«é€Ÿæ’åº â€“ å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    sort(<span class="number">0</span>, array.length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¹ [begin, end) èŒƒå›´çš„å…ƒç´ è¿›è¡Œå¿«é€Ÿæ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (end - begin &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¡®å®šè½´ç‚¹ä½ç½® O(n)</span></span><br><span class="line">    <span class="keyword">int</span> mid = pivotIndex(begin, end);</span><br><span class="line">    <span class="comment">// å¯¹å­åºåˆ—è¿›è¡Œå¿«é€Ÿæ’åº</span></span><br><span class="line">    sort(begin, mid); </span><br><span class="line">    sort(mid + <span class="number">1</span>, end); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ„é€ å‡º [begin, end) èŒƒå›´çš„è½´ç‚¹å…ƒç´ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è½´ç‚¹å…ƒç´ çš„æœ€ç»ˆä½ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">pivotIndex</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ è·Ÿbeginä½ç½®è¿›è¡Œäº¤æ¢</span></span><br><span class="line">    swap(begin, begin + (<span class="keyword">int</span>)(Math.random() * (end - begin)));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤‡ä»½beginä½ç½®çš„å…ƒç´ </span></span><br><span class="line">    T pivot = array[begin];</span><br><span class="line">    <span class="comment">// endæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    end--;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">        <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cmp(pivot, array[end]) &lt; <span class="number">0</span>) &#123; <span class="comment">// å³è¾¹å…ƒç´  &gt; è½´ç‚¹å…ƒç´ </span></span><br><span class="line">                end--;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// å³è¾¹å…ƒç´  &lt;= è½´ç‚¹å…ƒç´ </span></span><br><span class="line">                array[begin++] = array[end];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cmp(pivot, array[begin]) &gt; <span class="number">0</span>) &#123; <span class="comment">// å·¦è¾¹å…ƒç´  &lt; è½´ç‚¹å…ƒç´ </span></span><br><span class="line">                begin++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// å·¦è¾¹å…ƒç´  &gt;= è½´ç‚¹å…ƒç´ </span></span><br><span class="line">                array[end--] = array[begin];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†è½´ç‚¹å…ƒç´ æ”¾å…¥æœ€ç»ˆçš„ä½ç½®</span></span><br><span class="line">    array[begin] = pivot;</span><br><span class="line">    <span class="comment">// è¿”å›è½´ç‚¹å…ƒç´ çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">return</span> begin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¿«é€Ÿæ’åº-â€“-ä¸è½´ç‚¹ç›¸ç­‰çš„å…ƒç´ "><a href="#å¿«é€Ÿæ’åº-â€“-ä¸è½´ç‚¹ç›¸ç­‰çš„å…ƒç´ " class="headerlink" title="å¿«é€Ÿæ’åº â€“ ä¸è½´ç‚¹ç›¸ç­‰çš„å…ƒç´ "></a>å¿«é€Ÿæ’åº â€“ ä¸è½´ç‚¹ç›¸ç­‰çš„å…ƒç´ </h3><p><img src="/2020/07/14/å¿«é€Ÿæ’åº/4.png" alt></p><p>å¦‚æœåºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸è½´ç‚¹å…ƒç´ ç›¸ç­‰ï¼Œåˆ©ç”¨ç›®å‰çš„ç®—æ³•å®ç°ï¼Œè½´ç‚¹å…ƒç´ å¯ä»¥å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå‡åŒ€çš„å­åºåˆ—</p><p><strong>æ€è€ƒï¼šcmp ä½ç½®çš„åˆ¤æ–­åˆ†åˆ«æ”¹ä¸º â‰¤ã€â‰¥ ä¼šèµ·åˆ°ä»€ä¹ˆæ•ˆæœï¼Ÿ</strong></p><p><img src="/2020/07/14/å¿«é€Ÿæ’åº/4.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">    <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp(pivot, array[end]) &lt;= <span class="number">0</span>) &#123; <span class="comment">// å³è¾¹å…ƒç´  &gt; è½´ç‚¹å…ƒç´ </span></span><br><span class="line">            end--;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å³è¾¹å…ƒç´  &lt;= è½´ç‚¹å…ƒç´ </span></span><br><span class="line">            array[begin++] = array[end];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp(pivot, array[begin]) &gt;= <span class="number">0</span>) &#123; <span class="comment">// å·¦è¾¹å…ƒç´  &lt; è½´ç‚¹å…ƒç´ </span></span><br><span class="line">            begin++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å·¦è¾¹å…ƒç´  &gt;= è½´ç‚¹å…ƒç´ </span></span><br><span class="line">            array[end--] = array[begin];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è½´ç‚¹å…ƒç´ åˆ†å‰²å‡ºæ¥çš„å­åºåˆ—æåº¦ä¸å‡åŒ€</strong></p><p><strong>å¯¼è‡´å‡ºç°æœ€åæ—¶é—´å¤æ‚åº¦</strong> $O(n^2)$</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰&quot;&gt;&lt;a href=&quot;#å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å¿«é€Ÿæ’åºï¼ˆQuick    Sortï¼‰&quot;&gt;&lt;/a&gt;å¿«é€Ÿæ’åºï¼ˆQuick    Sortï¼‰&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å½’å¹¶æ’åº</title>
    <link href="http://yoursite.com/2020/07/14/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/14/å½’å¹¶æ’åº/</id>
    <published>2020-07-14T10:11:09.000Z</published>
    <updated>2020-07-14T10:52:34.760Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰"><a href="#å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰" class="headerlink" title="å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰"></a>å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯å½’å¹¶æ’åº"><a href="#ä»€ä¹ˆæ˜¯å½’å¹¶æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯å½’å¹¶æ’åº"></a>ä»€ä¹ˆæ˜¯å½’å¹¶æ’åº</h2><p>1945å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼ï¼ˆJohn von Neumannï¼‰é¦–æ¬¡æå‡º</p><p>æ‰§è¡Œæµç¨‹</p><p>â‘  ä¸æ–­åœ°å°†å½“å‰åºåˆ—å¹³å‡åˆ†å‰²æˆ2ä¸ªå­åºåˆ—</p><p>â€‹    ç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆåºåˆ—ä¸­åªå‰©1ä¸ªå…ƒç´ ï¼‰</p><p>â‘¡ ä¸æ–­åœ°å°†2ä¸ªå­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—</p><p>â€‹    ç›´åˆ°æœ€ç»ˆåªå‰©ä¸‹1ä¸ªæœ‰åºåºåˆ—</p><p><img src="/2020/07/14/å½’å¹¶æ’åº/1.png" alt></p><h2 id="å½’å¹¶æ’åº-â€“-divideå®ç°"><a href="#å½’å¹¶æ’åº-â€“-divideå®ç°" class="headerlink" title="å½’å¹¶æ’åº â€“ divideå®ç°"></a>å½’å¹¶æ’åº â€“ divideå®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡ä¸€æ®µä¸´æ—¶çš„æ•°ç»„ç©ºé—´ï¼Œåœ¨mergeæ“ä½œä¸­ä½¿ç”¨</span></span><br><span class="line">    leftArray = (T[]) <span class="keyword">new</span> Comparable[array.length &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    sort(<span class="number">0</span>, array.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (end - begin &lt; <span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> mid = (begin + end) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    sort(begin, mid);</span><br><span class="line">    sort(mid, end);</span><br><span class="line">    merge(begin, mid, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å½’å¹¶æ’åº-â€“-merge"><a href="#å½’å¹¶æ’åº-â€“-merge" class="headerlink" title="å½’å¹¶æ’åº â€“ merge"></a>å½’å¹¶æ’åº â€“ merge</h2><h3 id="å½’å¹¶æ’åº-â€“-mergeç»†èŠ‚"><a href="#å½’å¹¶æ’åº-â€“-mergeç»†èŠ‚" class="headerlink" title="å½’å¹¶æ’åº â€“ mergeç»†èŠ‚"></a>å½’å¹¶æ’åº â€“ mergeç»†èŠ‚</h3><p><img src="/2020/07/14/å½’å¹¶æ’åº/2.png" alt></p><p>éœ€è¦ merge çš„ 2 ç»„åºåˆ—å­˜åœ¨äºåŒä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¹¶ä¸”æ˜¯æŒ¨åœ¨ä¸€èµ·çš„</p><p><img src="/2020/07/14/å½’å¹¶æ’åº/3.png" alt></p><p>ä¸ºäº†æ›´å¥½åœ°å®Œæˆ merge æ“ä½œï¼Œæœ€å¥½å°†å…¶ä¸­ 1 ç»„åºåˆ—å¤‡ä»½å‡ºæ¥ï¼Œæ¯”å¦‚ $[begin, mid)$</p><p><img src="/2020/07/14/å½’å¹¶æ’åº/4.png" alt></p><p>$li == 0ï¼Œle == mid â€“ begin$</p><p>$ri == midï¼Œre == end$</p><h3 id="å½’å¹¶æ’åº-â€“-merge-â€“-å·¦è¾¹å…ˆç»“æŸ"><a href="#å½’å¹¶æ’åº-â€“-merge-â€“-å·¦è¾¹å…ˆç»“æŸ" class="headerlink" title="å½’å¹¶æ’åº â€“ merge â€“ å·¦è¾¹å…ˆç»“æŸ"></a>å½’å¹¶æ’åº â€“ merge â€“ å·¦è¾¹å…ˆç»“æŸ</h3><p><img src="/2020/07/14/å½’å¹¶æ’åº/5.png" alt></p><h3 id="å½’å¹¶æ’åº-â€“-merge-â€“-å³è¾¹å…ˆç»“æŸ"><a href="#å½’å¹¶æ’åº-â€“-merge-â€“-å³è¾¹å…ˆç»“æŸ" class="headerlink" title="å½’å¹¶æ’åº â€“ merge â€“ å³è¾¹å…ˆç»“æŸ"></a>å½’å¹¶æ’åº â€“ merge â€“ å³è¾¹å…ˆç»“æŸ</h3><p><img src="/2020/07/14/å½’å¹¶æ’åº/6.png" alt></p><h3 id="å½’å¹¶æ’åº-â€“-mergeå®ç°"><a href="#å½’å¹¶æ’åº-â€“-mergeå®ç°" class="headerlink" title="å½’å¹¶æ’åº â€“ mergeå®ç°"></a>å½’å¹¶æ’åº â€“ mergeå®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°† [begin, mid) å’Œ [mid, end) èŒƒå›´çš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> mid, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> li = <span class="number">0</span>, le = mid - begin;</span><br><span class="line">    <span class="keyword">int</span> ri = mid, re = end;</span><br><span class="line">    <span class="keyword">int</span> ai = begin;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤‡ä»½å·¦è¾¹æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = li; i &lt; le; i++) &#123;</span><br><span class="line">        leftArray[i] = array[begin + i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå·¦è¾¹è¿˜æ²¡æœ‰ç»“æŸ</span></span><br><span class="line">    <span class="keyword">while</span> (li &lt; le) &#123; </span><br><span class="line">        <span class="keyword">if</span> (ri &lt; re &amp;&amp; cmp(array[ri], leftArray[li]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            array[ai++] = array[ri++];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            array[ai++] = leftArray[li++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å½’å¹¶æ’åº-â€“-å¤æ‚åº¦åˆ†æ"><a href="#å½’å¹¶æ’åº-â€“-å¤æ‚åº¦åˆ†æ" class="headerlink" title="å½’å¹¶æ’åº â€“ å¤æ‚åº¦åˆ†æ"></a>å½’å¹¶æ’åº â€“ å¤æ‚åº¦åˆ†æ</h2><p>å½’å¹¶æ’åºèŠ±è´¹çš„æ—¶é—´</p><p>$T(n) = 2 âˆ— T (n/2) + O(n)$</p><p>$T(1) = O(1)$</p><p>$T(n) /n = T(n/2) / (n/2) + O(1)$</p><p>ä»¤ $S(n) = T(n) /n$</p><p>$S(1) = O(1)$</p><p>$S(n) = S(n/2) + O(1) = S(n/4)+ O(2) = S(n/8) + O(3) = S(n/2^k) + O(k) = S(1) + O(logn) = O(logn)$</p><p>$T(n) = n âˆ— S(n) = O(nlogn)$</p><p>ç”±äºå½’å¹¶æ’åºæ€»æ˜¯å¹³å‡åˆ†å‰²å­åºåˆ—ï¼Œæ‰€ä»¥æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(nlogn)$ ï¼Œå±äºç¨³å®šæ’åº</p><p>ä»ä»£ç ä¸­ä¸éš¾çœ‹å‡ºï¼šå½’å¹¶æ’åºçš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n/2 + logn) = O(n)$</p><p>$n/2$ ç”¨äºä¸´æ—¶å­˜æ”¾å·¦ä¾§æ•°ç»„ï¼Œ$logn$ æ˜¯å› ä¸ºé€’å½’è°ƒç”¨</p><h2 id="å¸¸è§çš„é€’æ¨å¼ä¸å¤æ‚åº¦"><a href="#å¸¸è§çš„é€’æ¨å¼ä¸å¤æ‚åº¦" class="headerlink" title="å¸¸è§çš„é€’æ¨å¼ä¸å¤æ‚åº¦"></a>å¸¸è§çš„é€’æ¨å¼ä¸å¤æ‚åº¦</h2><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>é€’æ¨å¼</strong></th><th style="text-align:center"><strong>å¤æ‚åº¦</strong></th></tr></thead><tbody><tr><td style="text-align:center">$T(n) = T(n/2) + O(1)$</td><td style="text-align:center">$O(logn)$</td></tr><tr><td style="text-align:center">$T(n) = T(n âˆ’ 1) + O(1)$</td><td style="text-align:center">$O(n)$</td></tr><tr><td style="text-align:center">$T(n) = T(n/2) + O(n)$</td><td style="text-align:center">$O(n)$</td></tr><tr><td style="text-align:center">$T(n) = 2 âˆ— T(n/2) + O(1)  $</td><td style="text-align:center">$O(n)$</td></tr><tr><td style="text-align:center">$T(n) = 2 âˆ— T(n/2) + O(n)$</td><td style="text-align:center">$O(nlogn)$</td></tr><tr><td style="text-align:center">$T(n) = T(n âˆ’ 1) + O(n)$</td><td style="text-align:center">$O(n^2)$</td></tr><tr><td style="text-align:center">$T(n) = 2 âˆ— T(n âˆ’ 1) + O(1)$</td><td style="text-align:center">$O(2^n)$</td></tr><tr><td style="text-align:center">$T(n) = 2 âˆ— T(n âˆ’ 1) + O(n)$</td><td style="text-align:center">$O(2^n)$</td></tr></tbody></table></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰&quot;&gt;&lt;a href=&quot;#å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰&quot;&gt;&lt;/a&gt;å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯å½’å¹¶æ’åº&quot;&gt;
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ’å…¥æ’åº</title>
    <link href="http://yoursite.com/2020/07/14/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/14/æ’å…¥æ’åº/</id>
    <published>2020-07-14T09:32:46.000Z</published>
    <updated>2020-07-14T10:06:40.220Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰"><a href="#æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰" class="headerlink" title="æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰"></a>æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯æ’å…¥æ’åº"><a href="#ä»€ä¹ˆæ˜¯æ’å…¥æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯æ’å…¥æ’åº"></a>ä»€ä¹ˆæ˜¯æ’å…¥æ’åº</h2><p>æ’å…¥æ’åºéå¸¸ç±»ä¼¼äºæ‰‘å…‹ç‰Œçš„æ’åº</p><p>æ‰§è¡Œæµç¨‹</p><p>â‘  åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ’å…¥æ’åºä¼šå°†åºåˆ—åˆ†ä¸º2éƒ¨åˆ†</p><p>â€‹    å¤´éƒ¨æ˜¯å·²ç»æ’å¥½åºçš„ï¼Œå°¾éƒ¨æ˜¯å¾…æ’åºçš„</p><p>â‘¡ ä»å¤´å¼€å§‹æ‰«ææ¯ä¸€ä¸ªå…ƒç´ </p><p>â€‹    æ¯å½“æ‰«æåˆ°ä¸€ä¸ªå…ƒç´ ï¼Œå°±å°†å®ƒæ’å…¥åˆ°å¤´éƒ¨åˆé€‚çš„ä½ç½®ï¼Œä½¿å¾—å¤´éƒ¨æ•°æ®ä¾ç„¶ä¿æŒæœ‰åº</p><p><img src="/2020/07/14/æ’å…¥æ’åº/1.png" alt></p><h2 id="æ’å…¥æ’åº-å®ç°-æ— ä¼˜åŒ–"><a href="#æ’å…¥æ’åº-å®ç°-æ— ä¼˜åŒ–" class="headerlink" title="æ’å…¥æ’åº - å®ç°(æ— ä¼˜åŒ–)"></a>æ’å…¥æ’åº - å®ç°(æ— ä¼˜åŒ–)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">1</span>; begin &lt; array.length; begin++) &#123;</span><br><span class="line">    <span class="keyword">int</span> cur = begin;</span><br><span class="line">    <span class="keyword">while</span> (cur &gt; <span class="number">0</span> &amp;&amp; cmp(cur, cur - <span class="number">1</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        swap(cur, cur - <span class="number">1</span>);</span><br><span class="line">        cur--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥æ’åº-â€“-é€†åºå¯¹ï¼ˆInversionï¼‰"><a href="#æ’å…¥æ’åº-â€“-é€†åºå¯¹ï¼ˆInversionï¼‰" class="headerlink" title="æ’å…¥æ’åº â€“ é€†åºå¯¹ï¼ˆInversionï¼‰"></a>æ’å…¥æ’åº â€“ é€†åºå¯¹ï¼ˆInversionï¼‰</h2><ul><li><p><strong>ä»€ä¹ˆæ˜¯é€†åºå¯¹ï¼Ÿ</strong></p><p>æ•°ç»„ <2,3,8,6,1> çš„é€†åºå¯¹ä¸ºï¼š<2,1> <3,1> <8,1> <8,6> <6,1>ï¼Œå…±5ä¸ªé€†åºå¯¹</6,1></8,6></8,1></3,1></2,1></2,3,8,6,1></p><p>æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸é€†åºå¯¹çš„æ•°é‡æˆæ­£æ¯”å…³ç³»</p><p>é€†åºå¯¹çš„æ•°é‡è¶Šå¤šï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦è¶Šé«˜</p></li><li><p>æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$</p><p>æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p><p>ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$</p><p>å±äºç¨³å®šæ’åº</p></li><li><p>å½“é€†åºå¯¹çš„æ•°é‡æå°‘æ—¶ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ç‰¹åˆ«é«˜</p><p>ç”šè‡³é€Ÿåº¦æ¯” $O(nlogn)$çº§åˆ«çš„å¿«é€Ÿæ’åºè¿˜è¦å¿«</p><p>æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ä¹Ÿæ˜¯éå¸¸å¥½çš„</p></li></ul><p><img src="/2020/07/14/æ’å…¥æ’åº/2.png" alt></p><h2 id="æ’å…¥æ’åº-â€“-ä¼˜åŒ–"><a href="#æ’å…¥æ’åº-â€“-ä¼˜åŒ–" class="headerlink" title="æ’å…¥æ’åº â€“ ä¼˜åŒ–"></a>æ’å…¥æ’åº â€“ ä¼˜åŒ–</h2><p>æ€è·¯æ˜¯å°†ã€äº¤æ¢ã€‘è½¬ä¸ºã€æŒªåŠ¨ã€‘</p><p>â‘  å…ˆå°†å¾…æ’å…¥çš„å…ƒç´ å¤‡ä»½</p><p>â‘¡ å¤´éƒ¨æœ‰åºæ•°æ®ä¸­æ¯”å¾…æ’å…¥å…ƒç´ å¤§çš„ï¼Œéƒ½æœå°¾éƒ¨æ–¹å‘æŒªåŠ¨1ä¸ªä½ç½®</p><p>â‘¢ å°†å¾…æ’å…¥å…ƒç´ æ”¾åˆ°æœ€ç»ˆçš„åˆé€‚ä½ç½®</p><p><img src="/2020/07/14/æ’å…¥æ’åº/3.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">1</span>; begin &lt; array.length; begin++) &#123;</span><br><span class="line">    <span class="keyword">int</span> cur = begin;</span><br><span class="line">    T v = array[cur];</span><br><span class="line">    <span class="keyword">while</span> (cur &gt; <span class="number">0</span> &amp;&amp; cmp(v, array[cur - <span class="number">1</span>]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        array[cur] = array[cur - <span class="number">1</span>];</span><br><span class="line">        cur--;</span><br><span class="line">    &#125;</span><br><span class="line">    array[cur] = v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–"><a href="#æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–" class="headerlink" title="æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ–"></a>æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ–</h2><h3 id="äºŒåˆ†æœç´¢ï¼ˆBinary-Searchï¼‰"><a href="#äºŒåˆ†æœç´¢ï¼ˆBinary-Searchï¼‰" class="headerlink" title="äºŒåˆ†æœç´¢ï¼ˆBinary Searchï¼‰"></a>äºŒåˆ†æœç´¢ï¼ˆBinary Searchï¼‰</h3><p>å¦‚ä½•ç¡®å®šä¸€ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Ÿï¼ˆå‡è®¾æ•°ç»„é‡Œé¢å…¨éƒ½æ˜¯æ•´æ•°ï¼‰</p><p>å¦‚æœæ˜¯æ— åºæ•°ç»„ï¼Œä»ç¬¬ 0 ä¸ªä½ç½®å¼€å§‹éå†æœç´¢ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p><div class="table-container"><table><thead><tr><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th><th style="text-align:center">7</th><th style="text-align:center">8</th><th style="text-align:center">9</th></tr></thead><tbody><tr><td style="text-align:center">31</td><td style="text-align:center">66</td><td style="text-align:center">17</td><td style="text-align:center">15</td><td style="text-align:center">28</td><td style="text-align:center">20</td><td style="text-align:center">59</td><td style="text-align:center">88</td><td style="text-align:center">45</td><td style="text-align:center">56</td></tr></tbody></table></div><p>å¦‚æœæ˜¯æœ‰åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æœç´¢ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ï¼š$O(logn)$</p><div class="table-container"><table><thead><tr><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th><th style="text-align:center">7</th><th style="text-align:center">8</th><th style="text-align:center">9</th></tr></thead><tbody><tr><td style="text-align:center">15</td><td style="text-align:center">17</td><td style="text-align:center">20</td><td style="text-align:center">28</td><td style="text-align:center">31</td><td style="text-align:center">45</td><td style="text-align:center">56</td><td style="text-align:center">59</td><td style="text-align:center">66</td><td style="text-align:center">88</td></tr></tbody></table></div><h3 id="äºŒåˆ†æœç´¢-â€“-æ€è·¯"><a href="#äºŒåˆ†æœç´¢-â€“-æ€è·¯" class="headerlink" title="äºŒåˆ†æœç´¢ â€“ æ€è·¯"></a>äºŒåˆ†æœç´¢ â€“ æ€è·¯</h3><p>å‡è®¾åœ¨ $[begin, end)$ èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´  vï¼Œ$mid == (begin + end) /2$</p><p>å¦‚æœ $v &lt; m$ï¼Œå» $[begin, mid)$ èŒƒå›´å†…äºŒåˆ†æœç´¢</p><p>å¦‚æœ $v &gt; m$ï¼Œå» $[mid + 1, end)$ èŒƒå›´å†…äºŒåˆ†æœç´¢</p><p>å¦‚æœ $v == m$ï¼Œç›´æ¥è¿”å› mid</p><p><img src="/2020/07/14/æ’å…¥æ’åº/4.png" alt></p><h3 id="äºŒåˆ†æœç´¢-â€“-å®ä¾‹"><a href="#äºŒåˆ†æœç´¢-â€“-å®ä¾‹" class="headerlink" title="äºŒåˆ†æœç´¢ â€“ å®ä¾‹"></a>äºŒåˆ†æœç´¢ â€“ å®ä¾‹</h3><p><img src="/2020/07/14/æ’å…¥æ’åº/5.png" alt></p><h3 id="äºŒåˆ†æœç´¢-â€“-å®ç°"><a href="#äºŒåˆ†æœç´¢-â€“-å®ç°" class="headerlink" title="äºŒåˆ†æœç´¢ â€“ å®ç°"></a>äºŒåˆ†æœç´¢ â€“ å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (array == <span class="keyword">null</span> || array.length == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> begin = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> end = array.length;</span><br><span class="line">    <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (begin + end) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (v &lt; array[mid]) &#123;</span><br><span class="line">            end = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            begin = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> begin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-1"><a href="#æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-1" class="headerlink" title="æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ–"></a>æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ–</h3><p>åœ¨å…ƒç´  v çš„æ’å…¥è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å…ˆäºŒåˆ†æœç´¢å‡ºåˆé€‚çš„æ’å…¥ä½ç½®ï¼Œç„¶åå†å°†å…ƒç´  v æ’å…¥</p><p><img src="/2020/07/14/æ’å…¥æ’åº/6.png" alt></p><p>è¦æ±‚äºŒåˆ†æœç´¢è¿”å›çš„æ’å…¥ä½ç½®ï¼šç¬¬1ä¸ªå¤§äº v çš„å…ƒç´ ä½ç½®</p><ul><li><p>å¦‚æœ v æ˜¯ 5ï¼Œè¿”å› 2</p></li><li><p>å¦‚æœ v æ˜¯ 1ï¼Œè¿”å› 0</p></li><li><p>å¦‚æœ v æ˜¯ 15ï¼Œè¿”å› 7</p></li><li><p>å¦‚æœ v æ˜¯ 8ï¼Œè¿”å› 5</p></li></ul><h3 id="æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-â€“-æ€è·¯"><a href="#æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-â€“-æ€è·¯" class="headerlink" title="æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ æ€è·¯"></a>æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ æ€è·¯</h3><p>å‡è®¾åœ¨ $[begin, end)$ èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´  $v$ï¼Œ$mid == (begin + end) /2$</p><p>å¦‚æœ $v &lt; m$ï¼Œå» $[begin, mid)$ èŒƒå›´å†…äºŒåˆ†æœç´¢</p><p>å¦‚æœ $v â‰¥ m$ï¼Œå» $[mid + 1, end)$ èŒƒå›´å†…äºŒåˆ†æœç´¢</p><p><img src="/2020/07/14/æ’å…¥æ’åº/7.png" alt></p><h3 id="æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-â€“-å®ä¾‹"><a href="#æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-â€“-å®ä¾‹" class="headerlink" title="æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ å®ä¾‹"></a>æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ å®ä¾‹</h3><p><img src="/2020/07/14/æ’å…¥æ’åº/8.png" alt></p><p><img src="/2020/07/14/æ’å…¥æ’åº/9.png" alt></p><h3 id="æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-â€“-å®ç°"><a href="#æ’å…¥æ’åº-â€“-äºŒåˆ†æœç´¢ä¼˜åŒ–-â€“-å®ç°" class="headerlink" title="æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ å®ç°"></a>æ’å…¥æ’åº â€“ äºŒåˆ†æœç´¢ä¼˜åŒ– â€“ å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">1</span>; begin &lt; array.length; begin++) &#123;</span><br><span class="line">    insert(begin, search(begin));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†sourceä½ç½®çš„å…ƒç´ æ’å…¥åˆ°destä½ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> source, <span class="keyword">int</span> dest)</span> </span>&#123;</span><br><span class="line">    T v = array[source];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = source; i &gt; dest; i--) &#123;</span><br><span class="line">        array[i] = array[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    array[dest] = v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨äºŒåˆ†æœç´¢æ‰¾åˆ° index ä½ç½®å…ƒç´ çš„å¾…æ’å…¥ä½ç½®</span></span><br><span class="line"><span class="comment">// å·²ç»æ’å¥½åºæ•°ç»„çš„åŒºé—´èŒƒå›´æ˜¯ [0, index)</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> begin = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> end = index;</span><br><span class="line">    <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (begin + end) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (cmp(array[index], array[mid]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            end = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            begin = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> begin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨äº†äºŒåˆ†æœç´¢åï¼Œåªæ˜¯å‡å°‘äº†æ¯”è¾ƒæ¬¡æ•°ï¼Œä½†æ’å…¥æ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¾ç„¶æ˜¯ $O(n^2)$</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰&quot;&gt;&lt;a href=&quot;#æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰&quot;&gt;&lt;/a&gt;æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰&lt;/h1&gt;&lt;
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å †æ’åº</title>
    <link href="http://yoursite.com/2020/07/14/%E5%A0%86%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/14/å †æ’åº/</id>
    <published>2020-07-14T09:32:36.000Z</published>
    <updated>2020-07-14T09:39:41.832Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å †æ’åºï¼ˆHeap-Sortï¼‰"><a href="#å †æ’åºï¼ˆHeap-Sortï¼‰" class="headerlink" title="å †æ’åºï¼ˆHeap Sortï¼‰"></a>å †æ’åºï¼ˆHeap Sortï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯å †æ’åº"><a href="#ä»€ä¹ˆæ˜¯å †æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯å †æ’åº"></a>ä»€ä¹ˆæ˜¯å †æ’åº</h2><p><strong>å †æ’åºå¯ä»¥è®¤ä¸ºæ˜¯å¯¹é€‰æ‹©æ’åºçš„ä¸€ç§ä¼˜åŒ–</strong></p><p><strong><a href="/2020/07/14/é€‰æ‹©æ’åº/" title="é€‰æ‹©æ’åºçš„å®ç°">é€‰æ‹©æ’åºçš„å®ç°</a></strong>  / <strong><a href="/2020/07/14/äºŒå‰å †/" title="äºŒå‰å †çš„å®ç°">äºŒå‰å †çš„å®ç°</a></strong></p><p>æ‰§è¡Œæµç¨‹</p><p>â‘  å¯¹åºåˆ—è¿›è¡ŒåŸåœ°å»ºå †ï¼ˆheapifyï¼‰</p><p>â‘¡ é‡å¤æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œç›´åˆ°å †çš„å…ƒç´ æ•°é‡ä¸º 1</p><p>â€‹    äº¤æ¢å †é¡¶å…ƒç´ ä¸å°¾å…ƒç´ </p><p>â€‹    å †çš„å…ƒç´ æ•°é‡å‡ 1</p><p>â€‹    å¯¹ 0 ä½ç½®è¿›è¡Œ 1 æ¬¡ siftDown æ“ä½œ</p><p><img src="/2020/07/14/å †æ’åº/1.png" alt></p><h2 id="å †æ’åº-å®ç°"><a href="#å †æ’åº-å®ç°" class="headerlink" title="å †æ’åº - å®ç°"></a>å †æ’åº - å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸåœ°å»ºå †</span></span><br><span class="line">heapSize = array.length;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = (heapSize &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    siftDown(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (heapSize &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// äº¤æ¢å †é¡¶å…ƒç´ å’Œå°¾éƒ¨å…ƒç´ </span></span><br><span class="line">    swap(<span class="number">0</span>, --heapSize);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹0ä½ç½®è¿›è¡ŒsiftDownï¼ˆæ¢å¤å †çš„æ€§è´¨ï¼‰</span></span><br><span class="line">    siftDown(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftDown</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    T element = array[index];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> half = heapSize &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (index &lt; half) &#123; <span class="comment">// indexå¿…é¡»æ˜¯éå¶å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// é»˜è®¤æ˜¯å·¦è¾¹è·Ÿçˆ¶èŠ‚ç‚¹æ¯”</span></span><br><span class="line">        <span class="keyword">int</span> childIndex = (index &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">        T child = array[childIndex];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> rightIndex = childIndex + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å³å­èŠ‚ç‚¹æ¯”å·¦å­èŠ‚ç‚¹å¤§</span></span><br><span class="line">        <span class="keyword">if</span> (rightIndex &lt; heapSize &amp;&amp; </span><br><span class="line">            cmp(array[rightIndex], child) &gt; <span class="number">0</span>) &#123; </span><br><span class="line">            child = array[childIndex = rightIndex];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤§äºç­‰äºå­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (cmp(element, child) &gt;= <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        array[index] = child;</span><br><span class="line">        index = childIndex;</span><br><span class="line">    &#125;</span><br><span class="line">    array[index] = element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå±äºä¸ç¨³å®šæ’åº</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å †æ’åºï¼ˆHeap-Sortï¼‰&quot;&gt;&lt;a href=&quot;#å †æ’åºï¼ˆHeap-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å †æ’åºï¼ˆHeap Sortï¼‰&quot;&gt;&lt;/a&gt;å †æ’åºï¼ˆHeap Sortï¼‰&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯å †æ’åº&quot;&gt;&lt;a href=&quot;
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>é€‰æ‹©æ’åº</title>
    <link href="http://yoursite.com/2020/07/14/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/14/é€‰æ‹©æ’åº/</id>
    <published>2020-07-14T09:30:04.000Z</published>
    <updated>2020-07-14T10:07:57.044Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰"><a href="#é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰" class="headerlink" title="é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰"></a>é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h1><p>æ‰§è¡Œæµç¨‹</p><p>â‘  ä»åºåˆ—ä¸­æ‰¾å‡ºæœ€å¤§çš„é‚£ä¸ªå…ƒç´ ï¼Œç„¶åä¸æœ€æœ«å°¾çš„å…ƒç´ äº¤æ¢ä½ç½®</p><p>â€‹    æ‰§è¡Œå®Œä¸€è½®åï¼Œæœ€æœ«å°¾çš„é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ </p><p>â‘¡ å¿½ç•¥ â‘  ä¸­æ›¾ç»æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œæ­¥éª¤ â‘ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> end = array.length - <span class="number">1</span>; end &gt; <span class="number">0</span>; end--) &#123;</span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">1</span>; begin &lt;= end; begin++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp(max, begin) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            max = begin;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(max, end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€‰æ‹©æ’åºçš„äº¤æ¢æ¬¡æ•°è¦è¿œè¿œå°‘äºå†’æ³¡æ’åºï¼Œå¹³å‡æ€§èƒ½ä¼˜äºå†’æ³¡æ’åº</p><p>æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$ï¼Œç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œå±äºä¸ç¨³å®šæ’åº</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰&quot;&gt;&lt;a href=&quot;#é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰&quot;&gt;&lt;/a&gt;é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰&lt;/h1&gt;&lt;
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>å†’æ³¡æ’åº</title>
    <link href="http://yoursite.com/2020/07/14/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/"/>
    <id>http://yoursite.com/2020/07/14/å†’æ³¡æ’åº/</id>
    <published>2020-07-14T09:16:27.000Z</published>
    <updated>2020-07-14T10:09:09.261Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h1><h2 id="å†’æ³¡æ’åºï¼ˆæ— ä¼˜åŒ–å®ç°ï¼‰"><a href="#å†’æ³¡æ’åºï¼ˆæ— ä¼˜åŒ–å®ç°ï¼‰" class="headerlink" title="å†’æ³¡æ’åºï¼ˆæ— ä¼˜åŒ–å®ç°ï¼‰"></a>å†’æ³¡æ’åºï¼ˆæ— ä¼˜åŒ–å®ç°ï¼‰</h2><p>å†’æ³¡æ’åºä¹Ÿå«åšèµ·æ³¡æ’åº</p><p>æ‰§è¡Œæµç¨‹ï¼ˆç»Ÿä¸€ä»¥å‡åºä¸ºä¾‹å­ï¼‰</p><p>â‘  ä»å¤´å¼€å§‹æ¯”è¾ƒæ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ï¼Œå¦‚æœç¬¬1ä¸ªæ¯”ç¬¬2ä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬çš„ä½ç½®</p><p>â€‹    æ‰§è¡Œå®Œä¸€è½®åï¼Œæœ€æœ«å°¾é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ </p><p>â‘¡ å¿½ç•¥ â‘  ä¸­æ›¾ç»æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œæ­¥éª¤ â‘ ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ æœ‰åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> end = array.length - <span class="number">1</span>; end &gt; <span class="number">0</span>; end--) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">1</span>; begin &lt;= end; begin++) &#123;</span><br><span class="line">        <span class="comment">// æ¯”å¤§å°</span></span><br><span class="line">        <span class="keyword">if</span> (cmp(begin, begin - <span class="number">1</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// äº¤æ¢</span></span><br><span class="line">            swap(begin, begin - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å†’æ³¡æ’åº-â€“-ä¼˜åŒ–â‘ "><a href="#å†’æ³¡æ’åº-â€“-ä¼˜åŒ–â‘ " class="headerlink" title="å†’æ³¡æ’åº â€“ ä¼˜åŒ–â‘ "></a>å†’æ³¡æ’åº â€“ ä¼˜åŒ–â‘ </h2><p>å¦‚æœåºåˆ—å·²ç»å®Œå…¨æœ‰åºï¼Œå¯ä»¥æå‰ç»ˆæ­¢å†’æ³¡æ’åº</p><p><img src="/2020/07/14/å†’æ³¡æ’åº/1.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> end = array.length - <span class="number">1</span>; end &gt; <span class="number">0</span>; end--) &#123;</span><br><span class="line">    <span class="keyword">boolean</span> sorted = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">1</span>; begin &lt;= end; begin++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp(begin, begin - <span class="number">1</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            swap(begin, begin - <span class="number">1</span>);</span><br><span class="line">            sorted = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (sorted) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å†’æ³¡æ’åº-â€“-ä¼˜åŒ–â‘¡"><a href="#å†’æ³¡æ’åº-â€“-ä¼˜åŒ–â‘¡" class="headerlink" title="å†’æ³¡æ’åº â€“ ä¼˜åŒ–â‘¡"></a>å†’æ³¡æ’åº â€“ ä¼˜åŒ–â‘¡</h2><p>å¦‚æœåºåˆ—å°¾éƒ¨å·²ç»å±€éƒ¨æœ‰åºï¼Œå¯ä»¥è®°å½•æœ€å1æ¬¡äº¤æ¢çš„ä½ç½®ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°</p><p><img src="/2020/07/14/å†’æ³¡æ’åº/2.png" alt></p><p><strong>æœ€å1æ¬¡äº¤æ¢çš„ä½ç½®æ˜¯ 6</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> end = array.length - <span class="number">1</span>; end &gt; <span class="number">0</span>; end--) &#123;</span><br><span class="line">    <span class="keyword">int</span> sortedIndex = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> begin = <span class="number">1</span>; begin &lt;= end; begin++) &#123;</span><br><span class="line">        <span class="comment">// if (array[begin] &lt; array[begin - 1]) &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (cmp(begin, begin - <span class="number">1</span>) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            swap(begin, begin - <span class="number">1</span>);</span><br><span class="line">            sortedIndex = begin;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    end = sortedIndex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$</strong></p><p><strong>æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼š</strong>$O(n)$</p><p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>$O(1)$</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰&quot;&gt;&lt;a href=&quot;#å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰&quot;&gt;&lt;/a&gt;å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰&lt;/h1&gt;&lt;h2 id=&quot;å†’æ³¡æ’åºï¼ˆ
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>10å¤§æ’åºç®—æ³•</title>
    <link href="http://yoursite.com/2020/07/14/10%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>http://yoursite.com/2020/07/14/10å¤§æ’åºç®—æ³•/</id>
    <published>2020-07-14T09:10:41.000Z</published>
    <updated>2020-07-14T09:29:11.512Z</updated>
    
    <content type="html"><![CDATA[<h1 id="10å¤§æ’åºç®—æ³•"><a href="#10å¤§æ’åºç®—æ³•" class="headerlink" title="10å¤§æ’åºç®—æ³•"></a>10å¤§æ’åºç®—æ³•</h1><p>ä»¥ä¸‹è¡¨æ ¼æ˜¯åŸºäºæ•°ç»„è¿›è¡Œæ’åºçš„ä¸€èˆ¬æ€§ç»“è®º</p><p>å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å½’å¹¶ã€å¿«é€Ÿã€å¸Œå°”ã€å †æ’åºï¼Œå±äºæ¯”è¾ƒæ’åºï¼ˆComparison Sortingï¼‰</p><p><img src="/2020/07/14/10å¤§æ’åºç®—æ³•/1.png" alt></p><h2 id="æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼ˆStabilityï¼‰"><a href="#æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼ˆStabilityï¼‰" class="headerlink" title="æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼ˆStabilityï¼‰"></a>æ’åºç®—æ³•çš„ç¨³å®šæ€§ï¼ˆStabilityï¼‰</h2><p>å¦‚æœç›¸ç­‰çš„2ä¸ªå…ƒç´ ï¼Œåœ¨æ’åºå‰åçš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ï¼Œé‚£ä¹ˆè¿™æ˜¯ç¨³å®šçš„æ’åºç®—æ³•</p><p>æ’åºå‰ï¼š5, 1, 3ğ‘, 4, 7, 3ğ‘</p><p>ç¨³å®šçš„æ’åºï¼š 1, 3ğ‘, 3ğ‘, 4, 5, 7</p><p>ä¸ç¨³å®šçš„æ’åºï¼š1, 3ğ‘, 3ğ‘, 4,  5, 7</p><h2 id="åŸåœ°ç®—æ³•ï¼ˆIn-place-Algorithmï¼‰"><a href="#åŸåœ°ç®—æ³•ï¼ˆIn-place-Algorithmï¼‰" class="headerlink" title="åŸåœ°ç®—æ³•ï¼ˆIn-place Algorithmï¼‰"></a>åŸåœ°ç®—æ³•ï¼ˆIn-place Algorithmï¼‰</h2><p>ä¸ä¾èµ–é¢å¤–çš„èµ„æºæˆ–è€…ä¾èµ–å°‘æ•°çš„é¢å¤–èµ„æºï¼Œä»…ä¾é è¾“å‡ºæ¥è¦†ç›–è¾“å…¥</p><p>ç©ºé—´å¤æ‚åº¦ä¸ºğ‘‚(1) çš„éƒ½å¯ä»¥è®¤ä¸ºæ˜¯åŸåœ°ç®—æ³•</p><p>éåŸåœ°ç®—æ³•ï¼Œç§°ä¸º Not-in-place æˆ–è€… Out-of-place</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;10å¤§æ’åºç®—æ³•&quot;&gt;&lt;a href=&quot;#10å¤§æ’åºç®—æ³•&quot; class=&quot;headerlink&quot; title=&quot;10å¤§æ’åºç®—æ³•&quot;&gt;&lt;/a&gt;10å¤§æ’åºç®—æ³•&lt;/h1&gt;&lt;p&gt;ä»¥ä¸‹è¡¨æ ¼æ˜¯åŸºäºæ•°ç»„è¿›è¡Œæ’åºçš„ä¸€èˆ¬æ€§ç»“è®º&lt;/p&gt;
&lt;p&gt;å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å½’å¹¶ã€å¿«é€Ÿã€å¸Œå°”ã€å †æ’åºï¼Œå±
      
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/categories/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
      <category term="ç®—æ³•" scheme="http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ’åº" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>Trie</title>
    <link href="http://yoursite.com/2020/07/14/Trie/"/>
    <id>http://yoursite.com/2020/07/14/Trie/</id>
    <published>2020-07-14T07:22:50.000Z</published>
    <updated>2020-07-14T08:42:37.975Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Trie"><a href="#Trie" class="headerlink" title="Trie"></a>Trie</h1><p>Trie ä¹Ÿå«åšå­—å…¸æ ‘ã€å‰ç¼€æ ‘ï¼ˆPrefix Treeï¼‰ã€å•è¯æŸ¥æ‰¾æ ‘</p><p>Trie æœç´¢å­—ç¬¦ä¸²çš„æ•ˆç‡ä¸»è¦è·Ÿå­—ç¬¦ä¸²çš„é•¿åº¦æœ‰å…³</p><p>å‡è®¾ä½¿ç”¨ Trie å­˜å‚¨ catã€dogã€doggyã€doesã€castã€add å…­ä¸ªå•è¯</p><p><img src="/2020/07/14/Trie/1.png" alt></p><h2 id="Trieä»£ç å®ç°"><a href="#Trieä»£ç å®ç°" class="headerlink" title="Trieä»£ç å®ç°"></a>Trieä»£ç å®ç°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Trie</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"><span class="keyword">private</span> Node&lt;V&gt; root;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">size = <span class="number">0</span>;</span><br><span class="line">root = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">Node&lt;V&gt; node = node(key);</span><br><span class="line"><span class="keyword">return</span> node != <span class="keyword">null</span> &amp;&amp; node.word ? node.value : <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">Node&lt;V&gt; node = node(key);</span><br><span class="line"><span class="keyword">return</span> node != <span class="keyword">null</span> &amp;&amp; node.word;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">add</span><span class="params">(String key, V value)</span> </span>&#123;</span><br><span class="line">keyCheck(key);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">root = <span class="keyword">new</span> Node&lt;&gt;(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node&lt;V&gt; node = root;</span><br><span class="line"><span class="keyword">int</span> len = key.length();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line"><span class="keyword">char</span> c = key.charAt(i); </span><br><span class="line"><span class="keyword">boolean</span> emptyChildren = node.children == <span class="keyword">null</span>;</span><br><span class="line">Node&lt;V&gt; childNode = emptyChildren ? <span class="keyword">null</span> : node.children.get(c);</span><br><span class="line"><span class="keyword">if</span> (childNode == <span class="keyword">null</span>) &#123;</span><br><span class="line">childNode = <span class="keyword">new</span> Node&lt;&gt;(node);</span><br><span class="line">childNode.character = c;</span><br><span class="line">node.children = emptyChildren ? <span class="keyword">new</span> HashMap&lt;&gt;() : node.children;</span><br><span class="line">node.children.put(c, childNode);</span><br><span class="line">&#125;</span><br><span class="line">node = childNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (node.word) &#123; <span class="comment">// å·²ç»å­˜åœ¨è¿™ä¸ªå•è¯</span></span><br><span class="line">V oldValue = node.value;</span><br><span class="line">node.value = value;</span><br><span class="line"><span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å¢ä¸€ä¸ªå•è¯</span></span><br><span class="line">node.word = <span class="keyword">true</span>;</span><br><span class="line">node.value = value;</span><br><span class="line">size++;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line"><span class="comment">// æ‰¾åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">Node&lt;V&gt; node = node(key);</span><br><span class="line"><span class="comment">// å¦‚æœä¸æ˜¯å•è¯ç»“å°¾ï¼Œä¸ç”¨ä½œä»»ä½•å¤„ç†</span></span><br><span class="line"><span class="keyword">if</span> (node == <span class="keyword">null</span> || !node.word) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">size--;</span><br><span class="line">V oldValue = node.value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¿˜æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (node.children != <span class="keyword">null</span> &amp;&amp; !node.children.isEmpty()) &#123;</span><br><span class="line">node.word = <span class="keyword">false</span>;</span><br><span class="line">node.value = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;V&gt; parent = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">while</span> ((parent = node.parent) != <span class="keyword">null</span>) &#123;</span><br><span class="line">parent.children.remove(node.character);</span><br><span class="line"><span class="keyword">if</span> (parent.word || !parent.children.isEmpty()) <span class="keyword">break</span>;</span><br><span class="line">node = parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">startsWith</span><span class="params">(String prefix)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> node(prefix) != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;V&gt; <span class="title">node</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">keyCheck(key);</span><br><span class="line"></span><br><span class="line">Node&lt;V&gt; node = root;</span><br><span class="line"><span class="keyword">int</span> len = key.length();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (node == <span class="keyword">null</span> || node.children == <span class="keyword">null</span> || node.children.isEmpty()) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">char</span> c = key.charAt(i); </span><br><span class="line">node = node.children.get(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">keyCheck</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (key == <span class="keyword">null</span> || key.length() == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"key must not be empty"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">Node&lt;V&gt; parent;</span><br><span class="line">HashMap&lt;Character, Node&lt;V&gt;&gt; children;</span><br><span class="line">Character character;</span><br><span class="line">V value;</span><br><span class="line"><span class="keyword">boolean</span> word; <span class="comment">// æ˜¯å¦ä¸ºå•è¯çš„ç»“å°¾ï¼ˆæ˜¯å¦ä¸ºä¸€ä¸ªå®Œæ•´çš„å•è¯ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Node&lt;V&gt; parent)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.parent = parent;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>Trie çš„ä¼˜ç‚¹ï¼šæœç´¢å‰ç¼€çš„æ•ˆç‡ä¸»è¦è·Ÿå‰ç¼€çš„é•¿åº¦æœ‰å…³</strong></p><p><strong>Trie çš„ç¼ºç‚¹ï¼šéœ€è¦è€—è´¹å¤§é‡çš„å†…å­˜ï¼Œå› æ­¤è¿˜æœ‰å¾…æ”¹è¿›</strong></p><p>æ›´å¤šTrie ç›¸å…³çš„æ•°æ®ç»“æ„å’Œç®—æ³•</p><p>Double-array Trieã€Suffix Treeã€Patricia Treeã€Crit-bit Treeã€ACè‡ªåŠ¨æœº</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Trie&quot;&gt;&lt;a href=&quot;#Trie&quot; class=&quot;headerlink&quot; title=&quot;Trie&quot;&gt;&lt;/a&gt;Trie&lt;/h1&gt;&lt;p&gt;Trie ä¹Ÿå«åšå­—å…¸æ ‘ã€å‰ç¼€æ ‘ï¼ˆPrefix Treeï¼‰ã€å•è¯æŸ¥æ‰¾æ ‘&lt;/p&gt;
&lt;p&gt;Trie æœç´¢å­—ç¬¦ä¸²çš„æ•ˆç‡ä¸»è¦è·Ÿå­—ç¬¦ä¸²çš„
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ ‘" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ ‘" scheme="http://yoursite.com/tags/%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>å“ˆå¤«æ›¼æ ‘</title>
    <link href="http://yoursite.com/2020/07/14/%E5%93%88%E5%A4%AB%E6%9B%BC%E6%A0%91/"/>
    <id>http://yoursite.com/2020/07/14/å“ˆå¤«æ›¼æ ‘/</id>
    <published>2020-07-14T07:13:27.000Z</published>
    <updated>2020-07-14T08:43:25.668Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman-Codingï¼‰"><a href="#å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman-Codingï¼‰" class="headerlink" title="å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman Codingï¼‰"></a>å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman Codingï¼‰</h1><p>å“ˆå¤«æ›¼ç¼–ç ï¼Œåˆç§°ä¸ºéœå¤«æ›¼ç¼–ç ï¼Œå®ƒæ˜¯ç°ä»£å‹ç¼©ç®—æ³•çš„åŸºç¡€</p><p>å‡è®¾è¦æŠŠå­—ç¬¦ä¸²ã€ABBBCCCCCCCCDDDDDDEEã€‘è½¬æˆäºŒè¿›åˆ¶ç¼–ç è¿›è¡Œä¼ è¾“</p><p>å¯ä»¥è½¬æˆASCIIç¼–ç ï¼ˆ65 ~ 69ï¼Œ1000001~1000101ï¼‰ï¼Œä½†æ˜¯æœ‰ç‚¹å†—é•¿ï¼Œå¦‚æœå¸Œæœ›ç¼–ç æ›´çŸ­å‘¢ï¼Ÿ</p><p>å¯ä»¥å…ˆçº¦å®š5ä¸ªå­—æ¯å¯¹åº”çš„äºŒè¿›åˆ¶</p><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>A</strong></th><th style="text-align:center"><strong>B</strong></th><th style="text-align:center"><strong>C</strong></th><th style="text-align:center"><strong>D</strong></th><th style="text-align:center"><strong>E</strong></th></tr></thead><tbody><tr><td style="text-align:center">000</td><td style="text-align:center">001</td><td style="text-align:center">010</td><td style="text-align:center">011</td><td style="text-align:center">100</td></tr></tbody></table></div><p>å¯¹åº”çš„äºŒè¿›åˆ¶ç¼–ç ï¼š000001001001010010010010010010010010011011011011011011100100</p><p>ä¸€å…±20ä¸ªå­—æ¯ï¼Œè½¬æˆäº†60ä¸ªäºŒè¿›åˆ¶ä½</p><p>å¦‚æœä½¿ç”¨å“ˆå¤«æ›¼ç¼–ç ï¼Œå¯ä»¥å‹ç¼©è‡³41ä¸ªäºŒè¿›åˆ¶ä½ï¼Œçº¦ä¸ºåŸæ¥é•¿åº¦çš„68.3%</p><h1 id="å“ˆå¤«æ›¼æ ‘"><a href="#å“ˆå¤«æ›¼æ ‘" class="headerlink" title="å“ˆå¤«æ›¼æ ‘"></a>å“ˆå¤«æ›¼æ ‘</h1><p>å…ˆè®¡ç®—å‡ºæ¯ä¸ªå­—æ¯çš„å‡ºç°é¢‘ç‡ï¼ˆæƒå€¼ï¼Œè¿™é‡Œç›´æ¥ç”¨å‡ºç°æ¬¡æ•°ï¼‰ï¼Œã€ABBBCCCCCCCCDDDDDDEEã€‘</p><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>A</strong></th><th style="text-align:center"><strong>B</strong></th><th style="text-align:center"><strong>C</strong></th><th style="text-align:center"><strong>D</strong></th><th style="text-align:center"><strong>E</strong></th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center">8</td><td style="text-align:center">6</td><td style="text-align:center">2</td></tr></tbody></table></div><p>åˆ©ç”¨è¿™äº›æƒå€¼ï¼Œæ„å»ºä¸€æ£µå“ˆå¤«æ›¼æ ‘ï¼ˆåˆç§°ä¸ºéœå¤«æ›¼æ ‘ã€æœ€ä¼˜äºŒå‰æ ‘ï¼‰</p><p>å¦‚ä½•æ„å»ºä¸€æ£µå“ˆå¤«æ›¼æ ‘ï¼Ÿï¼ˆå‡è®¾æœ‰ n ä¸ªæƒå€¼ï¼‰</p><ol><li><p>ä»¥æƒå€¼ä½œä¸ºæ ¹èŠ‚ç‚¹æ„å»º n æ£µäºŒå‰æ ‘ï¼Œç»„æˆæ£®æ—</p></li><li><p>åœ¨æ£®æ—ä¸­é€‰å‡º 2 ä¸ªæ ¹èŠ‚ç‚¹æœ€å°çš„æ ‘åˆå¹¶ï¼Œä½œä¸ºä¸€æ£µæ–°æ ‘çš„å·¦å³å­æ ‘ï¼Œä¸”æ–°æ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºå…¶å·¦å³å­æ ‘æ ¹èŠ‚ç‚¹ä¹‹å’Œ</p></li><li><p>ä»æ£®æ—ä¸­åˆ é™¤åˆšæ‰é€‰å–çš„ 2 æ£µæ ‘ï¼Œå¹¶å°†æ–°æ ‘åŠ å…¥æ£®æ—</p></li><li><p>é‡å¤ 2ã€3 æ­¥éª¤ï¼Œç›´åˆ°æ£®æ—åªå‰©ä¸€æ£µæ ‘ä¸ºæ­¢ï¼Œè¯¥æ ‘å³ä¸ºå“ˆå¤«æ›¼æ ‘</p></li></ol><h2 id="æ„å»ºå“ˆå¤«æ›¼æ ‘"><a href="#æ„å»ºå“ˆå¤«æ›¼æ ‘" class="headerlink" title="æ„å»ºå“ˆå¤«æ›¼æ ‘"></a>æ„å»ºå“ˆå¤«æ›¼æ ‘</h2><p><img src="/2020/07/14/å“ˆå¤«æ›¼æ ‘/1.png" alt></p><p>leftä¸º0ï¼Œrightä¸º1ï¼Œå¯ä»¥å¾—å‡º5ä¸ªå­—æ¯å¯¹åº”çš„å“ˆå¤«æ›¼ç¼–ç </p><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>A</strong></th><th style="text-align:center"><strong>B</strong></th><th style="text-align:center"><strong>C</strong></th><th style="text-align:center"><strong>D</strong></th><th style="text-align:center"><strong>E</strong></th></tr></thead><tbody><tr><td style="text-align:center">1110</td><td style="text-align:center">110</td><td style="text-align:center">0</td><td style="text-align:center">10</td><td style="text-align:center">1111</td></tr></tbody></table></div><p>ã€ABBBCCCCCCCCDDDDDDEEã€‘çš„å“ˆå¤«æ›¼ç¼–ç æ˜¯</p><p>1110110110110000000001010101010101111</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>n ä¸ªæƒå€¼æ„å»ºå‡ºæ¥çš„å“ˆå¤«æ›¼æ ‘æ‹¥æœ‰ n ä¸ªå¶å­èŠ‚ç‚¹</p><p>æ¯ä¸ªå“ˆå¤«æ›¼ç¼–ç éƒ½ä¸æ˜¯å¦ä¸€ä¸ªå“ˆå¤«æ›¼ç¼–ç çš„å‰ç¼€</p><p>å“ˆå¤«æ›¼æ ‘æ˜¯å¸¦æƒè·¯å¾„é•¿åº¦æœ€çŸ­çš„æ ‘ï¼Œæƒå€¼è¾ƒå¤§çš„èŠ‚ç‚¹ç¦»æ ¹èŠ‚ç‚¹è¾ƒè¿‘</p><p>å¸¦æƒè·¯å¾„é•¿åº¦ï¼šæ ‘ä¸­æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹çš„æƒå€¼ä¹˜ä¸Šå…¶åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦ã€‚ä¸æœ€ç»ˆçš„å“ˆå¤«æ›¼ç¼–ç æ€»é•¿åº¦æˆæ­£æ¯”å…³ç³»ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman-Codingï¼‰&quot;&gt;&lt;a href=&quot;#å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman-Codingï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman Codingï¼‰&quot;&gt;&lt;/a&gt;å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman Codingï¼‰&lt;/
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ ‘" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ ‘" scheme="http://yoursite.com/tags/%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>ä¼˜å…ˆçº§é˜Ÿåˆ—</title>
    <link href="http://yoursite.com/2020/07/14/%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/"/>
    <id>http://yoursite.com/2020/07/14/ä¼˜å…ˆçº§é˜Ÿåˆ—/</id>
    <published>2020-07-14T07:04:06.000Z</published>
    <updated>2020-07-14T08:44:58.676Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority-Queueï¼‰"><a href="#ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority-Queueï¼‰" class="headerlink" title="ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority Queueï¼‰"></a>ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority Queueï¼‰</h1><p><strong><a href="/2020/07/11/é˜Ÿåˆ—/" title="é˜Ÿåˆ—å®ç°">é˜Ÿåˆ—å®ç°</a></strong></p><h2 id="ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ¥å£è®¾è®¡"><a href="#ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ¥å£è®¾è®¡" class="headerlink" title="ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ¥å£è®¾è®¡"></a>ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ¥å£è®¾è®¡</h2><p>æ™®é€šçš„é˜Ÿåˆ—æ˜¯ FIFO åŸåˆ™ï¼Œä¹Ÿå°±æ˜¯å…ˆè¿›å…ˆå‡º</p><p><strong>ä¼˜å…ˆçº§é˜Ÿåˆ—åˆ™æ˜¯æŒ‰ç…§ä¼˜å…ˆçº§é«˜ä½è¿›è¡Œå‡ºé˜Ÿï¼Œæ¯”å¦‚å°†ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ä½œä¸ºé˜Ÿå¤´ä¼˜å…ˆå‡ºé˜Ÿ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> BinaryHeap&lt;E&gt; heap;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">PriorityQueue</span><span class="params">(Comparator&lt;E&gt; comparator)</span> </span>&#123;</span><br><span class="line">heap = <span class="keyword">new</span> BinaryHeap&lt;&gt;(comparator);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">PriorityQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> heap.size();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> heap.isEmpty();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">heap.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enQueue</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line">heap.add(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">deQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> heap.remove();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">front</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> heap.get();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¼˜å…ˆçº§é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯ä¸¾ä¾‹"><a href="#ä¼˜å…ˆçº§é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯ä¸¾ä¾‹" class="headerlink" title="ä¼˜å…ˆçº§é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯ä¸¾ä¾‹"></a>ä¼˜å…ˆçº§é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯ä¸¾ä¾‹</h2><ol><li><p>åŒ»é™¢çš„å¤œé—´é—¨è¯Š</p><p>é˜Ÿåˆ—å…ƒç´ æ˜¯ç—…äºº</p><p>ä¼˜å…ˆçº§æ˜¯ç—…æƒ…çš„ä¸¥é‡æƒ…å†µã€æŒ‚å·æ—¶é—´</p></li><li><p>æ“ä½œç³»ç»Ÿçš„å¤šä»»åŠ¡è°ƒåº¦</p><p>é˜Ÿåˆ—å…ƒç´ æ˜¯ä»»åŠ¡</p><p>ä¼˜å…ˆçº§æ˜¯ä»»åŠ¡ç±»å‹</p></li></ol><h2 id="ä¼˜å…ˆé˜Ÿåˆ—çš„åº•å±‚å®ç°"><a href="#ä¼˜å…ˆé˜Ÿåˆ—çš„åº•å±‚å®ç°" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—çš„åº•å±‚å®ç°"></a>ä¼˜å…ˆé˜Ÿåˆ—çš„åº•å±‚å®ç°</h2><p>æ ¹æ®ä¼˜å…ˆé˜Ÿåˆ—çš„ç‰¹ç‚¹ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ï¼šå¯ä»¥ç›´æ¥åˆ©ç”¨äºŒå‰å †ä½œä¸ºä¼˜å…ˆé˜Ÿåˆ—çš„åº•å±‚å®ç°</p><p> <strong><a href="/2020/07/14/äºŒå‰å †/" title="äºŒå‰å †å®ç°">äºŒå‰å †å®ç°</a></strong></p><p>å¯ä»¥é€šè¿‡ Comparator æˆ– Comparable å»è‡ªå®šä¹‰ä¼˜å…ˆçº§é«˜ä½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> boneBreak;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> boneBreak)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.boneBreak = boneBreak;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person person)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>.boneBreak - person.boneBreak;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Person [name="</span> + name + <span class="string">", boneBreak="</span> + boneBreak + <span class="string">"]"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">PriorityQueue&lt;Person&gt; queue = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">queue.enQueue(<span class="keyword">new</span> Person(<span class="string">"Jack"</span>, <span class="number">2</span>));</span><br><span class="line">queue.enQueue(<span class="keyword">new</span> Person(<span class="string">"Rose"</span>, <span class="number">10</span>));</span><br><span class="line">queue.enQueue(<span class="keyword">new</span> Person(<span class="string">"Jake"</span>, <span class="number">5</span>));</span><br><span class="line">queue.enQueue(<span class="keyword">new</span> Person(<span class="string">"James"</span>, <span class="number">15</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">System.out.println(queue.deQueue());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority-Queueï¼‰&quot;&gt;&lt;a href=&quot;#ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority-Queueï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority Queueï¼‰&quot;&gt;&lt;/a&gt;ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriority Queueï¼‰&lt;/
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="é˜Ÿåˆ—" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="é˜Ÿåˆ—" scheme="http://yoursite.com/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>äºŒå‰å †</title>
    <link href="http://yoursite.com/2020/07/14/%E4%BA%8C%E5%8F%89%E5%A0%86/"/>
    <id>http://yoursite.com/2020/07/14/äºŒå‰å †/</id>
    <published>2020-07-14T06:07:31.000Z</published>
    <updated>2020-07-14T08:43:03.550Z</updated>
    
    <content type="html"><![CDATA[<h1 id="äºŒå‰å †"><a href="#äºŒå‰å †" class="headerlink" title="äºŒå‰å †"></a>äºŒå‰å †</h1><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><p>è®¾è®¡ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨æ¥å­˜æ”¾æ•´æ•°ï¼Œè¦æ±‚æä¾› 3 ä¸ªæ¥å£</p><ol><li><p><strong>æ·»åŠ å…ƒç´ </strong></p></li><li><p><strong>è·å–æœ€å¤§å€¼</strong></p></li><li><p><strong>åˆ é™¤æœ€å¤§å€¼</strong></p></li></ol><p><img src="/2020/07/14/äºŒå‰å †/1.png" alt></p><p>æœ‰æ²¡æœ‰æ›´ä¼˜çš„æ•°æ®ç»“æ„ï¼Ÿ</p><p><strong>å †</strong>ï¼šè·å–æœ€å¤§å€¼ï¼šO(1)ã€åˆ é™¤æœ€å¤§å€¼ï¼šO(logn)ã€æ·»åŠ å…ƒç´ ï¼šO(logn)</p><h2 id="å †ï¼ˆHeapï¼‰"><a href="#å †ï¼ˆHeapï¼‰" class="headerlink" title="å †ï¼ˆHeapï¼‰"></a>å †ï¼ˆHeapï¼‰</h2><p>å †ï¼ˆHeapï¼‰ä¹Ÿæ˜¯ä¸€ç§æ ‘çŠ¶çš„æ•°æ®ç»“æ„ï¼ˆä¸è¦è·Ÿå†…å­˜æ¨¡å‹ä¸­çš„â€œå †ç©ºé—´â€æ··æ·†ï¼‰ï¼Œå¸¸è§çš„å †å®ç°æœ‰</p><ul><li><p>äºŒå‰å †ï¼ˆBinary Heapï¼Œå®Œå…¨äºŒå‰å †ï¼‰</p></li><li><p>å¤šå‰å †ï¼ˆD-heapã€D-ary Heapï¼‰</p></li><li><p>ç´¢å¼•å †ï¼ˆIndex Heapï¼‰</p></li><li><p>äºŒé¡¹å †ï¼ˆBinomial Heapï¼‰</p></li><li><p>æ–æ³¢é‚£å¥‘å †ï¼ˆFibonacci Heapï¼‰</p></li><li><p>å·¦å€¾å †ï¼ˆLeftist Heapï¼Œå·¦å¼å †ï¼‰</p></li><li><p>æ–œå †ï¼ˆSkew Heapï¼‰</p></li></ul><p><img src="/2020/07/14/äºŒå‰å †/2.png" alt></p><p>å †çš„ä¸€ä¸ªé‡è¦æ€§è´¨ï¼š<strong>ä»»æ„èŠ‚ç‚¹çš„å€¼æ€»æ˜¯ â‰¥ï¼ˆ â‰¤ ï¼‰å­èŠ‚ç‚¹çš„å€¼</strong></p><p>å¦‚æœä»»æ„èŠ‚ç‚¹çš„å€¼æ€»æ˜¯ â‰¥ å­èŠ‚ç‚¹çš„å€¼ï¼Œç§°ä¸ºï¼š<strong>æœ€å¤§å †ã€å¤§æ ¹å †ã€å¤§é¡¶å †</strong></p><p>å¦‚æœä»»æ„èŠ‚ç‚¹çš„å€¼æ€»æ˜¯ â‰¤ å­èŠ‚ç‚¹çš„å€¼ï¼Œç§°ä¸ºï¼š<strong>æœ€å°å †ã€å°æ ¹å †ã€å°é¡¶å †</strong></p><p>ç”±æ­¤å¯è§ï¼Œå †ä¸­çš„å…ƒç´ å¿…é¡»å…·å¤‡å¯æ¯”è¾ƒæ€§ï¼ˆè·ŸäºŒå‰æœç´¢æ ‘ä¸€æ ·ï¼‰</p><h2 id="å †çš„åŸºæœ¬æ¥å£è®¾è®¡"><a href="#å †çš„åŸºæœ¬æ¥å£è®¾è®¡" class="headerlink" title="å †çš„åŸºæœ¬æ¥å£è®¾è®¡"></a>å †çš„åŸºæœ¬æ¥å£è®¾è®¡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Heap</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;<span class="comment">// å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;<span class="comment">// æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;<span class="comment">// æ¸…ç©º</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(E element)</span></span>; <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="function">E <span class="title">get</span><span class="params">()</span></span>;<span class="comment">// è·å¾—å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="function">E <span class="title">remove</span><span class="params">()</span></span>; <span class="comment">// åˆ é™¤å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="function">E <span class="title">replace</span><span class="params">(E element)</span></span>; <span class="comment">// åˆ é™¤å †é¡¶å…ƒç´ çš„åŒæ—¶æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractHeap</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Heap</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">int</span> size;</span><br><span class="line"><span class="keyword">protected</span> Comparator&lt;E&gt; comparator;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">AbstractHeap</span><span class="params">(Comparator&lt;E&gt; comparator)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.comparator = comparator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">AbstractHeap</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒå™¨</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(E e1, E e2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> comparator != <span class="keyword">null</span> ? comparator.compare(e1, e2) </span><br><span class="line">: ((Comparable&lt;E&gt;)e1).compareTo(e2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰å †ï¼ˆBinary-Heapï¼‰"><a href="#äºŒå‰å †ï¼ˆBinary-Heapï¼‰" class="headerlink" title="äºŒå‰å †ï¼ˆBinary Heapï¼‰"></a>äºŒå‰å †ï¼ˆBinary Heapï¼‰</h2><p><strong>äºŒå‰å †çš„é€»è¾‘ç»“æ„å°±æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘</strong>ï¼Œæ‰€ä»¥ä¹Ÿå«å®Œå…¨äºŒå‰å †</p><p>é‰´äºå®Œå…¨äºŒå‰æ ‘çš„ä¸€äº›ç‰¹æ€§ï¼ŒäºŒå‰å †çš„åº•å±‚ï¼ˆç‰©ç†ç»“æ„ï¼‰ä¸€èˆ¬ç”¨æ•°ç»„å®ç°å³å¯</p><p>ç´¢å¼• i çš„è§„å¾‹ï¼ˆ n æ˜¯å…ƒç´ æ•°é‡ï¼‰</p><ul><li><p>å¦‚æœ i = 0 ï¼Œå®ƒæ˜¯æ ¹èŠ‚ç‚¹</p></li><li><p>å¦‚æœ i &gt; 0 ï¼Œå®ƒçš„çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•ä¸º floor( (i â€“ 1) / 2 )</p></li><li><p>å¦‚æœ 2i + 1 â‰¤ n â€“ 1ï¼Œå®ƒçš„å·¦å­èŠ‚ç‚¹çš„ç´¢å¼•ä¸º 2i + 1</p></li><li><p>å¦‚æœ 2i + 1 &gt; n â€“ 1 ï¼Œå®ƒæ— å·¦å­èŠ‚ç‚¹</p></li><li><p>å¦‚æœ 2i + 2 â‰¤ n â€“ 1 ï¼Œå®ƒçš„å³å­èŠ‚ç‚¹çš„ç´¢å¼•ä¸º 2i + 2</p></li><li><p>å¦‚æœ 2i + 2 &gt; n â€“ 1 ï¼Œå®ƒæ— å³å­èŠ‚ç‚¹</p></li></ul><p><img src="/2020/07/14/äºŒå‰å †/3.png" alt></p><h3 id="äºŒå‰å †è·å–æœ€å¤§å€¼"><a href="#äºŒå‰å †è·å–æœ€å¤§å€¼" class="headerlink" title="äºŒå‰å †è·å–æœ€å¤§å€¼"></a>äºŒå‰å †è·å–æœ€å¤§å€¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    emptyCheck();</span><br><span class="line">    <span class="keyword">return</span> elements[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">emptyCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"Heap is empty"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€å¤§å †-â€“-æ·»åŠ "><a href="#æœ€å¤§å †-â€“-æ·»åŠ " class="headerlink" title="æœ€å¤§å † â€“ æ·»åŠ "></a>æœ€å¤§å † â€“ æ·»åŠ </h3><p><img src="/2020/07/14/äºŒå‰å †/4.png" alt></p><p>å¾ªç¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼ˆå›¾ä¸­çš„ 80 ç®€ç§°ä¸º nodeï¼‰</p><ol><li><p><strong>å¦‚æœ node ï¼ çˆ¶èŠ‚ç‚¹</strong></p><p><strong>ä¸çˆ¶èŠ‚ç‚¹äº¤æ¢ä½ç½®</strong></p></li><li><p><strong>å¦‚æœ node â‰¤ çˆ¶èŠ‚ç‚¹ï¼Œæˆ–è€… node æ²¡æœ‰çˆ¶èŠ‚ç‚¹</strong></p><p><strong>é€€å‡ºå¾ªç¯</strong></p></li></ol><p>è¿™ä¸ªè¿‡ç¨‹ï¼Œå«åš<strong>ä¸Šæ»¤ï¼ˆSift Upï¼‰</strong></p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(logn)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line">    elementNotNullCheck(element);</span><br><span class="line">    ensureCapacity(size + <span class="number">1</span>);</span><br><span class="line">    elements[size++] = element;</span><br><span class="line">    siftUp(size - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftUp</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    E e = elements[index];</span><br><span class="line">    <span class="keyword">while</span> (index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> pindex = (index - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        E p = elements[pindex];</span><br><span class="line">        <span class="keyword">if</span> (compare(e, p) &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// äº¤æ¢indexã€pindexä½ç½®çš„å†…å®¹</span></span><br><span class="line">        E tmp = elements[index];</span><br><span class="line">        elements[index] = elements[pindex];</span><br><span class="line">        elements[pindex] = tmp;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‡æ–°èµ‹å€¼index</span></span><br><span class="line">        index = pindex;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€å¤§å †-â€“-æ·»åŠ -â€“-äº¤æ¢ä½ç½®çš„ä¼˜åŒ–"><a href="#æœ€å¤§å †-â€“-æ·»åŠ -â€“-äº¤æ¢ä½ç½®çš„ä¼˜åŒ–" class="headerlink" title="æœ€å¤§å † â€“ æ·»åŠ  â€“ äº¤æ¢ä½ç½®çš„ä¼˜åŒ–"></a>æœ€å¤§å † â€“ æ·»åŠ  â€“ äº¤æ¢ä½ç½®çš„ä¼˜åŒ–</h3><p>ä¸€èˆ¬äº¤æ¢ä½ç½®éœ€è¦3è¡Œä»£ç ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–</p><p>å°†æ–°æ·»åŠ èŠ‚ç‚¹å¤‡ä»½ï¼Œç¡®å®šæœ€ç»ˆä½ç½®æ‰æ‘†æ”¾ä¸Šå»</p><p><img src="/2020/07/14/äºŒå‰å †/5.png" alt></p><p>ä»…ä»äº¤æ¢ä½ç½®çš„ä»£ç è§’åº¦çœ‹</p><p>å¯ä»¥ç”±å¤§æ¦‚çš„ 3  O(logn) ä¼˜åŒ–åˆ° 1  O(logn) + 1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftUp</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    E element = elements[index];</span><br><span class="line">    <span class="keyword">while</span> (index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> parentIndex = (index - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        E parent = elements[parentIndex];</span><br><span class="line">        <span class="keyword">if</span> (compare(element, parent) &lt;= <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†çˆ¶å…ƒç´ å­˜å‚¨åœ¨indexä½ç½®</span></span><br><span class="line">        elements[index] = parent;</span><br><span class="line">        <span class="comment">// é‡æ–°èµ‹å€¼index</span></span><br><span class="line">        index = parentIndex;</span><br><span class="line">    &#125;</span><br><span class="line">    elements[index] = element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€å¤§å †-â€“-åˆ é™¤"><a href="#æœ€å¤§å †-â€“-åˆ é™¤" class="headerlink" title="æœ€å¤§å † â€“ åˆ é™¤"></a>æœ€å¤§å † â€“ åˆ é™¤</h3><p><img src="/2020/07/14/äºŒå‰å †/6.png" alt></p><ol><li><p><strong>ç”¨æœ€åä¸€ä¸ªèŠ‚ç‚¹è¦†ç›–æ ¹èŠ‚ç‚¹</strong></p></li><li><p><strong>åˆ é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹</strong></p></li><li><p><strong>å¾ªç¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼ˆå›¾ä¸­çš„ 43 ç®€ç§°ä¸º nodeï¼‰</strong></p><ul><li><p><strong>å¦‚æœ node &lt; æœ€å¤§çš„å­èŠ‚ç‚¹ï¼Œä¸æœ€å¤§çš„å­èŠ‚ç‚¹äº¤æ¢ä½ç½®</strong></p></li><li><p><strong>å¦‚æœ node â‰¥ æœ€å¤§çš„å­èŠ‚ç‚¹ï¼Œ æˆ–è€… node æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œé€€å‡ºå¾ªç¯</strong></p></li></ul></li></ol><p>è¿™ä¸ªè¿‡ç¨‹ï¼Œå«åš<strong>ä¸‹æ»¤ï¼ˆSift Downï¼‰</strong>ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(logn)</p><p>åŒæ ·çš„ï¼Œäº¤æ¢ä½ç½®çš„æ“ä½œå¯ä»¥åƒæ·»åŠ é‚£æ ·è¿›è¡Œä¼˜åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    emptyCheck();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> lastIndex = --size;</span><br><span class="line">    E root = elements[<span class="number">0</span>];</span><br><span class="line">    elements[<span class="number">0</span>] = elements[lastIndex];</span><br><span class="line">    elements[lastIndex] = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    siftDown(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftDown</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    E element = elements[index];</span><br><span class="line">    <span class="keyword">int</span> half = size &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„ç´¢å¼• == éå¶å­èŠ‚ç‚¹çš„æ•°é‡</span></span><br><span class="line">    <span class="comment">// index &lt; ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„ç´¢å¼•</span></span><br><span class="line">    <span class="comment">// å¿…é¡»ä¿è¯indexä½ç½®æ˜¯éå¶å­èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (index &lt; half) &#123; </span><br><span class="line">        <span class="comment">// indexçš„èŠ‚ç‚¹æœ‰2ç§æƒ…å†µ</span></span><br><span class="line">        <span class="comment">// 1.åªæœ‰å·¦å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// 2.åŒæ—¶æœ‰å·¦å³å­èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é»˜è®¤ä¸ºå·¦å­èŠ‚ç‚¹è·Ÿå®ƒè¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">        <span class="keyword">int</span> childIndex = (index &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">        E child = elements[childIndex];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å³å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> rightIndex = childIndex + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€‰å‡ºå·¦å³å­èŠ‚ç‚¹æœ€å¤§çš„é‚£ä¸ª</span></span><br><span class="line">        <span class="keyword">if</span> (rightIndex &lt; size &amp;&amp; compare(elements[rightIndex], child) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            child = elements[childIndex = rightIndex];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (compare(element, child) &gt;= <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†å­èŠ‚ç‚¹å­˜æ”¾åˆ°indexä½ç½®</span></span><br><span class="line">        elements[index] = child;</span><br><span class="line">        <span class="comment">// é‡æ–°è®¾ç½®index</span></span><br><span class="line">        index = childIndex;</span><br><span class="line">    &#125;</span><br><span class="line">    elements[index] = element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€å¤§å †-æ›¿æ¢å †é¡¶"><a href="#æœ€å¤§å †-æ›¿æ¢å †é¡¶" class="headerlink" title="æœ€å¤§å † - æ›¿æ¢å †é¡¶"></a>æœ€å¤§å † - æ›¿æ¢å †é¡¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">replace</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line">    elementNotNullCheck(element);</span><br><span class="line"></span><br><span class="line">    E root = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">        elements[<span class="number">0</span>] = element;</span><br><span class="line">        size++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        root = elements[<span class="number">0</span>];</span><br><span class="line">        elements[<span class="number">0</span>] = element;</span><br><span class="line">        siftDown(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †ï¼ˆHeapifyï¼‰"><a href="#æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †ï¼ˆHeapifyï¼‰" class="headerlink" title="æœ€å¤§å † â€“ æ‰¹é‡å»ºå †ï¼ˆHeapifyï¼‰"></a>æœ€å¤§å † â€“ æ‰¹é‡å»ºå †ï¼ˆHeapifyï¼‰</h3><p>æ‰¹é‡å»ºå †ï¼Œæœ‰ 2 ç§åšæ³•</p><ol><li><p><strong>è‡ªä¸Šè€Œä¸‹çš„ä¸Šæ»¤</strong></p></li><li><p><strong>è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤</strong></p></li></ol><h4 id="æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †-â€“-è‡ªä¸Šè€Œä¸‹çš„ä¸Šæ»¤"><a href="#æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †-â€“-è‡ªä¸Šè€Œä¸‹çš„ä¸Šæ»¤" class="headerlink" title="æœ€å¤§å † â€“ æ‰¹é‡å»ºå † â€“ è‡ªä¸Šè€Œä¸‹çš„ä¸Šæ»¤"></a>æœ€å¤§å † â€“ æ‰¹é‡å»ºå † â€“ è‡ªä¸Šè€Œä¸‹çš„ä¸Šæ»¤</h4><p><img src="/2020/07/14/äºŒå‰å †/7.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">heapify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è‡ªä¸Šè€Œä¸‹çš„ä¸Šæ»¤</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; size; i++) &#123;</span><br><span class="line">        siftUp(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †-â€“-è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤"><a href="#æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †-â€“-è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤" class="headerlink" title="æœ€å¤§å † â€“ æ‰¹é‡å»ºå † â€“ è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤"></a>æœ€å¤§å † â€“ æ‰¹é‡å»ºå † â€“ è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤</h4><p><img src="/2020/07/14/äºŒå‰å †/8.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">heapify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = (size &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        siftDown(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †-â€“-æ•ˆç‡å¯¹æ¯”"><a href="#æœ€å¤§å †-â€“-æ‰¹é‡å»ºå †-â€“-æ•ˆç‡å¯¹æ¯”" class="headerlink" title="æœ€å¤§å † â€“ æ‰¹é‡å»ºå † â€“ æ•ˆç‡å¯¹æ¯”"></a>æœ€å¤§å † â€“ æ‰¹é‡å»ºå † â€“ æ•ˆç‡å¯¹æ¯”</h4><p><img src="/2020/07/14/äºŒå‰å †/9.png" alt><strong>æ‰€æœ‰èŠ‚ç‚¹çš„æ·±åº¦ä¹‹å’Œ</strong></p><ul><li><p>ä»…ä»…æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå°±æœ‰è¿‘ n/2 ä¸ªï¼Œè€Œä¸”æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„æ·±åº¦éƒ½æ˜¯ O(logn) çº§åˆ«çš„</p></li><li><p>å› æ­¤ï¼Œåœ¨å¶å­èŠ‚ç‚¹è¿™ä¸€å—ï¼Œå°±è¾¾åˆ°äº† O(nlogn) çº§åˆ«</p></li><li><p>O(nlogn) çš„æ—¶é—´å¤æ‚åº¦è¶³ä»¥åˆ©ç”¨æ’åºç®—æ³•å¯¹æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œå…¨æ’åº</p></li></ul><p><strong>æ‰€æœ‰èŠ‚ç‚¹çš„é«˜åº¦ä¹‹å’Œ</strong></p><ul><li><p>å‡è®¾æ˜¯æ»¡æ ‘ï¼ŒèŠ‚ç‚¹æ€»ä¸ªæ•°ä¸º $n$ï¼Œæ ‘é«˜ä¸º $h$ï¼Œé‚£ä¹ˆ $n = 2h âˆ’ 1$</p></li><li><p>æ‰€æœ‰èŠ‚ç‚¹çš„æ ‘é«˜ä¹‹å’Œ $H(n) = 2^0 âˆ— (h âˆ’ 0) + 2^1 âˆ— (h âˆ’ 1) + 2^2 âˆ— (h âˆ’ 2) + â‹¯ + 2^{h âˆ’1}  âˆ— [h âˆ’ (h âˆ’ 1)]$</p></li><li><p>$H(n) = h âˆ— (2^0 + 2^1 + 2^2 + â‹¯ + 2^{h âˆ’1}) âˆ’ [1 âˆ— 2^1 + 2 âˆ— 2^2 + 3 âˆ— 2^3 + â‹¯ + (h âˆ’ 1)âˆ— 2^{hâˆ’1}]$</p></li><li><p>$H(n) = h âˆ— (2^h âˆ’ 1) âˆ’ [(h âˆ’ 2) âˆ— 2^h + 2]$</p></li><li><p>$H(n) = h âˆ— 2^h âˆ’ h âˆ’ h âˆ— 2^h + 2^{h+1} âˆ’ 2$</p></li><li><p>$H(n) = 2^{h+1} âˆ’ h âˆ’ 2 = 2 âˆ— (2^h âˆ’ 1) âˆ’ h = 2n âˆ’ h = 2n âˆ’ log_2(n + 1) = O(n)$</p></li></ul><p><strong>å…¬å¼æ¨å¯¼</strong></p><ul><li><p>$S(h) = 1 âˆ— 2^1 + 2 âˆ— 2^2 + 3 âˆ— 2^3 + â‹¯ + (h âˆ’ 2) âˆ— 2^{hâˆ’2} + (h âˆ’ 1) * 2^{hâˆ’1}$</p></li><li><p>$2S(h) = 1 âˆ— 2^2 + 2 âˆ— 2^3 + 3 âˆ— 2^4 + â‹¯ + (h âˆ’ 2) âˆ— 2^{hâˆ’1} +(h âˆ’ 1) âˆ— 2^h$</p></li><li><p>$S(h) â€“ 2S(h) = [2^1 + 2^2 + 2^3 + â‹¯ + 2^{hâˆ’1}] âˆ’ (h âˆ’ 1) âˆ— 2^h = (2^h âˆ’ 2) âˆ’ (h âˆ’ 1) âˆ— 2^h$</p></li><li><p>$S(h) = (h âˆ’ 1) âˆ— 2^h âˆ’ (2^h âˆ’ 2) = (h âˆ’ 2) âˆ— 2^h + 2$</p></li></ul><h3 id="æ‰¹é‡å»ºå †"><a href="#æ‰¹é‡å»ºå †" class="headerlink" title="æ‰¹é‡å»ºå †"></a>æ‰¹é‡å»ºå †</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">BinaryHeap</span><span class="params">(E[] elements, Comparator&lt;E&gt; comparator)</span>  </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(comparator);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (elements == <span class="keyword">null</span> || elements.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.elements = (E[]) <span class="keyword">new</span> Object[DEFAULT_CAPACITY];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        size = elements.length;</span><br><span class="line">        <span class="keyword">int</span> capacity = Math.max(elements.length, DEFAULT_CAPACITY);</span><br><span class="line">        <span class="keyword">this</span>.elements = (E[]) <span class="keyword">new</span> Object[capacity];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; elements.length; i++) &#123;</span><br><span class="line">            <span class="keyword">this</span>.elements[i] = elements[i];</span><br><span class="line">        &#125;</span><br><span class="line">        heapify();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">heapify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = (size &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        siftDown(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•æ„å»ºä¸€ä¸ªå°é¡¶å †ï¼Ÿ"><a href="#å¦‚ä½•æ„å»ºä¸€ä¸ªå°é¡¶å †ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ„å»ºä¸€ä¸ªå°é¡¶å †ï¼Ÿ"></a>å¦‚ä½•æ„å»ºä¸€ä¸ªå°é¡¶å †ï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Integer[] data = &#123;<span class="number">88</span>, <span class="number">44</span>, <span class="number">53</span>, <span class="number">41</span>, <span class="number">16</span>, <span class="number">6</span>, <span class="number">70</span>, <span class="number">18</span>, <span class="number">85</span>, <span class="number">98</span>, <span class="number">81</span>, <span class="number">23</span>, <span class="number">36</span>, <span class="number">43</span>, <span class="number">37</span>&#125;;</span><br><span class="line">BinaryHeap&lt;Integer&gt; heap = <span class="keyword">new</span> BinaryHeap&lt;&gt;(data, <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> o2 - o1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">BinaryTrees.println(heap);</span><br></pre></td></tr></table></figure><h2 id="Top-Ké—®é¢˜"><a href="#Top-Ké—®é¢˜" class="headerlink" title="Top Ké—®é¢˜"></a>Top Ké—®é¢˜</h2><p>ä» n ä¸ªæ•´æ•°ä¸­ï¼Œæ‰¾å‡ºæœ€å¤§çš„å‰ k ä¸ªæ•°ï¼ˆ k è¿œè¿œå°äº n ï¼‰</p><p>å¦‚æœä½¿ç”¨æ’åºç®—æ³•è¿›è¡Œå…¨æ’åºï¼Œéœ€è¦ O(nlogn) çš„æ—¶é—´å¤æ‚åº¦</p><p>å¦‚æœä½¿ç”¨äºŒå‰å †æ¥è§£å†³ï¼Œå¯ä»¥ä½¿ç”¨ O(nlogk) çš„æ—¶é—´å¤æ‚åº¦æ¥è§£å†³</p><ol><li><p>æ–°å»ºä¸€ä¸ªå°é¡¶å †</p></li><li><p>æ‰«æ n ä¸ªæ•´æ•°</p><p>å…ˆå°†éå†åˆ°çš„å‰ k ä¸ªæ•°æ”¾å…¥å †ä¸­</p><p>ä»ç¬¬ k + 1 ä¸ªæ•°å¼€å§‹ï¼Œå¦‚æœå¤§äºå †é¡¶å…ƒç´ ï¼Œå°±ä½¿ç”¨ replace æ“ä½œï¼ˆåˆ é™¤å †é¡¶å…ƒç´ ï¼Œå°†ç¬¬ k + 1 ä¸ªæ•°æ·»åŠ åˆ°å †ä¸­ï¼‰</p></li><li><p>æ‰«æå®Œæ¯•åï¼Œå †ä¸­å‰©ä¸‹çš„å°±æ˜¯æœ€å¤§çš„å‰ k ä¸ªæ•°</p></li><li><p>å¦‚æœæ˜¯æ‰¾å‡ºæœ€å°çš„å‰ k ä¸ªæ•°å‘¢ï¼Ÿ</p><p>ç”¨å¤§é¡¶å †</p><p>å¦‚æœå°äºå †é¡¶å…ƒç´ ï¼Œå°±ä½¿ç”¨ replace æ“ä½œ</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ–°å»ºä¸€ä¸ªå°é¡¶å †</span></span><br><span class="line">    BinaryHeap&lt;Integer&gt; heap = <span class="keyword">new</span> BinaryHeap&lt;&gt;(<span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> o2 - o1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¾å‡ºæœ€å¤§çš„å‰kä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">3</span>;</span><br><span class="line">    Integer[] data = &#123;<span class="number">51</span>, <span class="number">30</span>, <span class="number">39</span>, <span class="number">92</span>, <span class="number">74</span>, <span class="number">25</span>, <span class="number">16</span>, <span class="number">93</span>, </span><br><span class="line">                      <span class="number">91</span>, <span class="number">19</span>, <span class="number">54</span>, <span class="number">47</span>, <span class="number">73</span>, <span class="number">62</span>, <span class="number">76</span>, <span class="number">63</span>, <span class="number">35</span>, <span class="number">18</span>, </span><br><span class="line">                      <span class="number">90</span>, <span class="number">6</span>, <span class="number">65</span>, <span class="number">49</span>, <span class="number">3</span>, <span class="number">26</span>, <span class="number">61</span>, <span class="number">21</span>, <span class="number">48</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (heap.size() &lt; k) &#123; <span class="comment">// å‰kä¸ªæ•°æ·»åŠ åˆ°å°é¡¶å †</span></span><br><span class="line">            heap.add(data[i]); <span class="comment">// logk</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data[i] &gt; heap.get()) &#123; <span class="comment">// å¦‚æœæ˜¯ç¬¬k + 1ä¸ªæ•°ï¼Œå¹¶ä¸”å¤§äºå †é¡¶å…ƒç´ </span></span><br><span class="line">            heap.replace(data[i]); <span class="comment">// logk</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// O(nlogk)</span></span><br><span class="line">    BinaryTrees.println(heap);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;äºŒå‰å †&quot;&gt;&lt;a href=&quot;#äºŒå‰å †&quot; class=&quot;headerlink&quot; title=&quot;äºŒå‰å †&quot;&gt;&lt;/a&gt;äºŒå‰å †&lt;/h1&gt;&lt;h2 id=&quot;æ€è€ƒ&quot;&gt;&lt;a href=&quot;#æ€è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;æ€è€ƒ&quot;&gt;&lt;/a&gt;æ€è€ƒ&lt;/h2&gt;&lt;p
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="å †" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A0%86/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="äºŒå‰å †" scheme="http://yoursite.com/tags/%E4%BA%8C%E5%8F%89%E5%A0%86/"/>
    
  </entry>
  
  <entry>
    <title>å“ˆå¸Œè¡¨</title>
    <link href="http://yoursite.com/2020/07/13/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    <id>http://yoursite.com/2020/07/13/å“ˆå¸Œè¡¨/</id>
    <published>2020-07-13T06:35:39.000Z</published>
    <updated>2020-07-14T08:45:47.988Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰"><a href="#å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰" class="headerlink" title="å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰"></a>å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰</h1><h2 id="å…ˆæ¥åˆ†æTreeMapï¼ˆï¼‰"><a href="#å…ˆæ¥åˆ†æTreeMapï¼ˆï¼‰" class="headerlink" title="å…ˆæ¥åˆ†æTreeMapï¼ˆï¼‰"></a>å…ˆæ¥åˆ†æTreeMapï¼ˆ<a href="/2020/07/13/æ˜ å°„/" title="çº¢é»‘æ ‘æ˜ å°„å®ç°">çº¢é»‘æ ‘æ˜ å°„å®ç°</a>ï¼‰</h2><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼ˆå¹³å‡ï¼‰</p></li><li><p>æ·»åŠ ã€åˆ é™¤ã€æœç´¢ï¼šO(logn)</p></li></ul><p><strong>ç‰¹ç‚¹</strong></p><ul><li><p>Key å¿…é¡»å…·å¤‡å¯æ¯”è¾ƒæ€§</p></li><li><p>å…ƒç´ çš„åˆ†å¸ƒæ˜¯æœ‰é¡ºåºçš„</p></li></ul><p><strong>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šæ—¶å€™çš„éœ€æ±‚</strong></p><ul><li><p>Map ä¸­å­˜å‚¨çš„å…ƒç´ ä¸éœ€è¦è®²ç©¶é¡ºåº</p></li><li><p>Map ä¸­çš„ Key ä¸éœ€è¦å…·å¤‡å¯æ¯”è¾ƒæ€§</p></li></ul><p>ä¸è€ƒè™‘é¡ºåºã€ä¸è€ƒè™‘ Key çš„å¯æ¯”è¾ƒæ€§ï¼ŒMap æœ‰æ›´å¥½çš„å®ç°æ–¹æ¡ˆï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ° O(1)ï¼Œé‚£å°±æ˜¯<strong>é‡‡å–å“ˆå¸Œè¡¨æ¥å®ç° Map</strong></p><h2 id="ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰"><a href="#ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰"></a>ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰</h2><p>å“ˆå¸Œè¡¨ä¹Ÿå«åšæ•£åˆ—è¡¨ï¼ˆ hash æœ‰â€œå‰ç¢â€çš„æ„æ€ï¼‰</p><p>æ·»åŠ ã€æœç´¢ã€åˆ é™¤çš„æµç¨‹éƒ½æ˜¯ç±»ä¼¼çš„</p><ol><li><p><strong>åˆ©ç”¨å“ˆå¸Œå‡½æ•°ç”Ÿæˆ key å¯¹åº”çš„ indexã€O(1)ã€‘</strong></p></li><li><p><strong>æ ¹æ® index æ“ä½œå®šä½æ•°ç»„å…ƒç´ ã€O(1)ã€‘</strong></p></li></ol><p>å“ˆå¸Œè¡¨æ˜¯ã€<strong>ç©ºé—´æ¢æ—¶é—´</strong>ã€‘çš„å…¸å‹åº”ç”¨</p><p>å“ˆå¸Œå‡½æ•°ï¼Œä¹Ÿå«åšæ•£åˆ—å‡½æ•°</p><p>å“ˆå¸Œè¡¨å†…éƒ¨çš„æ•°ç»„å…ƒç´ ï¼Œå¾ˆå¤šåœ°æ–¹ä¹Ÿå« Bucketï¼ˆæ¡¶ï¼‰ï¼Œæ•´ä¸ªæ•°ç»„å« Buckets æˆ–è€… Bucket Array</p><p><img src="/2020/07/13/å“ˆå¸Œè¡¨/1.png" alt></p><h2 id="å“ˆå¸Œå†²çªï¼ˆHash-Collisionï¼‰"><a href="#å“ˆå¸Œå†²çªï¼ˆHash-Collisionï¼‰" class="headerlink" title="å“ˆå¸Œå†²çªï¼ˆHash Collisionï¼‰"></a>å“ˆå¸Œå†²çªï¼ˆHash Collisionï¼‰</h2><p>å“ˆå¸Œå†²çªä¹Ÿå«åšå“ˆå¸Œç¢°æ’</p><p>2 ä¸ªä¸åŒçš„ keyï¼Œç»è¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºç›¸åŒçš„ç»“æœ</p><p><strong>key1 â‰  key2 ï¼Œhash(key1) = hash(key2)</strong></p><p><img src="/2020/07/13/å“ˆå¸Œè¡¨/2.png" alt></p><p><strong>è§£å†³å“ˆå¸Œå†²çªçš„å¸¸è§æ–¹æ³•</strong></p><ol><li><p>å¼€æ”¾å®šå€æ³•ï¼ˆOpen Addressingï¼‰</p><p>æŒ‰ç…§ä¸€å®šè§„åˆ™å‘å…¶ä»–åœ°å€æ¢æµ‹ï¼Œç›´åˆ°é‡åˆ°ç©ºæ¡¶</p></li><li><p>å†å“ˆå¸Œæ³•ï¼ˆRe-Hashingï¼‰</p><p>è®¾è®¡å¤šä¸ªå“ˆå¸Œå‡½æ•°</p></li><li><p>é“¾åœ°å€æ³•ï¼ˆSeparate Chainingï¼‰</p><p>æ¯”å¦‚é€šè¿‡é“¾è¡¨å°†åŒä¸€indexçš„å…ƒç´ ä¸²èµ·æ¥</p></li></ol><h2 id="JDK1-8çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ¡ˆ"><a href="#JDK1-8çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ¡ˆ" class="headerlink" title="JDK1.8çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ¡ˆ"></a>JDK1.8çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ¡ˆ</h2><p><strong>JDK1.8ä¸­çš„å“ˆå¸Œè¡¨æ˜¯ä½¿ç”¨é“¾è¡¨+çº¢é»‘æ ‘è§£å†³å“ˆå¸Œå†²çª</strong></p><ol><li><p>é»˜è®¤ä½¿ç”¨å•å‘é“¾è¡¨å°†å…ƒç´ ä¸²èµ·æ¥</p></li><li><p>åœ¨æ·»åŠ å…ƒç´ æ—¶ï¼Œå¯èƒ½ä¼š<strong>ç”±å•å‘é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘æ¥å­˜å‚¨å…ƒç´ </strong></p><p>æ¯”å¦‚å½“å“ˆå¸Œè¡¨å®¹é‡ â‰¥ 64 ä¸” å•å‘é“¾è¡¨çš„èŠ‚ç‚¹æ•°é‡å¤§äº 8 æ—¶</p><p>å½“çº¢é»‘æ ‘èŠ‚ç‚¹æ•°é‡å°‘åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œåˆä¼šè½¬ä¸ºå•å‘é“¾è¡¨</p></li></ol><p><img src="/2020/07/13/å“ˆå¸Œè¡¨/3.png" alt></p><h2 id="å“ˆå¸Œå‡½æ•°"><a href="#å“ˆå¸Œå‡½æ•°" class="headerlink" title="å“ˆå¸Œå‡½æ•°"></a>å“ˆå¸Œå‡½æ•°</h2><p>å“ˆå¸Œè¡¨ä¸­å“ˆå¸Œå‡½æ•°çš„å®ç°æ­¥éª¤å¤§æ¦‚å¦‚ä¸‹</p><ol><li><p>å…ˆç”Ÿæˆ key çš„å“ˆå¸Œå€¼ï¼ˆå¿…é¡»æ˜¯æ•´æ•°ï¼‰</p></li><li><p>å†è®© key çš„å“ˆå¸Œå€¼è·Ÿæ•°ç»„çš„å¤§å°è¿›è¡Œç›¸å…³è¿ç®—ï¼Œç”Ÿæˆä¸€ä¸ªç´¢å¼•å€¼</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> hash_code(key) % table.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯ä»¥ä½¿ç”¨ &amp; ä½è¿ç®—å–ä»£ % è¿ç®—ã€å‰æï¼šå°†æ•°ç»„çš„é•¿åº¦è®¾è®¡ä¸º 2 çš„å¹‚ï¼ˆ2nï¼‰ã€‘</strong></p><div class="table-container"><table><thead><tr><th style="text-align:right"><strong>1100  1010</strong></th><th style="text-align:right"><strong>1011  1100</strong></th></tr></thead><tbody><tr><td style="text-align:right"><strong>&amp;  1111</strong></td><td style="text-align:right"><strong>&amp;  1111</strong></td></tr><tr><td style="text-align:right"><strong>1010</strong></td><td style="text-align:right"><strong>1100</strong></td></tr></tbody></table></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> hash_code(key) % (table.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è‰¯å¥½çš„å“ˆå¸Œå‡½æ•°</strong></p><p>è®©å“ˆå¸Œå€¼æ›´åŠ å‡åŒ€åˆ†å¸ƒ â†’ å‡å°‘å“ˆå¸Œå†²çªæ¬¡æ•° â†’ æå‡å“ˆå¸Œè¡¨çš„æ€§èƒ½</p><h2 id="å¦‚ä½•ç”Ÿæˆkeyçš„å“ˆå¸Œå€¼"><a href="#å¦‚ä½•ç”Ÿæˆkeyçš„å“ˆå¸Œå€¼" class="headerlink" title="å¦‚ä½•ç”Ÿæˆkeyçš„å“ˆå¸Œå€¼"></a>å¦‚ä½•ç”Ÿæˆkeyçš„å“ˆå¸Œå€¼</h2><p>key çš„å¸¸è§ç§ç±»å¯èƒ½æœ‰</p><p><strong>æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²ã€è‡ªå®šä¹‰å¯¹è±¡</strong></p><p>ä¸åŒç§ç±»çš„ keyï¼Œå“ˆå¸Œå€¼çš„ç”Ÿæˆæ–¹å¼ä¸ä¸€æ ·ï¼Œä½†ç›®æ ‡æ˜¯ä¸€è‡´çš„</p><p>å°½é‡è®©æ¯ä¸ª key çš„å“ˆå¸Œå€¼æ˜¯å”¯ä¸€çš„</p><p>å°½é‡è®© key çš„æ‰€æœ‰ä¿¡æ¯å‚ä¸è¿ç®—</p><p><strong>åœ¨Javaä¸­ï¼ŒHashMap çš„ key å¿…é¡»å®ç° hashCodeã€equals æ–¹æ³•ï¼Œä¹Ÿå…è®¸ key ä¸º null</strong></p><h3 id="æ•´æ•°çš„å“ˆå¸Œå€¼"><a href="#æ•´æ•°çš„å“ˆå¸Œå€¼" class="headerlink" title="æ•´æ•°çš„å“ˆå¸Œå€¼"></a>æ•´æ•°çš„å“ˆå¸Œå€¼</h3><p>æ•´æ•°å€¼å½“åšå“ˆå¸Œå€¼</p><p>æ¯”å¦‚ 10 çš„å“ˆå¸Œå€¼å°±æ˜¯ 10</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">(<span class="keyword">int</span> value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ®ç‚¹æ•°çš„å“ˆå¸Œå€¼"><a href="#æµ®ç‚¹æ•°çš„å“ˆå¸Œå€¼" class="headerlink" title="æµ®ç‚¹æ•°çš„å“ˆå¸Œå€¼"></a>æµ®ç‚¹æ•°çš„å“ˆå¸Œå€¼</h3><p>å°†å­˜å‚¨çš„äºŒè¿›åˆ¶æ ¼å¼è½¬ä¸ºæ•´æ•°å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">(<span class="keyword">float</span> value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> floatToIntBits(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Longå’ŒDoubleçš„å“ˆå¸Œå€¼"><a href="#Longå’ŒDoubleçš„å“ˆå¸Œå€¼" class="headerlink" title="Longå’ŒDoubleçš„å“ˆå¸Œå€¼"></a>Longå’ŒDoubleçš„å“ˆå¸Œå€¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">(<span class="keyword">long</span> value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)(value ^ (value &gt;&gt;&gt; <span class="number">32</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">(<span class="keyword">double</span> value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> bits = doubleToLongBits(value);</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)(bits ^ (bits &gt;&gt;&gt; <span class="number">32</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>>&gt;&gt; å’Œ ^ çš„ä½œç”¨æ˜¯ï¼Ÿ</strong></p><p><strong>é«˜32bit å’Œ ä½32bit æ··åˆè®¡ç®—å‡º 32bit çš„å“ˆå¸Œå€¼</strong></p><p><strong>å……åˆ†åˆ©ç”¨æ‰€æœ‰ä¿¡æ¯è®¡ç®—å‡ºå“ˆå¸Œå€¼</strong></p><p><img src="/2020/07/13/å“ˆå¸Œè¡¨/4.png" alt></p><h3 id="å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼"><a href="#å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼" class="headerlink" title="å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼"></a>å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼</h3><p>å­—ç¬¦ä¸²æ˜¯ç”±è‹¥å¹²ä¸ªå­—ç¬¦ç»„æˆçš„</p><p>æ¯”å¦‚å­—ç¬¦ä¸² jackï¼Œç”± jã€aã€cã€k å››ä¸ªå­—ç¬¦ç»„æˆï¼ˆå­—ç¬¦çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼‰</p><p>å› æ­¤ï¼Œjack çš„å“ˆå¸Œå€¼å¯ä»¥è¡¨ç¤ºä¸º $ j âˆ— n^3 + a âˆ— n^2 + c âˆ— n^1 + k âˆ— n^0$ï¼Œç­‰ä»·äº $[ ( j âˆ— n + a ) âˆ— n + c ] âˆ— n + k$</p><p>åœ¨JDKä¸­ï¼Œä¹˜æ•° n ä¸º 31ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ 31ï¼Ÿ</p><p><strong>31 æ˜¯ä¸€ä¸ªå¥‡ç´ æ•°ï¼ŒJVMä¼šå°† 31 * i ä¼˜åŒ–æˆ (i &lt;&lt; 5) â€“ i</strong></p><script type="math/tex; mode=display">31 * i = (2^5 - 1) * i = i * 2^5 - i = (i << 5) -i</script><p>31ä¸ä»…ä»…æ˜¯ç¬¦åˆ$2^n â€“ 1$ï¼Œå®ƒæ˜¯ä¸ª<strong>å¥‡ç´ æ•°ï¼ˆæ—¢æ˜¯å¥‡æ•°ï¼Œåˆæ˜¯ç´ æ•°ï¼Œä¹Ÿå°±æ˜¯è´¨æ•°ï¼‰</strong></p><p><strong>ç´ æ•°å’Œå…¶ä»–æ•°ç›¸ä¹˜çš„ç»“æœæ¯”å…¶ä»–æ–¹å¼æ›´å®¹æ˜“äº§æˆå”¯ä¸€æ€§ï¼Œå‡å°‘å“ˆå¸Œå†²çª</strong></p><p>æœ€ç»ˆé€‰æ‹©31æ˜¯ç»è¿‡è§‚æµ‹åˆ†å¸ƒç»“æœåçš„é€‰æ‹©</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String string = <span class="string">"jack"</span>;</span><br><span class="line"><span class="keyword">int</span> hashCode = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> len = string.length();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)&#123;</span><br><span class="line">    <span class="keyword">char</span> c = string.charAt(i);</span><br><span class="line">    <span class="comment">// hashCode = 31 * hashCode + c;</span></span><br><span class="line">    hashCode = (hashCode &lt;&lt; <span class="number">5</span>) - hashCode + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å¯¹è±¡çš„å“ˆå¸Œå€¼"><a href="#è‡ªå®šä¹‰å¯¹è±¡çš„å“ˆå¸Œå€¼" class="headerlink" title="è‡ªå®šä¹‰å¯¹è±¡çš„å“ˆå¸Œå€¼"></a>è‡ªå®šä¹‰å¯¹è±¡çš„å“ˆå¸Œå€¼</h3><p>è‡ªå®šä¹‰å¯¹è±¡ä½œä¸º keyï¼Œæœ€å¥½åŒæ—¶<strong>é‡å†™ hashCode ã€equals æ–¹æ³•</strong></p><ol><li><p>equals ï¼šç”¨ä»¥åˆ¤æ–­ 2 ä¸ª key æ˜¯å¦ä¸ºåŒä¸€ä¸ª key</p><ul><li><p><strong>è‡ªåæ€§</strong>ï¼šå¯¹äºä»»ä½•é null çš„ xï¼Œx.equals(x)å¿…é¡»è¿”å›true</p></li><li><p><strong>å¯¹ç§°æ€§</strong>ï¼šå¯¹äºä»»ä½•é null çš„ xã€yï¼Œå¦‚æœ y.equals(x) è¿”å› trueï¼Œx.equals(y) å¿…é¡»è¿”å› true</p></li><li><p><strong>ä¼ é€’æ€§</strong>ï¼šå¯¹äºä»»ä½•é null çš„ xã€yã€zï¼Œå¦‚æœ x.equals(y)ã€y.equals(z) è¿”å› trueï¼Œé‚£ä¹ˆx.equals(z) å¿…é¡» è¿”å› true</p></li><li><p><strong>ä¸€è‡´æ€§</strong>ï¼šå¯¹äºä»»ä½•é null çš„ xã€yï¼Œåªè¦ equals çš„æ¯”è¾ƒæ“ä½œåœ¨å¯¹è±¡ä¸­æ‰€ç”¨çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¤šæ¬¡è°ƒç”¨</p></li><li><p>x.equals(y) å°±ä¼šä¸€è‡´åœ°è¿”å› trueï¼Œæˆ–è€…ä¸€è‡´åœ°è¿”å› false</p></li><li><p>å¯¹äºä»»ä½•é null çš„ xï¼Œx.equals(null) å¿…é¡»è¿”å› false</p></li></ul></li><li><p>hashCode ï¼šå¿…é¡»ä¿è¯ equals ä¸º true çš„ 2 ä¸ª key çš„å“ˆå¸Œå€¼ä¸€æ ·</p></li><li><p>åè¿‡æ¥ hashCode ç›¸ç­‰çš„ keyï¼Œä¸ä¸€å®š equals ä¸º true</p></li><li><p>ä¸é‡å†™ hashCode æ–¹æ³•åªé‡å†™ equals ä¼šæœ‰ä»€ä¹ˆåæœï¼Ÿ</p><p>å¯èƒ½ä¼šå¯¼è‡´ 2 ä¸ª equals ä¸º true çš„ key åŒæ—¶å­˜åœ¨å“ˆå¸Œè¡¨ä¸­</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">float</span> height;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(<span class="keyword">int</span> age, <span class="keyword">float</span> height, String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line"><span class="keyword">this</span>.height = height;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æ¥æ¯”è¾ƒ2ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line"><span class="comment">// å†…å­˜åœ°å€</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> == obj) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">if</span> (obj == <span class="keyword">null</span> || obj.getClass() != getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"><span class="comment">// if (obj == null || !(obj instanceof Person)) return false;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯”è¾ƒæˆå‘˜å˜é‡</span></span><br><span class="line">Person person = (Person) obj;</span><br><span class="line"><span class="keyword">return</span> person.age == age</span><br><span class="line">&amp;&amp; person.height == height</span><br><span class="line">&amp;&amp; (person.name == <span class="keyword">null</span> ? name == <span class="keyword">null</span> : person.name.equals(name));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> hashCode = Integer.hashCode(age);</span><br><span class="line">hashCode = hashCode * <span class="number">31</span> + Float.hashCode(height);</span><br><span class="line">hashCode = hashCode * <span class="number">31</span> + (name != <span class="keyword">null</span> ? name.hashCode() : <span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> hashCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person o)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> age - o.age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å“ˆå¸Œå€¼çš„è¿›ä¸€æ­¥å¤„ç†ï¼šæ‰°åŠ¨è®¡ç®—"><a href="#å“ˆå¸Œå€¼çš„è¿›ä¸€æ­¥å¤„ç†ï¼šæ‰°åŠ¨è®¡ç®—" class="headerlink" title="å“ˆå¸Œå€¼çš„è¿›ä¸€æ­¥å¤„ç†ï¼šæ‰°åŠ¨è®¡ç®—"></a>å“ˆå¸Œå€¼çš„è¿›ä¸€æ­¥å¤„ç†ï¼šæ‰°åŠ¨è®¡ç®—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> hash = key.hashCode();</span><br><span class="line">    <span class="keyword">return</span> hash ^ (hash &gt;&gt;&gt; <span class="number">16</span>) &amp; (table.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è£…å¡«å› å­"><a href="#è£…å¡«å› å­" class="headerlink" title="è£…å¡«å› å­"></a>è£…å¡«å› å­</h2><p>è£…å¡«å› å­ï¼ˆLoad Factorï¼‰ï¼šèŠ‚ç‚¹æ€»æ•°é‡ / å“ˆå¸Œè¡¨æ¡¶æ•°ç»„é•¿åº¦ï¼Œä¹Ÿå«åšè´Ÿè½½å› å­</p><p>åœ¨JDK1.8çš„HashMapä¸­ï¼Œå¦‚æœè£…å¡«å› å­è¶…è¿‡0.75ï¼Œå°±æ‰©å®¹ä¸ºåŸæ¥çš„2å€</p><h2 id="TreeMap-vs-HashMap"><a href="#TreeMap-vs-HashMap" class="headerlink" title="TreeMap vs HashMap"></a>TreeMap vs HashMap</h2><p><strong>ä½•æ—¶é€‰æ‹©TreeMapï¼šå…ƒç´ å…·å¤‡å¯æ¯”è¾ƒæ€§ä¸”è¦æ±‚å‡åºéå†ï¼ˆæŒ‰ç…§å…ƒç´ ä»å°åˆ°å¤§ï¼‰</strong></p><p><strong>ä½•æ—¶é€‰æ‹©HashMapï¼šæ— åºéå†</strong></p><h2 id="HashMapä»£ç å®ç°"><a href="#HashMapä»£ç å®ç°" class="headerlink" title="HashMapä»£ç å®ç°"></a>HashMapä»£ç å®ç°</h2><h3 id="Mapæ¥å£å®šä¹‰"><a href="#Mapæ¥å£å®šä¹‰" class="headerlink" title="Mapæ¥å£å®šä¹‰"></a>Mapæ¥å£å®šä¹‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">V <span class="title">put</span><span class="params">(K key, V value)</span></span>;</span><br><span class="line"><span class="function">V <span class="title">get</span><span class="params">(K key)</span></span>;</span><br><span class="line"><span class="function">V <span class="title">remove</span><span class="params">(K key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">containsKey</span><span class="params">(K key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(V value)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">traversal</span><span class="params">(Visitor&lt;K, V&gt; visitor)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Visitor</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">boolean</span> stop;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">visit</span><span class="params">(K key, V value)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸€äº›ç®€å•çš„å‡½æ•°"><a href="#ä¸€äº›ç®€å•çš„å‡½æ•°" class="headerlink" title="ä¸€äº›ç®€å•çš„å‡½æ•°"></a>ä¸€äº›ç®€å•çš„å‡½æ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> RED = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> BLACK = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> Node&lt;K, V&gt;[] table;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// åˆå§‹å®¹é‡ 2^4</span></span><br><span class="line">    <span class="comment">// è£…å¡«å› å­ï¼Œå¤§äº0.75æ‰©å®¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        table = <span class="keyword">new</span> Node[DEFAULT_CAPACITY];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">// æ¸…ç©ºå“ˆå¸Œè¡¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; table.length; i++) &#123;</span><br><span class="line">            table[i] = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Node&lt;K, V&gt; <span class="title">createNode</span><span class="params">(K key, V value, Node&lt;K, V&gt; parent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Node&lt;&gt;(key, value, parent);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çº¢é»‘æ ‘èŠ‚ç‚¹å·¦æ—‹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rotateLeft</span><span class="params">(Node&lt;K, V&gt; grand)</span> </span>&#123;</span><br><span class="line">        Node&lt;K, V&gt; parent = grand.right;</span><br><span class="line">        Node&lt;K, V&gt; child = parent.left;</span><br><span class="line">        grand.right = child;</span><br><span class="line">        parent.left = grand;</span><br><span class="line">        afterRotate(grand, parent, child);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çº¢é»‘æ ‘èŠ‚ç‚¹å³æ—‹</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rotateRight</span><span class="params">(Node&lt;K, V&gt; grand)</span> </span>&#123;</span><br><span class="line">        Node&lt;K, V&gt; parent = grand.left;</span><br><span class="line">        Node&lt;K, V&gt; child = parent.right;</span><br><span class="line">        grand.left = child;</span><br><span class="line">        parent.right = grand;</span><br><span class="line">        afterRotate(grand, parent, child);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çº¢é»‘æ ‘èŠ‚ç‚¹é€‰æ‹©ä¹‹åçš„ä¿®å¤</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">afterRotate</span><span class="params">(Node&lt;K, V&gt; grand, Node&lt;K, V&gt; parent, Node&lt;K, V&gt; child)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è®©parentç§°ä¸ºå­æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        parent.parent = grand.parent;</span><br><span class="line">        <span class="keyword">if</span> (grand.isLeftChild()) &#123;</span><br><span class="line">            grand.parent.left = parent;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (grand.isRightChild()) &#123;</span><br><span class="line">            grand.parent.right = parent;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// grandæ˜¯rootèŠ‚ç‚¹</span></span><br><span class="line">            table[index(grand)] = parent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ›´æ–°childçš„parent</span></span><br><span class="line">        <span class="keyword">if</span> (child != <span class="keyword">null</span>) &#123;</span><br><span class="line">            child.parent = grand;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ›´æ–°grandçš„parent</span></span><br><span class="line">        grand.parent = parent;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">color</span><span class="params">(Node&lt;K, V&gt; node, <span class="keyword">boolean</span> color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> node;</span><br><span class="line">        node.color = color;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">red</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> color(node, RED);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">black</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> color(node, BLACK);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">colorOf</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> node == <span class="keyword">null</span> ? BLACK : node.color;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isBlack</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> colorOf(node) == BLACK;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> colorOf(node) == RED;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”ŸæˆHashå€¼"><a href="#ç”ŸæˆHashå€¼" class="headerlink" title="ç”ŸæˆHashå€¼"></a>ç”ŸæˆHashå€¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">index</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> hash(key) &amp; (table.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> hash = key.hashCode();</span><br><span class="line">    <span class="keyword">return</span> hash ^ (hash &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">index</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> node.hash &amp; (table.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HashèŠ‚ç‚¹å®šä¹‰"><a href="#HashèŠ‚ç‚¹å®šä¹‰" class="headerlink" title="HashèŠ‚ç‚¹å®šä¹‰"></a>HashèŠ‚ç‚¹å®šä¹‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> hash;</span><br><span class="line">    K key;</span><br><span class="line">    V value;</span><br><span class="line">    <span class="keyword">boolean</span> color = RED;</span><br><span class="line">    Node&lt;K, V&gt; left;</span><br><span class="line">    Node&lt;K, V&gt; right;</span><br><span class="line">    Node&lt;K, V&gt; parent;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(K key, V value, Node&lt;K, V&gt; parent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">int</span> hash = key == <span class="keyword">null</span> ? <span class="number">0</span> : key.hashCode();</span><br><span class="line">        <span class="keyword">this</span>.hash = hash ^ (hash &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.parent = parent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasTwoChildren</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> left != <span class="keyword">null</span> &amp;&amp; right != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLeftChild</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span> == parent.left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isRightChild</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> parent != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span> == parent.right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node&lt;K, V&gt; <span class="title">sibling</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isLeftChild()) &#123;</span><br><span class="line">            <span class="keyword">return</span> parent.right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isRightChild()) &#123;</span><br><span class="line">            <span class="keyword">return</span> parent.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Node_"</span> + key + <span class="string">"_"</span> + value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºèŠ‚ç‚¹"><a href="#åˆ›å»ºèŠ‚ç‚¹" class="headerlink" title="åˆ›å»ºèŠ‚ç‚¹"></a>åˆ›å»ºèŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Node&lt;K, V&gt; <span class="title">createNode</span><span class="params">(K key, V value, Node&lt;K, V&gt; parent)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Node&lt;&gt;(key, value, parent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="nodeå‡½æ•°æŸ¥æ‰¾èŠ‚ç‚¹"><a href="#nodeå‡½æ•°æŸ¥æ‰¾èŠ‚ç‚¹" class="headerlink" title="nodeå‡½æ•°æŸ¥æ‰¾èŠ‚ç‚¹"></a>nodeå‡½æ•°æŸ¥æ‰¾èŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">node</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K, V&gt; root = table[index(key)];</span><br><span class="line">    <span class="keyword">return</span> root == <span class="keyword">null</span> ? <span class="keyword">null</span> : node(root, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">node</span><span class="params">(Node&lt;K, V&gt; node, K k1)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h1 = hash(k1);</span><br><span class="line">    <span class="comment">// å­˜å‚¨æŸ¥æ‰¾ç»“æœ</span></span><br><span class="line">    Node&lt;K, V&gt; result = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">        K k2 = node.key;</span><br><span class="line">        <span class="keyword">int</span> h2 = node.hash;</span><br><span class="line">        <span class="comment">// å…ˆæ¯”è¾ƒå“ˆå¸Œå€¼</span></span><br><span class="line">        <span class="keyword">if</span> (h1 &gt; h2) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (h1 &lt; h2) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Objects.equals(k1, k2)) &#123;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k1 != <span class="keyword">null</span> &amp;&amp; k2 != <span class="keyword">null</span> </span><br><span class="line">                   &amp;&amp; k1 <span class="keyword">instanceof</span> Comparable</span><br><span class="line">                   &amp;&amp; k1.getClass() == k2.getClass()</span><br><span class="line">                   &amp;&amp; (cmp = ((Comparable)k1).compareTo(k2)) != <span class="number">0</span>) &#123;</span><br><span class="line">            node = cmp &gt; <span class="number">0</span> ? node.right : node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.right != <span class="keyword">null</span> &amp;&amp; (result = node(node.right, k1)) != <span class="keyword">null</span>) &#123; </span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// åªèƒ½å¾€å·¦è¾¹æ‰¾</span></span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Hashæ·»åŠ -put-K-key-V-value"><a href="#Hashæ·»åŠ -put-K-key-V-value" class="headerlink" title="Hashæ·»åŠ  put(K key, V value)"></a>Hashæ·»åŠ  put(K key, V value)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    resize();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> index = index(key);</span><br><span class="line">    <span class="comment">// å–å‡ºindexä½ç½®çš„çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    Node&lt;K, V&gt; root = table[index];</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        root = createNode(key, value, <span class="keyword">null</span>);</span><br><span class="line">        table[index] = root;</span><br><span class="line">        size++;</span><br><span class="line">        fixAfterPut(root);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ æ–°çš„èŠ‚ç‚¹åˆ°çº¢é»‘æ ‘ä¸Šé¢</span></span><br><span class="line">    Node&lt;K, V&gt; parent = root;</span><br><span class="line">    Node&lt;K, V&gt; node = root;</span><br><span class="line">    <span class="keyword">int</span> cmp = <span class="number">0</span>;</span><br><span class="line">    K k1 = key;</span><br><span class="line">    <span class="keyword">int</span> h1 = hash(k1);</span><br><span class="line">    Node&lt;K, V&gt; result = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">boolean</span> searched = <span class="keyword">false</span>; <span class="comment">// æ˜¯å¦å·²ç»æœç´¢è¿‡è¿™ä¸ªkey</span></span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        parent = node;</span><br><span class="line">        K k2 = node.key;</span><br><span class="line">        <span class="keyword">int</span> h2 = node.hash;</span><br><span class="line">        <span class="keyword">if</span> (h1 &gt; h2) &#123;</span><br><span class="line">            cmp = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (h1 &lt; h2) &#123;</span><br><span class="line">            cmp = -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Objects.equals(k1, k2)) &#123;</span><br><span class="line">            cmp = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k1 != <span class="keyword">null</span> &amp;&amp; k2 != <span class="keyword">null</span> </span><br><span class="line">                   &amp;&amp; k1 <span class="keyword">instanceof</span> Comparable</span><br><span class="line">                   &amp;&amp; k1.getClass() == k2.getClass()</span><br><span class="line">                   &amp;&amp; (cmp = ((Comparable)k1).compareTo(k2)) != <span class="number">0</span>) &#123;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (searched) &#123; <span class="comment">// å·²ç»æ‰«æäº†</span></span><br><span class="line">            cmp = System.identityHashCode(k1) - System.identityHashCode(k2);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// searched == false; è¿˜æ²¡æœ‰æ‰«æï¼Œç„¶åå†æ ¹æ®å†…å­˜åœ°å€å¤§å°å†³å®šå·¦å³</span></span><br><span class="line">            <span class="keyword">if</span> ((node.left != <span class="keyword">null</span> &amp;&amp; (result = node(node.left, k1)) != <span class="keyword">null</span>)</span><br><span class="line">                || (node.right != <span class="keyword">null</span> &amp;&amp; (result = node(node.right, k1)) != <span class="keyword">null</span>)) &#123;</span><br><span class="line">                <span class="comment">// å·²ç»å­˜åœ¨è¿™ä¸ªkey</span></span><br><span class="line">                node = result;</span><br><span class="line">                cmp = <span class="number">0</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// ä¸å­˜åœ¨è¿™ä¸ªkey</span></span><br><span class="line">                searched = <span class="keyword">true</span>;</span><br><span class="line">                cmp = System.identityHashCode(k1) - System.identityHashCode(k2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// ç›¸ç­‰</span></span><br><span class="line">            V oldValue = node.value;</span><br><span class="line">            node.key = key;</span><br><span class="line">            node.value = value;</span><br><span class="line">            node.hash = h1;</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (node != <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœ‹çœ‹æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹çš„å“ªä¸ªä½ç½®</span></span><br><span class="line">    Node&lt;K, V&gt; newNode = createNode(key, value, parent);</span><br><span class="line">    <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        parent.right = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent.left = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    size++;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–°æ·»åŠ èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">    fixAfterPut(newNode);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Hashæ·»åŠ åä¿®å¤çº¢é»‘æ ‘"><a href="#Hashæ·»åŠ åä¿®å¤çº¢é»‘æ ‘" class="headerlink" title="Hashæ·»åŠ åä¿®å¤çº¢é»‘æ ‘"></a>Hashæ·»åŠ åä¿®å¤çº¢é»‘æ ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fixAfterPut</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">    Node&lt;K, V&gt; parent = node.parent;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ çš„æ˜¯æ ¹èŠ‚ç‚¹ æˆ–è€… ä¸Šæº¢åˆ°è¾¾äº†æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="keyword">null</span>) &#123;</span><br><span class="line">        black(node);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">if</span> (isBlack(parent)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å”çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    Node&lt;K, V&gt; uncle = parent.sibling();</span><br><span class="line">    <span class="comment">// ç¥–çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    Node&lt;K, V&gt; grand = red(parent.parent);</span><br><span class="line">    <span class="keyword">if</span> (isRed(uncle)) &#123; <span class="comment">// å”çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ã€Bæ ‘èŠ‚ç‚¹ä¸Šæº¢ã€‘</span></span><br><span class="line">        black(parent);</span><br><span class="line">        black(uncle);</span><br><span class="line">        <span class="comment">// æŠŠç¥–çˆ¶èŠ‚ç‚¹å½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹</span></span><br><span class="line">        fixAfterPut(grand);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å”çˆ¶èŠ‚ç‚¹ä¸æ˜¯çº¢è‰²</span></span><br><span class="line">    <span class="keyword">if</span> (parent.isLeftChild()) &#123; <span class="comment">// L</span></span><br><span class="line">        <span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// LL</span></span><br><span class="line">            black(parent);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// LR</span></span><br><span class="line">            black(node);</span><br><span class="line">            rotateLeft(parent);</span><br><span class="line">        &#125;</span><br><span class="line">        rotateRight(grand);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// R</span></span><br><span class="line">        <span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// RL</span></span><br><span class="line">            black(node);</span><br><span class="line">            rotateRight(parent);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// RR</span></span><br><span class="line">            black(parent);</span><br><span class="line">        &#125;</span><br><span class="line">        rotateLeft(grand);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Hashåˆ é™¤-keyã€èŠ‚ç‚¹"><a href="#Hashåˆ é™¤-keyã€èŠ‚ç‚¹" class="headerlink" title="Hashåˆ é™¤(keyã€èŠ‚ç‚¹)"></a>Hashåˆ é™¤(keyã€èŠ‚ç‚¹)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="comment">// åˆ é™¤key</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> remove(node(key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> V <span class="title">remove</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    Node&lt;K, V&gt; willNode = node;</span><br><span class="line"></span><br><span class="line">    size--;</span><br><span class="line"></span><br><span class="line">    V oldValue = node.value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (node.hasTwoChildren()) &#123; <span class="comment">// åº¦ä¸º2çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// æ‰¾åˆ°åç»§èŠ‚ç‚¹</span></span><br><span class="line">        Node&lt;K, V&gt; s = successor(node);</span><br><span class="line">        <span class="comment">// ç”¨åç»§èŠ‚ç‚¹çš„å€¼è¦†ç›–åº¦ä¸º2çš„èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">        node.key = s.key;</span><br><span class="line">        node.value = s.value;</span><br><span class="line">        node.hash = s.hash;</span><br><span class="line">        <span class="comment">// åˆ é™¤åç»§èŠ‚ç‚¹</span></span><br><span class="line">        node = s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤nodeèŠ‚ç‚¹ï¼ˆnodeçš„åº¦å¿…ç„¶æ˜¯1æˆ–è€…0ï¼‰</span></span><br><span class="line">    Node&lt;K, V&gt; replacement = node.left != <span class="keyword">null</span> ? node.left : node.right;</span><br><span class="line">    <span class="keyword">int</span> index = index(node);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (replacement != <span class="keyword">null</span>) &#123; <span class="comment">// nodeæ˜¯åº¦ä¸º1çš„èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// æ›´æ”¹parent</span></span><br><span class="line">        replacement.parent = node.parent;</span><br><span class="line">        <span class="comment">// æ›´æ”¹parentçš„leftã€rightçš„æŒ‡å‘</span></span><br><span class="line">        <span class="keyword">if</span> (node.parent == <span class="keyword">null</span>) &#123; <span class="comment">// nodeæ˜¯åº¦ä¸º1çš„èŠ‚ç‚¹å¹¶ä¸”æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">            table[index] = replacement;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node == node.parent.left) &#123;</span><br><span class="line">            node.parent.left = replacement;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// node == node.parent.right</span></span><br><span class="line">            node.parent.right = replacement;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ é™¤èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">        fixAfterRemove(replacement);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.parent == <span class="keyword">null</span>) &#123; <span class="comment">// nodeæ˜¯å¶å­èŠ‚ç‚¹å¹¶ä¸”æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        table[index] = <span class="keyword">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// nodeæ˜¯å¶å­èŠ‚ç‚¹ï¼Œä½†ä¸æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (node == node.parent.left) &#123;</span><br><span class="line">            node.parent.left = <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// node == node.parent.right</span></span><br><span class="line">            node.parent.right = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ é™¤èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">        fixAfterRemove(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤ç»™å­ç±»å»å¤„ç†</span></span><br><span class="line">    afterRemove(willNode, node);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Hashåˆ é™¤åä¿®å¤çº¢é»‘æ ‘"><a href="#Hashåˆ é™¤åä¿®å¤çº¢é»‘æ ‘" class="headerlink" title="Hashåˆ é™¤åä¿®å¤çº¢é»‘æ ‘"></a>Hashåˆ é™¤åä¿®å¤çº¢é»‘æ ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fixAfterRemove</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">    <span class="comment">// æˆ–è€… ç”¨ä»¥å–ä»£åˆ é™¤èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">    <span class="keyword">if</span> (isRed(node)) &#123;</span><br><span class="line">        black(node);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node&lt;K, V&gt; parent = node.parent;</span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤çš„æ˜¯é»‘è‰²å¶å­èŠ‚ç‚¹ã€ä¸‹æº¢ã€‘</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è¢«åˆ é™¤çš„nodeæ˜¯å·¦è¿˜æ˜¯å³</span></span><br><span class="line">    <span class="keyword">boolean</span> left = parent.left == <span class="keyword">null</span> || node.isLeftChild();</span><br><span class="line">    Node&lt;K, V&gt; sibling = left ? parent.right : parent.left;</span><br><span class="line">    <span class="keyword">if</span> (left) &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹</span></span><br><span class="line">        <span class="keyword">if</span> (isRed(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">            black(sibling);</span><br><span class="line">            red(parent);</span><br><span class="line">            rotateLeft(parent);</span><br><span class="line">            <span class="comment">// æ›´æ¢å…„å¼Ÿ</span></span><br><span class="line">            sibling = parent.right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…„å¼ŸèŠ‚ç‚¹å¿…ç„¶æ˜¯é»‘è‰²</span></span><br><span class="line">        <span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line">            <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è¦å‘ä¸‹è·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line">            <span class="keyword">boolean</span> parentBlack = isBlack(parent);</span><br><span class="line">            black(parent);</span><br><span class="line">            red(sibling);</span><br><span class="line">            <span class="keyword">if</span> (parentBlack) &#123;</span><br><span class="line">                fixAfterRemove(parent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹è‡³å°‘æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ </span></span><br><span class="line">            <span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿè¦å…ˆæ—‹è½¬</span></span><br><span class="line">            <span class="keyword">if</span> (isBlack(sibling.right)) &#123;</span><br><span class="line">                rotateRight(sibling);</span><br><span class="line">                sibling = parent.right;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            color(sibling, colorOf(parent));</span><br><span class="line">            black(sibling.right);</span><br><span class="line">            black(parent);</span><br><span class="line">            rotateLeft(parent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å³è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹</span></span><br><span class="line">        <span class="keyword">if</span> (isRed(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">            black(sibling);</span><br><span class="line">            red(parent);</span><br><span class="line">            rotateRight(parent);</span><br><span class="line">            <span class="comment">// æ›´æ¢å…„å¼Ÿ</span></span><br><span class="line">            sibling = parent.left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…„å¼ŸèŠ‚ç‚¹å¿…ç„¶æ˜¯é»‘è‰²</span></span><br><span class="line">        <span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line">            <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è¦å‘ä¸‹è·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line">            <span class="keyword">boolean</span> parentBlack = isBlack(parent);</span><br><span class="line">            black(parent);</span><br><span class="line">            red(sibling);</span><br><span class="line">            <span class="keyword">if</span> (parentBlack) &#123;</span><br><span class="line">                fixAfterRemove(parent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹è‡³å°‘æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ </span></span><br><span class="line">            <span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿè¦å…ˆæ—‹è½¬</span></span><br><span class="line">            <span class="keyword">if</span> (isBlack(sibling.left)) &#123;</span><br><span class="line">                rotateLeft(sibling);</span><br><span class="line">                sibling = parent.left;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            color(sibling, colorOf(parent));</span><br><span class="line">            black(sibling.left);</span><br><span class="line">            black(parent);</span><br><span class="line">            rotateRight(parent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="çº¢é»‘æ ‘åç»§èŠ‚ç‚¹"><a href="#çº¢é»‘æ ‘åç»§èŠ‚ç‚¹" class="headerlink" title="çº¢é»‘æ ‘åç»§èŠ‚ç‚¹"></a>çº¢é»‘æ ‘åç»§èŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">successor</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‰é©±èŠ‚ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­ï¼ˆright.left.left.left....ï¼‰</span></span><br><span class="line">    Node&lt;K, V&gt; p = node.right;</span><br><span class="line">    <span class="keyword">if</span> (p != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (p.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»çˆ¶èŠ‚ç‚¹ã€ç¥–çˆ¶èŠ‚ç‚¹ä¸­å¯»æ‰¾å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (node.parent != <span class="keyword">null</span> &amp;&amp; node == node.parent.right) &#123;</span><br><span class="line">        node = node.parent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> node.parent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HashæŸ¥æ‰¾ï¼ˆkeyã€vauleï¼‰"><a href="#HashæŸ¥æ‰¾ï¼ˆkeyã€vauleï¼‰" class="headerlink" title="HashæŸ¥æ‰¾ï¼ˆkeyã€vauleï¼‰"></a>HashæŸ¥æ‰¾ï¼ˆkeyã€vauleï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="comment">// å¾—åˆ°key</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K, V&gt; node = node(key);</span><br><span class="line">    <span class="keyword">return</span> node != <span class="keyword">null</span> ? node.value : <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsKey</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> node(key) != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    Queue&lt;Node&lt;K, V&gt;&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; table.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (table[i] == <span class="keyword">null</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        queue.offer(table[i]);</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            Node&lt;K, V&gt; node = queue.poll();</span><br><span class="line">            <span class="keyword">if</span> (Objects.equals(value, node.value)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.offer(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.offer(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Hashæ‰©å®¹"><a href="#Hashæ‰©å®¹" class="headerlink" title="Hashæ‰©å®¹"></a>Hashæ‰©å®¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è£…å¡«å› å­ &lt;= 0.75</span></span><br><span class="line">    <span class="keyword">if</span> (size / table.length &lt;= DEFAULT_LOAD_FACTOR) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    Node&lt;K, V&gt;[] oldTable = table;</span><br><span class="line">    table = <span class="keyword">new</span> Node[oldTable.length &lt;&lt; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    Queue&lt;Node&lt;K, V&gt;&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; oldTable.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (oldTable[i] == <span class="keyword">null</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        queue.offer(oldTable[i]);</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            Node&lt;K, V&gt; node = queue.poll();</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.offer(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                queue.offer(node.right);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æŒªåŠ¨ä»£ç å¾—æ”¾åˆ°æœ€åé¢</span></span><br><span class="line">            moveNode(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç§»åŠ¨èŠ‚ç‚¹"><a href="#ç§»åŠ¨èŠ‚ç‚¹" class="headerlink" title="ç§»åŠ¨èŠ‚ç‚¹"></a>ç§»åŠ¨èŠ‚ç‚¹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">moveNode</span><span class="params">(Node&lt;K, V&gt; newNode)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é‡ç½®</span></span><br><span class="line">    newNode.parent = <span class="keyword">null</span>;</span><br><span class="line">    newNode.left = <span class="keyword">null</span>;</span><br><span class="line">    newNode.right = <span class="keyword">null</span>;</span><br><span class="line">    newNode.color = RED;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> index = index(newNode);</span><br><span class="line">    <span class="comment">// å–å‡ºindexä½ç½®çš„çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    Node&lt;K, V&gt; root = table[index];</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        root = newNode;</span><br><span class="line">        table[index] = root;</span><br><span class="line">        fixAfterPut(root);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ æ–°çš„èŠ‚ç‚¹åˆ°çº¢é»‘æ ‘ä¸Šé¢</span></span><br><span class="line">    Node&lt;K, V&gt; parent = root;</span><br><span class="line">    Node&lt;K, V&gt; node = root;</span><br><span class="line">    <span class="keyword">int</span> cmp = <span class="number">0</span>;</span><br><span class="line">    K k1 = newNode.key;</span><br><span class="line">    <span class="keyword">int</span> h1 = newNode.hash;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        parent = node;</span><br><span class="line">        K k2 = node.key;</span><br><span class="line">        <span class="keyword">int</span> h2 = node.hash;</span><br><span class="line">        <span class="keyword">if</span> (h1 &gt; h2) &#123;</span><br><span class="line">            cmp = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (h1 &lt; h2) &#123;</span><br><span class="line">            cmp = -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k1 != <span class="keyword">null</span> &amp;&amp; k2 != <span class="keyword">null</span> </span><br><span class="line">                   &amp;&amp; k1 <span class="keyword">instanceof</span> Comparable</span><br><span class="line">                   &amp;&amp; k1.getClass() == k2.getClass()</span><br><span class="line">                   &amp;&amp; (cmp = ((Comparable)k1).compareTo(k2)) != <span class="number">0</span>) &#123;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cmp = System.identityHashCode(k1) - System.identityHashCode(k2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (node != <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœ‹çœ‹æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹çš„å“ªä¸ªä½ç½®</span></span><br><span class="line">    newNode.parent = parent;</span><br><span class="line">    <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        parent.right = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent.left = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–°æ·»åŠ èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">    fixAfterPut(newNode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h2><p>åœ¨HashMapçš„åŸºç¡€ä¸Šç»´æŠ¤å…ƒç´ çš„æ·»åŠ é¡ºåºï¼Œä½¿å¾—éå†çš„ç»“æœæ˜¯éµä»æ·»åŠ é¡ºåºçš„</p><p>å‡è®¾æ·»åŠ é¡ºåºæ˜¯ï¼š37ã€21ã€31ã€41ã€97ã€95ã€52ã€42ã€83</p><p><img src="/2020/07/13/å“ˆå¸Œè¡¨/5.png" alt></p><h4 id="LinkedHashMap-â€“-åˆ é™¤æ³¨æ„ç‚¹"><a href="#LinkedHashMap-â€“-åˆ é™¤æ³¨æ„ç‚¹" class="headerlink" title="LinkedHashMap â€“ åˆ é™¤æ³¨æ„ç‚¹"></a>LinkedHashMap â€“ åˆ é™¤æ³¨æ„ç‚¹</h4><p>åˆ é™¤åº¦ä¸º2çš„èŠ‚ç‚¹nodeæ—¶ï¼ˆæ¯”å¦‚åˆ é™¤31ï¼‰</p><p>éœ€è¦æ³¨æ„æ›´æ¢ node ä¸ å‰é©±/åç»§èŠ‚ç‚¹çš„è¿æ¥ä½ç½®</p><p><img src="/2020/07/13/å“ˆå¸Œè¡¨/6.png" alt></p><h4 id="LinkedHashMap-â€“-æ›´æ¢èŠ‚ç‚¹çš„è¿æ¥ä½ç½®"><a href="#LinkedHashMap-â€“-æ›´æ¢èŠ‚ç‚¹çš„è¿æ¥ä½ç½®" class="headerlink" title="LinkedHashMap â€“ æ›´æ¢èŠ‚ç‚¹çš„è¿æ¥ä½ç½®"></a>LinkedHashMap â€“ æ›´æ¢èŠ‚ç‚¹çš„è¿æ¥ä½ç½®</h4><p><img src="/2020/07/13/å“ˆå¸Œè¡¨/7.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº¤æ¢prev</span></span><br><span class="line">LinkedNode&lt;K, V&gt; tmp = node1.prev;</span><br><span class="line">node1.prev = node2.prev;</span><br><span class="line">node2.prev = tmp;</span><br><span class="line"><span class="keyword">if</span> (node1.prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">    first = node1;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    node1.prev.next = node1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (node2.prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">    first = node2;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    node2.prev.next = node2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤æ¢next</span></span><br><span class="line">tmp = node1.next;</span><br><span class="line">node1.next = node2.next;</span><br><span class="line">node2.next = tmp;</span><br><span class="line"><span class="keyword">if</span> (node1.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">    last = node1;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    node1.next.prev = node1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (node2.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">    last = node2;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    node2.next.prev = node2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="LinkedHashMapä»£ç å®ç°"><a href="#LinkedHashMapä»£ç å®ç°" class="headerlink" title="LinkedHashMapä»£ç å®ç°"></a>LinkedHashMapä»£ç å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> LinkedNode&lt;K, V&gt; first;</span><br><span class="line"><span class="keyword">private</span> LinkedNode&lt;K, V&gt; last;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>.clear();</span><br><span class="line">first = <span class="keyword">null</span>;</span><br><span class="line">last = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">LinkedNode&lt;K, V&gt; node = first;</span><br><span class="line"><span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (Objects.equals(value, node.value)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">node = node.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">traversal</span><span class="params">(Visitor&lt;K, V&gt; visitor)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (visitor == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">LinkedNode&lt;K, V&gt; node = first;</span><br><span class="line"><span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (visitor.visit(node.key, node.value)) <span class="keyword">return</span>;</span><br><span class="line">node = node.next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;K, V&gt; willNode, Node&lt;K, V&gt; removedNode)</span> </span>&#123;</span><br><span class="line">LinkedNode&lt;K, V&gt; node1 = (LinkedNode&lt;K, V&gt;) willNode;</span><br><span class="line">LinkedNode&lt;K, V&gt; node2 = (LinkedNode&lt;K, V&gt;) removedNode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (node1 != node2) &#123;</span><br><span class="line"><span class="comment">// äº¤æ¢linkedWillNodeå’ŒlinkedRemovedNodeåœ¨é“¾è¡¨ä¸­çš„ä½ç½®</span></span><br><span class="line"><span class="comment">// äº¤æ¢prev</span></span><br><span class="line">LinkedNode&lt;K, V&gt; tmp = node1.prev;</span><br><span class="line">node1.prev = node2.prev;</span><br><span class="line">node2.prev = tmp;</span><br><span class="line"><span class="keyword">if</span> (node1.prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">first = node1;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">node1.prev.next = node1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (node2.prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">first = node2;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">node2.prev.next = node2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤æ¢next</span></span><br><span class="line">tmp = node1.next;</span><br><span class="line">node1.next = node2.next;</span><br><span class="line">node2.next = tmp;</span><br><span class="line"><span class="keyword">if</span> (node1.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">last = node1;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">node1.next.prev = node1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (node2.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">last = node2;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">node2.next.prev = node2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkedNode&lt;K, V&gt; prev = node2.prev;</span><br><span class="line">LinkedNode&lt;K, V&gt; next = node2.next;</span><br><span class="line"><span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">first = next;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">prev.next = next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (next == <span class="keyword">null</span>) &#123;</span><br><span class="line">last = prev;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">next.prev = prev;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> Node&lt;K, V&gt; <span class="title">createNode</span><span class="params">(K key, V value, Node&lt;K, V&gt; parent)</span> </span>&#123;</span><br><span class="line">LinkedNode node = <span class="keyword">new</span> LinkedNode(key, value, parent);</span><br><span class="line"><span class="keyword">if</span> (first == <span class="keyword">null</span>) &#123;</span><br><span class="line">first = last = node;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">last.next = node;</span><br><span class="line">node.prev = last;</span><br><span class="line">last = node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedNode</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">Node</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">LinkedNode&lt;K, V&gt; prev;</span><br><span class="line">LinkedNode&lt;K, V&gt; next;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedNode</span><span class="params">(K key, V value, Node&lt;K, V&gt; parent)</span> </span>&#123;</span><br><span class="line"><span class="keyword">super</span>(key, value, parent);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰&quot;&gt;&lt;a href=&quot;#å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰&quot;&gt;&lt;/a&gt;å“ˆå¸Œè¡¨ï¼ˆHashTableï¼‰&lt;/h1&gt;&lt;h2 id=&quot;å…ˆæ¥åˆ†æTreeMapï¼ˆï¼‰&quot;&gt;&lt;a
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ˜ å°„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%98%A0%E5%B0%84/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="çº¢é»‘æ ‘" scheme="http://yoursite.com/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
    
      <category term="æ˜ å°„" scheme="http://yoursite.com/tags/%E6%98%A0%E5%B0%84/"/>
    
      <category term="å“ˆå¸Œè¡¨" scheme="http://yoursite.com/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    
      <category term="Hash" scheme="http://yoursite.com/tags/Hash/"/>
    
  </entry>
  
  <entry>
    <title>æ˜ å°„</title>
    <link href="http://yoursite.com/2020/07/13/%E6%98%A0%E5%B0%84/"/>
    <id>http://yoursite.com/2020/07/13/æ˜ å°„/</id>
    <published>2020-07-13T06:23:56.000Z</published>
    <updated>2020-07-14T08:44:51.547Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ˜ å°„ï¼ˆMapï¼‰"><a href="#æ˜ å°„ï¼ˆMapï¼‰" class="headerlink" title="æ˜ å°„ï¼ˆMapï¼‰"></a>æ˜ å°„ï¼ˆMapï¼‰</h1><p>Map åœ¨æœ‰äº›ç¼–ç¨‹è¯­è¨€ä¸­ä¹Ÿå«åšå­—å…¸ï¼ˆdictionaryï¼Œæ¯”å¦‚ Pythonã€Objective-Cã€Swift ç­‰ï¼‰</p><p><img src="/2020/07/13/æ˜ å°„/1.png" alt></p><p><strong>Map çš„æ¯ä¸€ä¸ª key æ˜¯å”¯ä¸€çš„</strong></p><h2 id="Mapçš„æ¥å£è®¾è®¡"><a href="#Mapçš„æ¥å£è®¾è®¡" class="headerlink" title="Mapçš„æ¥å£è®¾è®¡"></a>Mapçš„æ¥å£è®¾è®¡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function">V <span class="title">put</span><span class="params">(K key, V value)</span></span>;</span><br><span class="line"><span class="function">V <span class="title">get</span><span class="params">(K key)</span></span>;</span><br><span class="line"><span class="function">V <span class="title">remove</span><span class="params">(K key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">containsKey</span><span class="params">(K key)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(V value)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">traversal</span><span class="params">(Visitor&lt;K, V&gt; visitor)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Visitor</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">boolean</span> stop;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">visit</span><span class="params">(K key, V value)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼ Setï¼ŒMap å¯ä»¥ç›´æ¥åˆ©ç”¨ä¹‹å‰å­¦ä¹ çš„é“¾è¡¨ã€äºŒå‰æœç´¢æ ‘ï¼ˆAVLæ ‘ã€çº¢é»‘æ ‘ï¼‰ç­‰æ•°æ®ç»“æ„æ¥å®ç°</p><h2 id="Mapåˆ©ç”¨çº¢é»‘æ ‘å®ç°"><a href="#Mapåˆ©ç”¨çº¢é»‘æ ‘å®ç°" class="headerlink" title="Mapåˆ©ç”¨çº¢é»‘æ ‘å®ç°"></a>Mapåˆ©ç”¨çº¢é»‘æ ‘å®ç°</h2><a href="/2020/07/12/çº¢é»‘æ ‘/" title="çº¢é»‘æ ‘çš„å®ç°">çº¢é»‘æ ‘çš„å®ç°</a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> RED = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> BLACK = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"><span class="keyword">private</span> Node&lt;K, V&gt; root;</span><br><span class="line"><span class="keyword">private</span> Comparator&lt;K&gt; comparator;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeMap</span><span class="params">(Comparator&lt;K&gt; comparator)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.comparator = comparator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">root = <span class="keyword">null</span>;</span><br><span class="line">size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">keyNotNullCheck(key);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">root = <span class="keyword">new</span> Node&lt;&gt;(key, value, <span class="keyword">null</span>);</span><br><span class="line">size++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°æ·»åŠ èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">afterPut(root);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ çš„ä¸æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// æ‰¾åˆ°çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;K, V&gt; parent = root;</span><br><span class="line">Node&lt;K, V&gt; node = root;</span><br><span class="line"><span class="keyword">int</span> cmp = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">cmp = compare(key, node.key);</span><br><span class="line">parent = node;</span><br><span class="line"><span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">node = node.right;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">node = node.left;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// ç›¸ç­‰</span></span><br><span class="line">node.key = key;</span><br><span class="line">V oldValue = node.value;</span><br><span class="line">node.value = value;</span><br><span class="line"><span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">while</span> (node != <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// çœ‹çœ‹æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹çš„å“ªä¸ªä½ç½®</span></span><br><span class="line">Node&lt;K, V&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(key, value, parent);</span><br><span class="line"><span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">parent.right = newNode;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">parent.left = newNode;</span><br><span class="line">&#125;</span><br><span class="line">size++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°æ·»åŠ èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">afterPut(newNode);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">Node&lt;K, V&gt; node = node(key);</span><br><span class="line"><span class="keyword">return</span> node != <span class="keyword">null</span> ? node.value : <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> remove(node(key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsKey</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> node(key) != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">Queue&lt;Node&lt;K, V&gt;&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">queue.offer(root);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">Node&lt;K, V&gt; node = queue.poll();</span><br><span class="line"><span class="keyword">if</span> (valEquals(value, node.value)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">queue.offer(node.left);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (node.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">queue.offer(node.right);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">traversal</span><span class="params">(Visitor&lt;K, V&gt; visitor)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (visitor == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">traversal(root, visitor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">traversal</span><span class="params">(Node&lt;K, V&gt; node, Visitor&lt;K, V&gt; visitor)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (node == <span class="keyword">null</span> || visitor.stop) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">traversal(node.left, visitor);</span><br><span class="line"><span class="keyword">if</span> (visitor.stop) <span class="keyword">return</span>;</span><br><span class="line">visitor.visit(node.key, node.value);</span><br><span class="line">traversal(node.right, visitor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">valEquals</span><span class="params">(V v1, V v2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 == <span class="keyword">null</span> ? v2 == <span class="keyword">null</span> : v1.equals(v2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> V <span class="title">remove</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">size--;</span><br><span class="line"></span><br><span class="line">V oldValue = node.value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (node.hasTwoChildren()) &#123; <span class="comment">// åº¦ä¸º2çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// æ‰¾åˆ°åç»§èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;K, V&gt; s = successor(node);</span><br><span class="line"><span class="comment">// ç”¨åç»§èŠ‚ç‚¹çš„å€¼è¦†ç›–åº¦ä¸º2çš„èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">node.key = s.key;</span><br><span class="line">node.value = s.value;</span><br><span class="line"><span class="comment">// åˆ é™¤åç»§èŠ‚ç‚¹</span></span><br><span class="line">node = s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤nodeèŠ‚ç‚¹ï¼ˆnodeçš„åº¦å¿…ç„¶æ˜¯1æˆ–è€…0ï¼‰</span></span><br><span class="line">Node&lt;K, V&gt; replacement = node.left != <span class="keyword">null</span> ? node.left : node.right;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (replacement != <span class="keyword">null</span>) &#123; <span class="comment">// nodeæ˜¯åº¦ä¸º1çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// æ›´æ”¹parent</span></span><br><span class="line">replacement.parent = node.parent;</span><br><span class="line"><span class="comment">// æ›´æ”¹parentçš„leftã€rightçš„æŒ‡å‘</span></span><br><span class="line"><span class="keyword">if</span> (node.parent == <span class="keyword">null</span>) &#123; <span class="comment">// nodeæ˜¯åº¦ä¸º1çš„èŠ‚ç‚¹å¹¶ä¸”æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = replacement;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (node == node.parent.left) &#123;</span><br><span class="line">node.parent.left = replacement;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// node == node.parent.right</span></span><br><span class="line">node.parent.right = replacement;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">afterRemove(replacement);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.parent == <span class="keyword">null</span>) &#123; <span class="comment">// nodeæ˜¯å¶å­èŠ‚ç‚¹å¹¶ä¸”æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">root = <span class="keyword">null</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// nodeæ˜¯å¶å­èŠ‚ç‚¹ï¼Œä½†ä¸æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (node == node.parent.left) &#123;</span><br><span class="line">node.parent.left = <span class="keyword">null</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// node == node.parent.right</span></span><br><span class="line">node.parent.right = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤èŠ‚ç‚¹ä¹‹åçš„å¤„ç†</span></span><br><span class="line">afterRemove(node);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="comment">// å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line"><span class="comment">// æˆ–è€… ç”¨ä»¥å–ä»£åˆ é™¤èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line"><span class="keyword">if</span> (isRed(node)) &#123;</span><br><span class="line">black(node);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node&lt;K, V&gt; parent = node.parent;</span><br><span class="line"><span class="keyword">if</span> (parent == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤çš„æ˜¯é»‘è‰²å¶å­èŠ‚ç‚¹ã€ä¸‹æº¢ã€‘</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­è¢«åˆ é™¤çš„nodeæ˜¯å·¦è¿˜æ˜¯å³</span></span><br><span class="line"><span class="keyword">boolean</span> left = parent.left == <span class="keyword">null</span> || node.isLeftChild();</span><br><span class="line">Node&lt;K, V&gt; sibling = left ? parent.right : parent.left;</span><br><span class="line"><span class="keyword">if</span> (left) &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹</span></span><br><span class="line"><span class="keyword">if</span> (isRed(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">black(sibling);</span><br><span class="line">red(parent);</span><br><span class="line">rotateLeft(parent);</span><br><span class="line"><span class="comment">// æ›´æ¢å…„å¼Ÿ</span></span><br><span class="line">sibling = parent.right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…„å¼ŸèŠ‚ç‚¹å¿…ç„¶æ˜¯é»‘è‰²</span></span><br><span class="line"><span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line"><span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è¦å‘ä¸‹è·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line"><span class="keyword">boolean</span> parentBlack = isBlack(parent);</span><br><span class="line">black(parent);</span><br><span class="line">red(sibling);</span><br><span class="line"><span class="keyword">if</span> (parentBlack) &#123;</span><br><span class="line">afterRemove(parent);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹è‡³å°‘æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ </span></span><br><span class="line"><span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿè¦å…ˆæ—‹è½¬</span></span><br><span class="line"><span class="keyword">if</span> (isBlack(sibling.right)) &#123;</span><br><span class="line">rotateRight(sibling);</span><br><span class="line">sibling = parent.right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">color(sibling, colorOf(parent));</span><br><span class="line">black(sibling.right);</span><br><span class="line">black(parent);</span><br><span class="line">rotateLeft(parent);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å³è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹</span></span><br><span class="line"><span class="keyword">if</span> (isRed(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">black(sibling);</span><br><span class="line">red(parent);</span><br><span class="line">rotateRight(parent);</span><br><span class="line"><span class="comment">// æ›´æ¢å…„å¼Ÿ</span></span><br><span class="line">sibling = parent.left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…„å¼ŸèŠ‚ç‚¹å¿…ç„¶æ˜¯é»‘è‰²</span></span><br><span class="line"><span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line"><span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è¦å‘ä¸‹è·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line"><span class="keyword">boolean</span> parentBlack = isBlack(parent);</span><br><span class="line">black(parent);</span><br><span class="line">red(sibling);</span><br><span class="line"><span class="keyword">if</span> (parentBlack) &#123;</span><br><span class="line">afterRemove(parent);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹è‡³å°‘æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ </span></span><br><span class="line"><span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿè¦å…ˆæ—‹è½¬</span></span><br><span class="line"><span class="keyword">if</span> (isBlack(sibling.left)) &#123;</span><br><span class="line">rotateLeft(sibling);</span><br><span class="line">sibling = parent.left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">color(sibling, colorOf(parent));</span><br><span class="line">black(sibling.left);</span><br><span class="line">black(parent);</span><br><span class="line">rotateRight(parent);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">predecessor</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰é©±èŠ‚ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­ï¼ˆleft.right.right.right....ï¼‰</span></span><br><span class="line">Node&lt;K, V&gt; p = node.left;</span><br><span class="line"><span class="keyword">if</span> (p != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">while</span> (p.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">p = p.right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»çˆ¶èŠ‚ç‚¹ã€ç¥–çˆ¶èŠ‚ç‚¹ä¸­å¯»æ‰¾å‰é©±èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span> (node.parent != <span class="keyword">null</span> &amp;&amp; node == node.parent.left) &#123;</span><br><span class="line">node = node.parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// node.parent == null</span></span><br><span class="line"><span class="comment">// node == node.parent.right</span></span><br><span class="line"><span class="keyword">return</span> node.parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">successor</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰é©±èŠ‚ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­ï¼ˆright.left.left.left....ï¼‰</span></span><br><span class="line">Node&lt;K, V&gt; p = node.right;</span><br><span class="line"><span class="keyword">if</span> (p != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">while</span> (p.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">p = p.left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»çˆ¶èŠ‚ç‚¹ã€ç¥–çˆ¶èŠ‚ç‚¹ä¸­å¯»æ‰¾å‰é©±èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span> (node.parent != <span class="keyword">null</span> &amp;&amp; node == node.parent.right) &#123;</span><br><span class="line">node = node.parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> node.parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">node</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">Node&lt;K, V&gt; node = root;</span><br><span class="line"><span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> cmp = compare(key, node.key);</span><br><span class="line"><span class="keyword">if</span> (cmp == <span class="number">0</span>) <span class="keyword">return</span> node;</span><br><span class="line"><span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">node = node.right;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// cmp &lt; 0</span></span><br><span class="line">node = node.left;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">afterPut</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line">Node&lt;K, V&gt; parent = node.parent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ çš„æ˜¯æ ¹èŠ‚ç‚¹ æˆ–è€… ä¸Šæº¢åˆ°è¾¾äº†æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (parent == <span class="keyword">null</span>) &#123;</span><br><span class="line">black(node);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line"><span class="keyword">if</span> (isBlack(parent)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;K, V&gt; uncle = parent.sibling();</span><br><span class="line"><span class="comment">// ç¥–çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;K, V&gt; grand = red(parent.parent);</span><br><span class="line"><span class="keyword">if</span> (isRed(uncle)) &#123; <span class="comment">// å”çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ã€Bæ ‘èŠ‚ç‚¹ä¸Šæº¢ã€‘</span></span><br><span class="line">black(parent);</span><br><span class="line">black(uncle);</span><br><span class="line"><span class="comment">// æŠŠç¥–çˆ¶èŠ‚ç‚¹å½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹</span></span><br><span class="line">afterPut(grand);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹ä¸æ˜¯çº¢è‰²</span></span><br><span class="line"><span class="keyword">if</span> (parent.isLeftChild()) &#123; <span class="comment">// L</span></span><br><span class="line"><span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// LL</span></span><br><span class="line">black(parent);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// LR</span></span><br><span class="line">black(node);</span><br><span class="line">rotateLeft(parent);</span><br><span class="line">&#125;</span><br><span class="line">rotateRight(grand);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// R</span></span><br><span class="line"><span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// RL</span></span><br><span class="line">black(node);</span><br><span class="line">rotateRight(parent);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// RR</span></span><br><span class="line">black(parent);</span><br><span class="line">&#125;</span><br><span class="line">rotateLeft(grand);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rotateLeft</span><span class="params">(Node&lt;K, V&gt; grand)</span> </span>&#123;</span><br><span class="line">Node&lt;K, V&gt; parent = grand.right;</span><br><span class="line">Node&lt;K, V&gt; child = parent.left;</span><br><span class="line">grand.right = child;</span><br><span class="line">parent.left = grand;</span><br><span class="line">afterRotate(grand, parent, child);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rotateRight</span><span class="params">(Node&lt;K, V&gt; grand)</span> </span>&#123;</span><br><span class="line">Node&lt;K, V&gt; parent = grand.left;</span><br><span class="line">Node&lt;K, V&gt; child = parent.right;</span><br><span class="line">grand.left = child;</span><br><span class="line">parent.right = grand;</span><br><span class="line">afterRotate(grand, parent, child);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">afterRotate</span><span class="params">(Node&lt;K, V&gt; grand, Node&lt;K, V&gt; parent, Node&lt;K, V&gt; child)</span> </span>&#123;</span><br><span class="line"><span class="comment">// è®©parentç§°ä¸ºå­æ ‘çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line">parent.parent = grand.parent;</span><br><span class="line"><span class="keyword">if</span> (grand.isLeftChild()) &#123;</span><br><span class="line">grand.parent.left = parent;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (grand.isRightChild()) &#123;</span><br><span class="line">grand.parent.right = parent;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// grandæ˜¯rootèŠ‚ç‚¹</span></span><br><span class="line">root = parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°childçš„parent</span></span><br><span class="line"><span class="keyword">if</span> (child != <span class="keyword">null</span>) &#123;</span><br><span class="line">child.parent = grand;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°grandçš„parent</span></span><br><span class="line">grand.parent = parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">color</span><span class="params">(Node&lt;K, V&gt; node, <span class="keyword">boolean</span> color)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> node;</span><br><span class="line">node.color = color;</span><br><span class="line"><span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">red</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> color(node, RED);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;K, V&gt; <span class="title">black</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> color(node, BLACK);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">colorOf</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> node == <span class="keyword">null</span> ? BLACK : node.color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isBlack</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> colorOf(node) == BLACK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node&lt;K, V&gt; node)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> colorOf(node) == RED;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(K e1, K e2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (comparator != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> comparator.compare(e1, e2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ((Comparable&lt;K&gt;)e1).compareTo(e2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">keyNotNullCheck</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (key == <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"key must not be null"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">K key;</span><br><span class="line">V value;</span><br><span class="line"><span class="keyword">boolean</span> color = RED;</span><br><span class="line">Node&lt;K, V&gt; left;</span><br><span class="line">Node&lt;K, V&gt; right;</span><br><span class="line">Node&lt;K, V&gt; parent;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(K key, V value, Node&lt;K, V&gt; parent)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.key = key;</span><br><span class="line"><span class="keyword">this</span>.value = value;</span><br><span class="line"><span class="keyword">this</span>.parent = parent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLeaf</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> left == <span class="keyword">null</span> &amp;&amp; right == <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasTwoChildren</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> left != <span class="keyword">null</span> &amp;&amp; right != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLeftChild</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> parent != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span> == parent.left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isRightChild</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> parent != <span class="keyword">null</span> &amp;&amp; <span class="keyword">this</span> == parent.right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node&lt;K, V&gt; <span class="title">sibling</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (isLeftChild()) &#123;</span><br><span class="line"><span class="keyword">return</span> parent.right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isRightChild()) &#123;</span><br><span class="line"><span class="keyword">return</span> parent.left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;æ˜ å°„ï¼ˆMapï¼‰&quot;&gt;&lt;a href=&quot;#æ˜ å°„ï¼ˆMapï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ˜ å°„ï¼ˆMapï¼‰&quot;&gt;&lt;/a&gt;æ˜ å°„ï¼ˆMapï¼‰&lt;/h1&gt;&lt;p&gt;Map åœ¨æœ‰äº›ç¼–ç¨‹è¯­è¨€ä¸­ä¹Ÿå«åšå­—å…¸ï¼ˆdictionaryï¼Œæ¯”å¦‚ Pythonã€Objective-C
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ˜ å°„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%98%A0%E5%B0%84/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="çº¢é»‘æ ‘" scheme="http://yoursite.com/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
    
      <category term="æ˜ å°„" scheme="http://yoursite.com/tags/%E6%98%A0%E5%B0%84/"/>
    
  </entry>
  
  <entry>
    <title>é›†åˆ</title>
    <link href="http://yoursite.com/2020/07/13/%E9%9B%86%E5%90%88/"/>
    <id>http://yoursite.com/2020/07/13/é›†åˆ/</id>
    <published>2020-07-13T06:14:53.000Z</published>
    <updated>2020-07-14T08:43:48.301Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é›†åˆï¼ˆSetï¼‰"><a href="#é›†åˆï¼ˆSetï¼‰" class="headerlink" title="é›†åˆï¼ˆSetï¼‰"></a>é›†åˆï¼ˆSetï¼‰</h1><h2 id="é›†åˆçš„ç‰¹ç‚¹"><a href="#é›†åˆçš„ç‰¹ç‚¹" class="headerlink" title="é›†åˆçš„ç‰¹ç‚¹"></a>é›†åˆçš„ç‰¹ç‚¹</h2><p><strong>ä¸å­˜æ”¾é‡å¤çš„å…ƒç´ ï¼Œå¸¸ç”¨äºå»é‡</strong></p><p>å­˜æ”¾æ–°å¢ IPï¼Œç»Ÿè®¡æ–°å¢ IP é‡</p><p>å­˜æ”¾è¯æ±‡ï¼Œç»Ÿè®¡è¯æ±‡é‡</p><h2 id="é›†åˆæ¥å£å®šä¹‰"><a href="#é›†åˆæ¥å£å®šä¹‰" class="headerlink" title="é›†åˆæ¥å£å®šä¹‰"></a>é›†åˆæ¥å£å®šä¹‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(E element)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(E element)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(E element)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">traversal</span><span class="params">(Visitor&lt;E&gt; visitor)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Visitor</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">boolean</span> stop;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">visit</span><span class="params">(E element)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é›†åˆçš„å†…éƒ¨å®ç°ç›´æ¥åˆ©ç”¨å­¦è¿‡çš„æ•°æ®ç»“æ„å®ç°<strong>ï¼ˆé“¾è¡¨ï¼ŒåŠ¨æ€æ•°ç»„ï¼Œçº¢é»‘æ ‘ã€AVLæ ‘ï¼‰</strong></p><h2 id="é›†åˆåˆ©ç”¨é“¾è¡¨å®ç°"><a href="#é›†åˆåˆ©ç”¨é“¾è¡¨å®ç°" class="headerlink" title="é›†åˆåˆ©ç”¨é“¾è¡¨å®ç°"></a>é›†åˆåˆ©ç”¨é“¾è¡¨å®ç°</h2><a href="/2020/07/11/é“¾è¡¨/" title="é“¾è¡¨çš„å®ç°">é“¾è¡¨çš„å®ç°</a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListSet</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> List&lt;E&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> list.size();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> list.isEmpty();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">list.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> list.contains(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> index = list.indexOf(element);</span><br><span class="line"><span class="keyword">if</span> (index != List.ELEMENT_NOT_FOUND) &#123; <span class="comment">// å­˜åœ¨å°±è¦†ç›–</span></span><br><span class="line">list.set(index, element);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// ä¸å­˜åœ¨å°±æ·»åŠ </span></span><br><span class="line">list.add(element);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> index = list.indexOf(element);</span><br><span class="line"><span class="keyword">if</span> (index != List.ELEMENT_NOT_FOUND) &#123;</span><br><span class="line">list.remove(index);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é›†åˆåˆ©ç”¨çº¢é»‘æ ‘å®ç°"><a href="#é›†åˆåˆ©ç”¨çº¢é»‘æ ‘å®ç°" class="headerlink" title="é›†åˆåˆ©ç”¨çº¢é»‘æ ‘å®ç°"></a>é›†åˆåˆ©ç”¨çº¢é»‘æ ‘å®ç°</h2><a href="/2020/07/12/çº¢é»‘æ ‘/" title="çº¢é»‘æ ‘çš„å®ç°">çº¢é»‘æ ‘çš„å®ç°</a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSet</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"><span class="keyword">private</span> RBTree&lt;E&gt; tree;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeSet</span><span class="params">(Comparator&lt;E&gt; comparator)</span> </span>&#123;</span><br><span class="line">tree = <span class="keyword">new</span> RBTree&lt;&gt;(comparator);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> tree.size();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> tree.isEmpty();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">tree.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> tree.contains(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line">tree.add(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(E element)</span> </span>&#123;</span><br><span class="line">tree.remove(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;é›†åˆï¼ˆSetï¼‰&quot;&gt;&lt;a href=&quot;#é›†åˆï¼ˆSetï¼‰&quot; class=&quot;headerlink&quot; title=&quot;é›†åˆï¼ˆSetï¼‰&quot;&gt;&lt;/a&gt;é›†åˆï¼ˆSetï¼‰&lt;/h1&gt;&lt;h2 id=&quot;é›†åˆçš„ç‰¹ç‚¹&quot;&gt;&lt;a href=&quot;#é›†åˆçš„ç‰¹ç‚¹&quot; class=&quot;headerlink&quot; ti
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="é›†åˆ" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9B%86%E5%90%88/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="é“¾è¡¨" scheme="http://yoursite.com/tags/%E9%93%BE%E8%A1%A8/"/>
    
      <category term="é›†åˆ" scheme="http://yoursite.com/tags/%E9%9B%86%E5%90%88/"/>
    
      <category term="çº¢é»‘æ ‘" scheme="http://yoursite.com/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>çº¢é»‘æ ‘</title>
    <link href="http://yoursite.com/2020/07/12/%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
    <id>http://yoursite.com/2020/07/12/çº¢é»‘æ ‘/</id>
    <published>2020-07-12T05:44:00.000Z</published>
    <updated>2020-07-14T08:43:41.562Z</updated>
    
    <content type="html"><![CDATA[<h1 id="çº¢é»‘æ ‘ï¼ˆRed-Black-Treeï¼‰"><a href="#çº¢é»‘æ ‘ï¼ˆRed-Black-Treeï¼‰" class="headerlink" title="çº¢é»‘æ ‘ï¼ˆRed Black Treeï¼‰"></a>çº¢é»‘æ ‘ï¼ˆRed Black Treeï¼‰</h1><h2 id="ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘"><a href="#ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘"></a>ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘</h2><p>çº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ç§<strong>è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘</strong></p><p>ä»¥å‰ä¹Ÿå«åšå¹³è¡¡äºŒå‰Bæ ‘ï¼ˆSymmetric Binary B-treeï¼‰</p><p>çº¢é»‘æ ‘å¿…é¡»æ»¡è¶³ä»¥ä¸‹ <strong>5 æ¡æ€§è´¨</strong></p><ol><li><p>èŠ‚ç‚¹æ˜¯ <strong>RED</strong> æˆ–è€… <strong>BLACK</strong></p></li><li><p>æ ¹èŠ‚ç‚¹æ˜¯ <strong>BLACK</strong></p></li><li><p>å¶å­èŠ‚ç‚¹ï¼ˆå¤–éƒ¨èŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ï¼‰éƒ½æ˜¯ <strong>BLACK</strong></p></li><li><p><strong>RED</strong> èŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ˜¯ <strong>BLACK</strong></p><p><strong>RED</strong> èŠ‚ç‚¹çš„ parent éƒ½æ˜¯ <strong>BLACK</strong></p><p>ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ 2 ä¸ªè¿ç»­çš„ <strong>RED</strong> èŠ‚ç‚¹</p></li><li><p>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„ <strong>BLACK</strong> èŠ‚ç‚¹</p></li></ol><p><img src="/2020/07/12/çº¢é»‘æ ‘/1.png" alt></p><h2 id="çº¢é»‘æ ‘çš„ç­‰ä»·å˜æ¢"><a href="#çº¢é»‘æ ‘çš„ç­‰ä»·å˜æ¢" class="headerlink" title="çº¢é»‘æ ‘çš„ç­‰ä»·å˜æ¢"></a>çº¢é»‘æ ‘çš„ç­‰ä»·å˜æ¢</h2><p>çº¢é»‘æ ‘ å’Œ 4é˜¶Bæ ‘ï¼ˆ2-3-4æ ‘ï¼‰å…·æœ‰ç­‰ä»·æ€§</p><p><strong>BLACK</strong> èŠ‚ç‚¹ä¸å®ƒçš„ <strong>RED</strong> å­èŠ‚ç‚¹èåˆåœ¨ä¸€èµ·ï¼Œå½¢æˆ1ä¸ªBæ ‘èŠ‚ç‚¹</p><p>çº¢é»‘æ ‘çš„ <strong>BLACK</strong> èŠ‚ç‚¹ä¸ªæ•° ä¸ 4é˜¶Bæ ‘çš„èŠ‚ç‚¹æ€»ä¸ªæ•°ç›¸ç­‰</p><p><strong>æ³¨æ„ï¼šåé¢å±•ç¤ºçš„çº¢é»‘æ ‘éƒ½ä¼šçœç•¥ NULL èŠ‚ç‚¹</strong></p><p><img src="/2020/07/12/çº¢é»‘æ ‘/2.png" alt></p><h2 id="çº¢é»‘æ ‘-vs-2-3-4æ ‘"><a href="#çº¢é»‘æ ‘-vs-2-3-4æ ‘" class="headerlink" title="çº¢é»‘æ ‘ vs 2-3-4æ ‘"></a>çº¢é»‘æ ‘ vs 2-3-4æ ‘</h2><p><img src="/2020/07/12/çº¢é»‘æ ‘/3.png" alt></p><p>å¦‚æœä¸Šå›¾æœ€åº•å±‚çš„ <strong>BLACK</strong> èŠ‚ç‚¹æ˜¯ä¸å­˜åœ¨çš„ï¼Œåœ¨Bæ ‘ä¸­æ˜¯ä»€ä¹ˆæ ·çš„æƒ…å½¢ï¼Ÿ</p><p><strong>æ•´æ£µBæ ‘åªæœ‰1ä¸ªèŠ‚ç‚¹ï¼Œè€Œä¸”æ˜¯è¶…çº§èŠ‚ç‚¹</strong></p><h2 id="ä¸€äº›è¾…åŠ©å‡½æ•°"><a href="#ä¸€äº›è¾…åŠ©å‡½æ•°" class="headerlink" title="ä¸€äº›è¾…åŠ©å‡½æ•°"></a>ä¸€äº›è¾…åŠ©å‡½æ•°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parentï¼šçˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// siblingï¼šå…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// uncleï¼šå”çˆ¶èŠ‚ç‚¹ï¼ˆparent çš„å…„å¼ŸèŠ‚ç‚¹ï¼‰</span></span><br><span class="line"><span class="comment">// grandï¼šç¥–çˆ¶èŠ‚ç‚¹ï¼ˆparent çš„çˆ¶èŠ‚ç‚¹ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šé¢œè‰²</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;E&gt; <span class="title">color</span><span class="params">(Node&lt;E&gt; node, <span class="keyword">boolean</span> color)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span> node;</span><br><span class="line">   ((RBNode&lt;E&gt;)node).color = color;</span><br><span class="line">   <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ“çº¢</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;E&gt; <span class="title">red</span><span class="params">(Node&lt;E&gt; node)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> color(node, RED);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ“é»‘</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node&lt;E&gt; <span class="title">black</span><span class="params">(Node&lt;E&gt; node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> color(node, BLACK);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹é¢œè‰²</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">colorOf</span><span class="params">(Node&lt;E&gt; node)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> node == <span class="keyword">null</span> ? BLACK : ((RBNode&lt;E&gt;)node).color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯é»‘è‰²</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isBlack</span><span class="params">(Node&lt;E&gt; node)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> colorOf(node) == BLACK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯çº¢è‰²</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node&lt;E&gt; node)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> colorOf(node) == RED;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æ˜¯å¦æœ‰å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node&lt;E&gt; <span class="title">sibling</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isLeftChild()) &#123;</span><br><span class="line">        <span class="keyword">return</span> parent.right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isRightChild()) &#123;</span><br><span class="line">        <span class="keyword">return</span> parent.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çº¢é»‘æ ‘çš„æ·»åŠ "><a href="#çº¢é»‘æ ‘çš„æ·»åŠ " class="headerlink" title="çº¢é»‘æ ‘çš„æ·»åŠ "></a>çº¢é»‘æ ‘çš„æ·»åŠ </h2><p>å·²çŸ¥</p><ol><li><p>Bæ ‘ä¸­ï¼Œæ–°å…ƒç´ å¿…å®šæ˜¯æ·»åŠ åˆ°å¶å­èŠ‚ç‚¹ä¸­</p></li><li><p>4é˜¶Bæ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å…ƒç´ ä¸ªæ•° x éƒ½ç¬¦åˆ 1 â‰¤ x â‰¤ 3</p></li></ol><p><strong>å»ºè®®æ–°æ·»åŠ çš„èŠ‚ç‚¹é»˜è®¤ä¸º RED</strong>ï¼Œè¿™æ ·èƒ½å¤Ÿè®©çº¢é»‘æ ‘çš„æ€§è´¨å°½å¿«æ»¡è¶³ï¼ˆæ€§è´¨ 1ã€2ã€3ã€5 éƒ½æ»¡è¶³ï¼Œæ€§è´¨ 4 ä¸ä¸€å®šï¼‰</p><h3 id="æœ‰-4-ç§æƒ…å†µæ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨-4-ï¼šparent-ä¸ºBLACK"><a href="#æœ‰-4-ç§æƒ…å†µæ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨-4-ï¼šparent-ä¸ºBLACK" class="headerlink" title="æœ‰ 4 ç§æƒ…å†µæ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨ 4 ï¼šparent ä¸ºBLACK"></a>æœ‰ 4 ç§æƒ…å†µæ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨ 4 ï¼šparent ä¸ºBLACK</h3><p>åŒæ ·ä¹Ÿæ»¡è¶³4é˜¶Bæ ‘çš„æ€§è´¨</p><p>å› æ­¤ä¸ç”¨åšä»»ä½•é¢å¤–å¤„ç†</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/4.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line"><span class="keyword">if</span> (isBlack(parent)) <span class="keyword">return</span>;</span><br></pre></td></tr></table></figure><h3 id="æœ‰-8-ç§æƒ…å†µä¸æ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨-4-ï¼šparent-ä¸º-REDï¼ˆ-Double-Red-ï¼‰"><a href="#æœ‰-8-ç§æƒ…å†µä¸æ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨-4-ï¼šparent-ä¸º-REDï¼ˆ-Double-Red-ï¼‰" class="headerlink" title="æœ‰ 8 ç§æƒ…å†µä¸æ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨ 4 ï¼šparent ä¸º REDï¼ˆ Double Red ï¼‰"></a>æœ‰ 8 ç§æƒ…å†µä¸æ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨ 4 ï¼šparent ä¸º <strong>RED</strong>ï¼ˆ <strong>Double</strong> <strong>Red</strong> ï¼‰</h3><p>å…¶ä¸­å‰ 4 ç§å±äºBæ ‘èŠ‚ç‚¹ä¸Šæº¢çš„æƒ…å†µ</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/5.png" alt></p><h4 id="æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-LL-RR"><a href="#æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-LL-RR" class="headerlink" title="æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ LL\RR"></a>æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ LL\RR</h4><p>åˆ¤å®šæ¡ä»¶ï¼šuncle ä¸æ˜¯ <strong>RED</strong></p><p>1.parent æŸ“æˆ <strong>BLACK</strong>ï¼Œgrand æŸ“æˆ <strong>RED</strong></p><p>2.grand è¿›è¡Œå•æ—‹æ“ä½œ</p><p>LLï¼šå³æ—‹è½¬</p><p>RRï¼šå·¦æ—‹è½¬</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/6.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;E&gt; uncle = parent.sibling();</span><br><span class="line"><span class="comment">// ç¥–çˆ¶èŠ‚ç‚¹æŸ“æˆçº¢è‰²</span></span><br><span class="line">Node&lt;E&gt; grand = red(parent.parent);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isRed(uncle)) &#123; <span class="comment">// å”çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ã€Bæ ‘èŠ‚ç‚¹ä¸Šæº¢ã€‘</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹ä¸æ˜¯çº¢è‰²</span></span><br><span class="line"><span class="keyword">if</span> (parent.isLeftChild()) &#123; <span class="comment">// L</span></span><br><span class="line">    <span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// LL</span></span><br><span class="line">        black(parent);</span><br><span class="line">    &#125;</span><br><span class="line">    rotateRight(grand);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// R</span></span><br><span class="line">    <span class="keyword">if</span> (!node.isLeftChild()) &#123; <span class="comment">// RR</span></span><br><span class="line">        black(parent);</span><br><span class="line">    &#125; </span><br><span class="line">    rotateLeft(grand);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-LR-RL"><a href="#æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-LR-RL" class="headerlink" title="æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ LR\RL"></a>æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ LR\RL</h4><p>åˆ¤å®šæ¡ä»¶ï¼šuncle ä¸æ˜¯ <strong>RED</strong></p><ol><li><p>è‡ªå·±æŸ“æˆ <strong>BLACK</strong>ï¼Œgrand æŸ“æˆ <strong>RED</strong></p></li><li><p>è¿›è¡ŒåŒæ—‹æ“ä½œ</p></li></ol><p>LRï¼šparent å·¦æ—‹è½¬ï¼Œ grand å³æ—‹è½¬</p><p>RLï¼šparent å³æ—‹è½¬ï¼Œ grand å·¦æ—‹è½¬</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/7.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;E&gt; uncle = parent.sibling();</span><br><span class="line"><span class="comment">// ç¥–çˆ¶èŠ‚ç‚¹æŸ“æˆçº¢è‰²</span></span><br><span class="line">Node&lt;E&gt; grand = red(parent.parent);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isRed(uncle)) &#123; <span class="comment">// å”çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ã€Bæ ‘èŠ‚ç‚¹ä¸Šæº¢ã€‘</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹ä¸æ˜¯çº¢è‰²</span></span><br><span class="line"><span class="keyword">if</span> (parent.isLeftChild()) &#123; <span class="comment">// L</span></span><br><span class="line">   <span class="keyword">if</span> (!node.isLeftChild()) &#123; <span class="comment">// LR</span></span><br><span class="line">      black(node);</span><br><span class="line">      rotateLeft(parent);</span><br><span class="line">   &#125;</span><br><span class="line">   rotateRight(grand);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// R</span></span><br><span class="line">   <span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// RL</span></span><br><span class="line">      black(node);</span><br><span class="line">      rotateRight(parent);</span><br><span class="line">   &#125;</span><br><span class="line">   rotateLeft(grand);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-LL"><a href="#æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-LL" class="headerlink" title="æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ LL"></a>æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ LL</h4><p>åˆ¤å®šæ¡ä»¶ï¼šuncle æ˜¯ <strong>RED</strong></p><ol><li><p>parentã€uncle æŸ“æˆ <strong>BLACK</strong></p></li><li><p>grand å‘ä¸Šåˆå¹¶</p></li></ol><p>grandæŸ“æˆ <strong>RED</strong>ï¼Œå½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹è¿›è¡Œå¤„ç†</p><p>grand å‘ä¸Šåˆå¹¶æ—¶ï¼Œå¯èƒ½ç»§ç»­å‘ç”Ÿä¸Šæº¢</p><p>è‹¥ä¸Šæº¢æŒç»­åˆ°æ ¹èŠ‚ç‚¹ï¼Œåªéœ€å°†æ ¹èŠ‚ç‚¹æŸ“æˆ <strong>BLACK</strong></p><p><img src="/2020/07/12/çº¢é»‘æ ‘/8.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ çš„æ˜¯æ ¹èŠ‚ç‚¹ æˆ–è€… ä¸Šæº¢åˆ°è¾¾äº†æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> (parent == <span class="keyword">null</span>) &#123;</span><br><span class="line">    black(node);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;E&gt; uncle = parent.sibling();</span><br><span class="line"><span class="comment">// ç¥–çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;E&gt; grand = red(parent.parent);</span><br><span class="line"><span class="keyword">if</span> (isRed(uncle)) &#123; <span class="comment">// å”çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ã€Bæ ‘èŠ‚ç‚¹ä¸Šæº¢ã€‘</span></span><br><span class="line">   black(parent);</span><br><span class="line">   black(uncle);</span><br><span class="line">   <span class="comment">// æŠŠç¥–çˆ¶èŠ‚ç‚¹å½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹</span></span><br><span class="line">   afterAdd(grand);</span><br><span class="line">   <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-RR"><a href="#æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-RR" class="headerlink" title="æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ RR"></a>æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ RR</h4><p>åˆ¤å®šæ¡ä»¶ï¼šuncle æ˜¯ <strong>RED</strong></p><ol><li><p>parentã€uncle æŸ“æˆ <strong>BLACK</strong></p></li><li><p>grand å‘ä¸Šåˆå¹¶</p></li></ol><p>grandæŸ“æˆ <strong>RED</strong>ï¼Œå½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹è¿›è¡Œå¤„ç†</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/9.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å”çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;E&gt; uncle = parent.sibling();</span><br><span class="line"><span class="comment">// ç¥–çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">Node&lt;E&gt; grand = red(parent.parent);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isRed(uncle)) &#123; <span class="comment">// å”çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ã€Bæ ‘èŠ‚ç‚¹ä¸Šæº¢ã€‘</span></span><br><span class="line">   black(parent);</span><br><span class="line">   black(uncle);</span><br><span class="line">   <span class="comment">// æŠŠç¥–çˆ¶èŠ‚ç‚¹å½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹</span></span><br><span class="line">   afterAdd(grand);</span><br><span class="line">   <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-LR"><a href="#æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-LR" class="headerlink" title="æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ LR"></a>æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ LR</h4><p>åˆ¤å®šæ¡ä»¶ï¼šuncle æ˜¯ <strong>RED</strong></p><ol><li><p>parentã€uncle æŸ“æˆ <strong>BLACK</strong></p></li><li><p>grand å‘ä¸Šåˆå¹¶</p></li></ol><p>grandæŸ“æˆ <strong>RED</strong>ï¼Œå½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹è¿›è¡Œå¤„ç†</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/10.png" alt></p><h4 id="æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-RL"><a href="#æ·»åŠ -â€“-ä¿®å¤æ€§è´¨4-â€“-ä¸Šæº¢-â€“-RL" class="headerlink" title="æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ RL"></a>æ·»åŠ  â€“ ä¿®å¤æ€§è´¨4 â€“ ä¸Šæº¢ â€“ RL</h4><p>åˆ¤å®šæ¡ä»¶ï¼šuncle æ˜¯ <strong>RED</strong></p><ol><li><p>parentã€uncle æŸ“æˆ <strong>BLACK</strong></p></li><li><p>grand å‘ä¸Šåˆå¹¶</p></li></ol><p>grandæŸ“æˆ <strong>RED</strong>ï¼Œå½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹è¿›è¡Œå¤„ç†</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/11.png" alt></p><h2 id="çº¢é»‘æ ‘æ·»åŠ åå®Œæ•´ä¿®å¤çš„ä»£ç "><a href="#çº¢é»‘æ ‘æ·»åŠ åå®Œæ•´ä¿®å¤çš„ä»£ç " class="headerlink" title="çº¢é»‘æ ‘æ·»åŠ åå®Œæ•´ä¿®å¤çš„ä»£ç "></a>çº¢é»‘æ ‘æ·»åŠ åå®Œæ•´ä¿®å¤çš„ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterAdd</span><span class="params">(Node&lt;E&gt; node)</span> </span>&#123;</span><br><span class="line">   Node&lt;E&gt; parent = node.parent;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// æ·»åŠ çš„æ˜¯æ ¹èŠ‚ç‚¹ æˆ–è€… ä¸Šæº¢åˆ°è¾¾äº†æ ¹èŠ‚ç‚¹</span></span><br><span class="line">   <span class="keyword">if</span> (parent == <span class="keyword">null</span>) &#123;</span><br><span class="line">      black(node);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// å¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">   <span class="keyword">if</span> (isBlack(parent)) <span class="keyword">return</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// å”çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">   Node&lt;E&gt; uncle = parent.sibling();</span><br><span class="line">   <span class="comment">// ç¥–çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">   Node&lt;E&gt; grand = red(parent.parent);</span><br><span class="line">   <span class="keyword">if</span> (isRed(uncle)) &#123; <span class="comment">// å”çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ã€Bæ ‘èŠ‚ç‚¹ä¸Šæº¢ã€‘</span></span><br><span class="line">      black(parent);</span><br><span class="line">      black(uncle);</span><br><span class="line">      <span class="comment">// æŠŠç¥–çˆ¶èŠ‚ç‚¹å½“åšæ˜¯æ–°æ·»åŠ çš„èŠ‚ç‚¹</span></span><br><span class="line">      afterAdd(grand);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// å”çˆ¶èŠ‚ç‚¹ä¸æ˜¯çº¢è‰²</span></span><br><span class="line">   <span class="keyword">if</span> (parent.isLeftChild()) &#123; <span class="comment">// L</span></span><br><span class="line">      <span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// LL</span></span><br><span class="line">         black(parent);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// LR</span></span><br><span class="line">         black(node);</span><br><span class="line">         rotateLeft(parent);</span><br><span class="line">      &#125;</span><br><span class="line">      rotateRight(grand);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123; <span class="comment">// R</span></span><br><span class="line">      <span class="keyword">if</span> (node.isLeftChild()) &#123; <span class="comment">// RL</span></span><br><span class="line">         black(node);</span><br><span class="line">         rotateRight(parent);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// RR</span></span><br><span class="line">         black(parent);</span><br><span class="line">      &#125;</span><br><span class="line">      rotateLeft(grand);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çº¢é»‘æ ‘çš„åˆ é™¤"><a href="#çº¢é»‘æ ‘çš„åˆ é™¤" class="headerlink" title="çº¢é»‘æ ‘çš„åˆ é™¤"></a>çº¢é»‘æ ‘çš„åˆ é™¤</h2><p><strong>Bæ ‘ä¸­ï¼Œæœ€åçœŸæ­£è¢«åˆ é™¤çš„å…ƒç´ éƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸­</strong></p><p><img src="/2020/07/12/çº¢é»‘æ ‘/12.png" alt></p><h3 id="åˆ é™¤-â€“-REDèŠ‚ç‚¹"><a href="#åˆ é™¤-â€“-REDèŠ‚ç‚¹" class="headerlink" title="åˆ é™¤ â€“ REDèŠ‚ç‚¹"></a>åˆ é™¤ â€“ REDèŠ‚ç‚¹</h3><p>ç›´æ¥åˆ é™¤ï¼Œä¸ç”¨ä½œä»»ä½•è°ƒæ•´</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/13.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;E&gt; node, Node&lt;E&gt; replacement)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">    <span class="keyword">if</span> (isRed(node)) <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤-â€“-BLACKèŠ‚ç‚¹"><a href="#åˆ é™¤-â€“-BLACKèŠ‚ç‚¹" class="headerlink" title="åˆ é™¤ â€“ BLACKèŠ‚ç‚¹"></a>åˆ é™¤ â€“ BLACKèŠ‚ç‚¹</h3><p>æœ‰ 3 ç§æƒ…å†µ</p><ol><li><p>æ‹¥æœ‰ 2 ä¸ª <strong>RED</strong> å­èŠ‚ç‚¹çš„ <strong>BLACK</strong> èŠ‚ç‚¹</p><p>ä¸å¯èƒ½è¢«ç›´æ¥åˆ é™¤ï¼Œå› ä¸ºä¼šæ‰¾å®ƒçš„å­èŠ‚ç‚¹æ›¿ä»£åˆ é™¤</p><p>å› æ­¤ä¸ç”¨è€ƒè™‘è¿™ç§æƒ…å†µ</p></li><li><p>æ‹¥æœ‰ 1 ä¸ª <strong>RED</strong> å­èŠ‚ç‚¹çš„ <strong>BLACK</strong> èŠ‚ç‚¹</p></li><li><p><strong>BLACK</strong> å¶å­èŠ‚ç‚¹</p></li></ol><p><strong>ä¸‹æ–‡ä¸¾ä¾‹é‡‡ç”¨: è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å³è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œï¼ˆåä¹‹äº¤æ¢å·¦å³æ–¹å‘å³å¯ï¼‰</strong></p><p><img src="/2020/07/12/çº¢é»‘æ ‘/14.png" alt></p><h4 id="åˆ é™¤-æ‹¥æœ‰-1-ä¸ª-RED-å­èŠ‚ç‚¹çš„-BLACK-èŠ‚ç‚¹"><a href="#åˆ é™¤-æ‹¥æœ‰-1-ä¸ª-RED-å­èŠ‚ç‚¹çš„-BLACK-èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤ - æ‹¥æœ‰ 1 ä¸ª RED å­èŠ‚ç‚¹çš„ BLACK èŠ‚ç‚¹"></a>åˆ é™¤ - æ‹¥æœ‰ 1 ä¸ª RED å­èŠ‚ç‚¹çš„ BLACK èŠ‚ç‚¹</h4><p>åˆ¤å®šæ¡ä»¶ï¼šç”¨ä»¥æ›¿ä»£çš„å­èŠ‚ç‚¹æ˜¯ <strong>RED</strong></p><p>å°†æ›¿ä»£çš„å­èŠ‚ç‚¹æŸ“æˆ <strong>BLACK</strong> å³å¯ä¿æŒçº¢é»‘æ ‘æ€§è´¨</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/15.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;E&gt; node, Node&lt;E&gt; replacement)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç”¨ä»¥å–ä»£nodeçš„å­èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">    <span class="keyword">if</span> (isRed(replacement)) &#123;</span><br><span class="line">        black(replacement);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤-BLACK-å¶å­èŠ‚ç‚¹-siblingä¸ºBLACK-sibling-è‡³å°‘æœ‰-1-ä¸ª-RED-å­èŠ‚ç‚¹"><a href="#åˆ é™¤-BLACK-å¶å­èŠ‚ç‚¹-siblingä¸ºBLACK-sibling-è‡³å°‘æœ‰-1-ä¸ª-RED-å­èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤ - BLACK å¶å­èŠ‚ç‚¹ - siblingä¸ºBLACK - sibling è‡³å°‘æœ‰ 1 ä¸ª RED å­èŠ‚ç‚¹"></a>åˆ é™¤ - BLACK å¶å­èŠ‚ç‚¹ - siblingä¸ºBLACK - sibling è‡³å°‘æœ‰ 1 ä¸ª <strong>RED</strong> å­èŠ‚ç‚¹</h4><p><strong>BLACK</strong> å¶å­èŠ‚ç‚¹è¢«åˆ é™¤åï¼Œä¼šå¯¼è‡´Bæ ‘èŠ‚ç‚¹ä¸‹æº¢ï¼ˆæ¯”å¦‚åˆ é™¤88ï¼‰</p><p>å¦‚æœ sibling è‡³å°‘æœ‰ 1 ä¸ª <strong>RED</strong> å­èŠ‚ç‚¹<strong>ï¼ˆä¸€ä¸ªæˆ–ä¸¤ä¸ªREDå­èŠ‚ç‚¹ï¼‰</strong></p><p><strong>å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œ(æ²¡æœ‰å­èŠ‚ç‚¹ä¹Ÿç®—æ˜¯é»‘è‰²)</strong></p><ol><li><p>å…„å¼ŸèŠ‚ç‚¹å·¦æ—‹</p></li><li><p>æ”¹å˜å…„å¼ŸèŠ‚ç‚¹ä¸ºparentçš„å·¦è¾¹</p></li><li><p>åç»­å†æŒ‰<strong>å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯çº¢è‰²</strong>æ‰§è¡Œå³å¯</p></li></ol><p><img src="/2020/07/12/çº¢é»‘æ ‘/17.png" alt></p><p><strong>å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯çº¢è‰²</strong></p><ol><li><p>å…„å¼ŸèŠ‚ç‚¹ç»§æ‰¿ parent çš„é¢œè‰²</p></li><li><p>å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹å˜æˆé»‘è‰²</p></li><li><p>parentèŠ‚ç‚¹å˜æˆé»‘è‰²</p></li><li><p>parentå³æ—‹</p></li></ol><p><img src="/2020/07/12/çº¢é»‘æ ‘/16.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;E&gt; node, Node&lt;E&gt; replacement)</span> </span>&#123;</span><br><span class="line">    Node&lt;E&gt; parent = node.parent;</span><br><span class="line">    <span class="comment">// åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤çš„æ˜¯é»‘è‰²å¶å­èŠ‚ç‚¹ã€ä¸‹æº¢ã€‘</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è¢«åˆ é™¤çš„nodeæ˜¯å·¦è¿˜æ˜¯å³</span></span><br><span class="line">    <span class="keyword">boolean</span> left = parent.left == <span class="keyword">null</span> || node.isLeftChild();</span><br><span class="line">    Node&lt;E&gt; sibling = left ? parent.right : parent.left;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (left) &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹</span></span><br><span class="line">        <span class="comment">// .... ä»£ç çœç•¥ï¼Œå¯æŸ¥çœ‹æœ€åå®Œæ•´ä»£ç </span></span><br><span class="line">            </span><br><span class="line">    &#125;<span class="keyword">else</span> &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å³è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹</span></span><br><span class="line">        <span class="keyword">if</span> (isBlack(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²</span></span><br><span class="line">            <span class="comment">// å…„å¼ŸèŠ‚ç‚¹è‡³å°‘æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ </span></span><br><span class="line">            <span class="keyword">if</span> (isRed(sibling.left) || isRed(sibling.right)) &#123;</span><br><span class="line">                <span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿè¦å…ˆæ—‹è½¬</span></span><br><span class="line">                <span class="keyword">if</span> (isBlack(sibling.left)) &#123;</span><br><span class="line">                    rotateLeft(sibling);</span><br><span class="line">                    sibling = parent.left;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯çº¢è‰²æˆ–å…„å¼Ÿæ—‹è½¬å</span></span><br><span class="line">                color(sibling, colorOf(parent));</span><br><span class="line">                black(sibling.left);</span><br><span class="line">                black(parent);</span><br><span class="line">                rotateRight(parent);</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤-BLACK-å¶å­èŠ‚ç‚¹-siblingä¸ºBLACK-sibling-æ²¡æœ‰-1-ä¸ª-RED-å­èŠ‚ç‚¹"><a href="#åˆ é™¤-BLACK-å¶å­èŠ‚ç‚¹-siblingä¸ºBLACK-sibling-æ²¡æœ‰-1-ä¸ª-RED-å­èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤ - BLACK å¶å­èŠ‚ç‚¹ - siblingä¸ºBLACK - sibling æ²¡æœ‰ 1 ä¸ª RED å­èŠ‚ç‚¹"></a>åˆ é™¤ - BLACK å¶å­èŠ‚ç‚¹ - siblingä¸ºBLACK - sibling æ²¡æœ‰ 1 ä¸ª <strong>RED</strong> å­èŠ‚ç‚¹</h4><p>åˆ¤å®šæ¡ä»¶ï¼šsibling æ²¡æœ‰ 1 ä¸ª <strong>RED</strong> å­èŠ‚ç‚¹</p><p>å°† sibling æŸ“æˆ <strong>RED</strong>ã€parent æŸ“æˆ <strong>BLACK</strong> å³å¯ä¿®å¤çº¢é»‘æ ‘æ€§è´¨</p><p>å¦‚æœ parent æ˜¯ <strong>BLACK</strong></p><p>ä¼šå¯¼è‡´ parent ä¹Ÿä¸‹æº¢</p><p>è¿™æ—¶åªéœ€è¦æŠŠ parent å½“åšè¢«åˆ é™¤çš„èŠ‚ç‚¹å¤„ç†å³å¯</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/18.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;E&gt; node, Node&lt;E&gt; replacement)</span> </span>&#123;</span><br><span class="line">    Node&lt;E&gt; parent = node.parent;</span><br><span class="line">    <span class="comment">// åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤çš„æ˜¯é»‘è‰²å¶å­èŠ‚ç‚¹ã€ä¸‹æº¢ã€‘</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è¢«åˆ é™¤çš„nodeæ˜¯å·¦è¿˜æ˜¯å³</span></span><br><span class="line">    <span class="keyword">boolean</span> left = parent.left == <span class="keyword">null</span> || node.isLeftChild();</span><br><span class="line">    Node&lt;E&gt; sibling = left ? parent.right : parent.left;</span><br><span class="line">    <span class="keyword">if</span> (left) &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹</span></span><br><span class="line">        <span class="comment">// .... ä»£ç çœç•¥ï¼Œå¯æŸ¥çœ‹æœ€åå®Œæ•´ä»£ç </span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å³è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹</span></span><br><span class="line">        <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²</span></span><br><span class="line">        <span class="keyword">if</span>(isBlack(sibling))&#123;</span><br><span class="line">            <span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line">                <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è¦å‘ä¸‹è·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line">                <span class="keyword">boolean</span> parentBlack = isBlack(parent);</span><br><span class="line">                black(parent);</span><br><span class="line">                red(sibling);</span><br><span class="line">                <span class="keyword">if</span> (parentBlack) &#123;</span><br><span class="line">                    afterRemove(parent, <span class="keyword">null</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤-BLACK-å¶å­èŠ‚ç‚¹-siblingä¸ºRED"><a href="#åˆ é™¤-BLACK-å¶å­èŠ‚ç‚¹-siblingä¸ºRED" class="headerlink" title="åˆ é™¤ - BLACK å¶å­èŠ‚ç‚¹ - siblingä¸ºRED"></a>åˆ é™¤ - BLACK å¶å­èŠ‚ç‚¹ - siblingä¸ºRED</h4><p>å¦‚æœ sibling æ˜¯ <strong>RED</strong></p><p>sibling æŸ“æˆ <strong>BLACK</strong>ï¼Œparent æŸ“æˆ <strong>RED</strong>ï¼Œè¿›è¡Œæ—‹è½¬</p><p>äºæ˜¯åˆå›åˆ° sibling æ˜¯ <strong>BLACK</strong> çš„æƒ…å†µ</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/19.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;E&gt; node, Node&lt;E&gt; replacement)</span> </span>&#123;</span><br><span class="line">    Node&lt;E&gt; parent = node.parent;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤çš„æ˜¯é»‘è‰²å¶å­èŠ‚ç‚¹ã€ä¸‹æº¢ã€‘</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è¢«åˆ é™¤çš„nodeæ˜¯å·¦è¿˜æ˜¯å³</span></span><br><span class="line">    <span class="keyword">boolean</span> left = parent.left == <span class="keyword">null</span> || node.isLeftChild();</span><br><span class="line">    Node&lt;E&gt; sibling = left ? parent.right : parent.left;</span><br><span class="line">    <span class="keyword">if</span> (left) &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹</span></span><br><span class="line">        <span class="comment">// .... ä»£ç çœç•¥ï¼Œå¯æŸ¥çœ‹æœ€åå®Œæ•´ä»£ç </span></span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å³è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹</span></span><br><span class="line">        <span class="keyword">if</span> (isRed(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">            black(sibling);</span><br><span class="line">            red(parent);</span><br><span class="line">            rotateRight(parent);</span><br><span class="line">            <span class="comment">// æ›´æ¢å…„å¼Ÿ</span></span><br><span class="line">            sibling = parent.left;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çº¢é»‘æ ‘åˆ é™¤åå®Œæ•´ä¿®å¤çš„ä»£ç "><a href="#çº¢é»‘æ ‘åˆ é™¤åå®Œæ•´ä¿®å¤çš„ä»£ç " class="headerlink" title="çº¢é»‘æ ‘åˆ é™¤åå®Œæ•´ä¿®å¤çš„ä»£ç "></a>çº¢é»‘æ ‘åˆ é™¤åå®Œæ•´ä¿®å¤çš„ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">afterRemove</span><span class="params">(Node&lt;E&gt; node)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">   <span class="comment">// æˆ–è€… ç”¨ä»¥å–ä»£åˆ é™¤èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">   <span class="keyword">if</span> (isRed(node)) &#123;</span><br><span class="line">      black(node);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   Node&lt;E&gt; parent = node.parent;</span><br><span class="line">   <span class="comment">// åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">   <span class="keyword">if</span> (parent == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// åˆ é™¤çš„æ˜¯é»‘è‰²å¶å­èŠ‚ç‚¹ã€ä¸‹æº¢ã€‘</span></span><br><span class="line">   <span class="comment">// åˆ¤æ–­è¢«åˆ é™¤çš„nodeæ˜¯å·¦è¿˜æ˜¯å³</span></span><br><span class="line">   <span class="keyword">boolean</span> left = parent.left == <span class="keyword">null</span> || node.isLeftChild();</span><br><span class="line">   Node&lt;E&gt; sibling = left ? parent.right : parent.left;</span><br><span class="line">   <span class="keyword">if</span> (left) &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹</span></span><br><span class="line">      <span class="keyword">if</span> (isRed(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">         black(sibling);</span><br><span class="line">         red(parent);</span><br><span class="line">         rotateLeft(parent);</span><br><span class="line">         <span class="comment">// æ›´æ¢å…„å¼Ÿ</span></span><br><span class="line">         sibling = parent.right;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å…„å¼ŸèŠ‚ç‚¹å¿…ç„¶æ˜¯é»‘è‰²</span></span><br><span class="line">      <span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line">         <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è¦å‘ä¸‹è·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line">         <span class="keyword">boolean</span> parentBlack = isBlack(parent);</span><br><span class="line">         black(parent);</span><br><span class="line">         red(sibling);</span><br><span class="line">         <span class="keyword">if</span> (parentBlack) &#123;</span><br><span class="line">            afterRemove(parent);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹è‡³å°‘æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ </span></span><br><span class="line">         <span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿè¦å…ˆæ—‹è½¬</span></span><br><span class="line">         <span class="keyword">if</span> (isBlack(sibling.right)) &#123;</span><br><span class="line">            rotateRight(sibling);</span><br><span class="line">            sibling = parent.right;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         color(sibling, colorOf(parent));</span><br><span class="line">         black(sibling.right);</span><br><span class="line">         black(parent);</span><br><span class="line">         rotateLeft(parent);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123; <span class="comment">// è¢«åˆ é™¤çš„èŠ‚ç‚¹åœ¨å³è¾¹ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹</span></span><br><span class="line">      <span class="keyword">if</span> (isRed(sibling)) &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">         black(sibling);</span><br><span class="line">         red(parent);</span><br><span class="line">         rotateRight(parent);</span><br><span class="line">         <span class="comment">// æ›´æ¢å…„å¼Ÿ</span></span><br><span class="line">         sibling = parent.left;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å…„å¼ŸèŠ‚ç‚¹å¿…ç„¶æ˜¯é»‘è‰²</span></span><br><span class="line">      <span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line">         <span class="comment">// å…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è¦å‘ä¸‹è·Ÿå…„å¼ŸèŠ‚ç‚¹åˆå¹¶</span></span><br><span class="line">         <span class="keyword">boolean</span> parentBlack = isBlack(parent);</span><br><span class="line">         black(parent);</span><br><span class="line">         red(sibling);</span><br><span class="line">         <span class="keyword">if</span> (parentBlack) &#123;</span><br><span class="line">            afterRemove(parent);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// å…„å¼ŸèŠ‚ç‚¹è‡³å°‘æœ‰1ä¸ªçº¢è‰²å­èŠ‚ç‚¹ï¼Œå‘å…„å¼ŸèŠ‚ç‚¹å€Ÿå…ƒç´ </span></span><br><span class="line">         <span class="comment">// å…„å¼ŸèŠ‚ç‚¹çš„å·¦è¾¹æ˜¯é»‘è‰²ï¼Œå…„å¼Ÿè¦å…ˆæ—‹è½¬</span></span><br><span class="line">         <span class="keyword">if</span> (isBlack(sibling.left)) &#123;</span><br><span class="line">            rotateLeft(sibling);</span><br><span class="line">            sibling = parent.left;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         color(sibling, colorOf(parent));</span><br><span class="line">         black(sibling.left);</span><br><span class="line">         black(parent);</span><br><span class="line">         rotateRight(parent);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çº¢é»‘æ ‘çš„å¹³è¡¡"><a href="#çº¢é»‘æ ‘çš„å¹³è¡¡" class="headerlink" title="çº¢é»‘æ ‘çš„å¹³è¡¡"></a>çº¢é»‘æ ‘çš„å¹³è¡¡</h2><p>ä¸ºä½•é‚£5æ¡æ€§è´¨ï¼Œå°±èƒ½ä¿è¯çº¢é»‘æ ‘æ˜¯å¹³è¡¡çš„ï¼Ÿ</p><p>é‚£5æ¡æ€§è´¨ï¼Œå¯ä»¥ä¿è¯çº¢é»‘æ ‘ç­‰ä»·äº4é˜¶Bæ ‘</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/20.png" alt></p><p>ç›¸æ¯”AVLæ ‘ï¼Œçº¢é»‘æ ‘çš„å¹³è¡¡æ ‡å‡†æ¯”è¾ƒå®½æ¾ï¼šæ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šå¤§äºå…¶ä»–è·¯å¾„çš„2å€</p><p>æ˜¯ä¸€ç§å¼±å¹³è¡¡ã€é»‘é«˜åº¦å¹³è¡¡</p><p>çº¢é»‘æ ‘çš„æœ€å¤§é«˜åº¦æ˜¯ 2 âˆ— log2(n + 1) ï¼Œä¾ç„¶æ˜¯ O(logn) çº§åˆ«</p><h2 id="å¹³å‡æ—¶é—´å¤æ‚åº¦"><a href="#å¹³å‡æ—¶é—´å¤æ‚åº¦" class="headerlink" title="å¹³å‡æ—¶é—´å¤æ‚åº¦"></a>å¹³å‡æ—¶é—´å¤æ‚åº¦</h2><p>æœç´¢ï¼šO(logn)</p><p>æ·»åŠ ï¼šO(logn)ï¼ŒO(1) æ¬¡çš„æ—‹è½¬æ“ä½œ</p><p>åˆ é™¤ï¼šO(logn)ï¼ŒO(1) æ¬¡çš„æ—‹è½¬æ“ä½œ</p><h2 id="AVLæ ‘-vs-çº¢é»‘æ ‘"><a href="#AVLæ ‘-vs-çº¢é»‘æ ‘" class="headerlink" title="AVLæ ‘ vs çº¢é»‘æ ‘"></a>AVLæ ‘ vs çº¢é»‘æ ‘</h2><p><strong>AVLæ ‘</strong>  <a href="/2020/07/12/AVLæ ‘/" title="AVLæ ‘çš„å®ç°">AVLæ ‘çš„å®ç°</a></p><p>å¹³è¡¡æ ‡å‡†æ¯”è¾ƒä¸¥æ ¼ï¼š<strong>æ¯ä¸ªå·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1</strong></p><p>æœ€å¤§é«˜åº¦æ˜¯ 1.44  âˆ— log2  n + 2 âˆ’ 1.328ï¼ˆ100Wä¸ªèŠ‚ç‚¹ï¼ŒAVLæ ‘æœ€å¤§æ ‘é«˜28ï¼‰</p><p>æœç´¢ã€æ·»åŠ ã€åˆ é™¤éƒ½æ˜¯ O(logn) å¤æ‚åº¦ï¼Œå…¶ä¸­æ·»åŠ ä»…éœ€ O(1) æ¬¡æ—‹è½¬è°ƒæ•´ã€åˆ é™¤æœ€å¤šéœ€è¦ O(logn) æ¬¡æ—‹è½¬è°ƒæ•´</p><p><strong>çº¢é»‘æ ‘</strong></p><p>å¹³è¡¡æ ‡å‡†æ¯”è¾ƒå®½æ¾ï¼š<strong>æ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šå¤§äºå…¶ä»–è·¯å¾„çš„2å€</strong></p><p>æœ€å¤§é«˜åº¦æ˜¯ 2 âˆ— log2(n + 1)ï¼ˆ 100Wä¸ªèŠ‚ç‚¹ï¼Œçº¢é»‘æ ‘æœ€å¤§æ ‘é«˜40ï¼‰</p><p>æœç´¢ã€æ·»åŠ ã€åˆ é™¤éƒ½æ˜¯ O(logn) å¤æ‚åº¦ï¼Œå…¶ä¸­æ·»åŠ ã€åˆ é™¤éƒ½ä»…éœ€ O(1) æ¬¡æ—‹è½¬è°ƒæ•´</p><p><strong>æ€»ç»“</strong></p><p>æœç´¢çš„æ¬¡æ•°è¿œè¿œå¤§äºæ’å…¥å’Œåˆ é™¤ï¼Œé€‰æ‹©AVLæ ‘ï¼›æœç´¢ã€æ’å…¥ã€åˆ é™¤æ¬¡æ•°å‡ ä¹å·®ä¸å¤šï¼Œé€‰æ‹©çº¢é»‘æ ‘</p><p>ç›¸å¯¹äºAVLæ ‘æ¥è¯´ï¼Œçº¢é»‘æ ‘ç‰ºç‰²äº†éƒ¨åˆ†å¹³è¡¡æ€§ä»¥æ¢å–æ’å…¥/åˆ é™¤æ“ä½œæ—¶å°‘é‡çš„æ—‹è½¬æ“ä½œï¼Œæ•´ä½“æ¥è¯´æ€§èƒ½è¦ä¼˜äºAVLæ ‘</p><p>çº¢é»‘æ ‘çš„å¹³å‡ç»Ÿè®¡æ€§èƒ½ä¼˜äºAVLæ ‘ï¼Œå®é™…åº”ç”¨ä¸­æ›´å¤šé€‰æ‹©ä½¿ç”¨çº¢é»‘æ ‘</p><h2 id="BST-vs-AVL-Tree-vs-Red-Black-Tree"><a href="#BST-vs-AVL-Tree-vs-Red-Black-Tree" class="headerlink" title="BST vs AVL Tree vs Red Black Tree"></a>BST vs AVL Tree vs Red Black Tree</h2><p>10, 35, 47, 11, 5, 57, 39, 14, 27, 26, 84, 75, 63, 41, 37, 24, 96</p><p><img src="/2020/07/12/çº¢é»‘æ ‘/21.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;çº¢é»‘æ ‘ï¼ˆRed-Black-Treeï¼‰&quot;&gt;&lt;a href=&quot;#çº¢é»‘æ ‘ï¼ˆRed-Black-Treeï¼‰&quot; class=&quot;headerlink&quot; title=&quot;çº¢é»‘æ ‘ï¼ˆRed Black Treeï¼‰&quot;&gt;&lt;/a&gt;çº¢é»‘æ ‘ï¼ˆRed Black Treeï¼‰&lt;/h1&gt;&lt;h2 i
      
    
    </summary>
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ ‘" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91/"/>
    
    
      <category term="æ•°æ®ç»“æ„" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="æ ‘" scheme="http://yoursite.com/tags/%E6%A0%91/"/>
    
  </entry>
  
</feed>
